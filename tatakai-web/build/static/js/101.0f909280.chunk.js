"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[101],{1101:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var t=s(5043),i=s(9379),r=s(697),n=s(6446),c=s(3204),l=s(579);const d=e=>{let{onMetricLogged:a}=e;const{token:s}=(0,t.useContext)(r.c),d={date:(()=>{const e=new Date,a=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(t)})(),weight:"",bodyFatPercentage:"",waist:""},[o,m]=(0,t.useState)(d),[h,u]=(0,t.useState)(""),[g,x]=(0,t.useState)(""),[y,j]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{if(s)try{const e=await fetch("/api/metrics?limit=1",{headers:{"x-auth-token":s}});if(e.ok){const a=await e.json();a&&a.length>0&&j(a[0])}}catch(e){console.error("Failed to fetch latest metrics",e)}})()},[s]);const p=e=>{m((0,i.A)((0,i.A)({},o),{},{[e.target.name]:e.target.value}))},v={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,staggerChildren:.1}}},b={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},w=[{name:"weight",label:"Weight (kg)",icon:c.egb,required:!0},{name:"bodyFatPercentage",label:"Body Fat %",icon:c.v$b,required:!1},{name:"waist",label:"Waist (cm)",icon:c.c7S,required:!1}];return(0,l.jsxs)(n.P.div,{className:"metric-logger-enhanced",variants:v,initial:"hidden",animate:"visible",children:[h&&(0,l.jsx)(n.P.div,{className:"alert alert-error",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:h}),g&&(0,l.jsxs)(n.P.div,{className:"alert alert-success",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[(0,l.jsx)(c.CMH,{})," ",g]}),(0,l.jsxs)(n.P.div,{className:"metric-header",variants:b,children:[(0,l.jsx)("h3",{children:"Log Your Body Metrics"}),(0,l.jsx)("p",{children:"Track your progress with detailed measurements"})]}),(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u(""),x(""),o.weight)try{const e=await fetch("/api/metrics",{method:"POST",headers:{"Content-Type":"application/json","x-auth-token":s},body:JSON.stringify(o)});if(!e.ok){const a=await e.json();throw new Error(a.msg||"Failed to log metrics.")}x("Metrics logged successfully!"),m(d),null===a||void 0===a||a(),setTimeout(()=>x(""),3e3)}catch(t){u(t.message)}else u("Weight is a required field.")},className:"metric-logger-form-enhanced",children:[(0,l.jsxs)(n.P.div,{className:"date-selector",variants:b,children:[(0,l.jsx)("label",{children:"Date"}),(0,l.jsx)("input",{type:"date",name:"date",className:"form-input-metric",value:o.date,onChange:p,required:!0})]}),(0,l.jsx)(n.P.div,{className:"metrics-grid",variants:v,children:w.map((e,a)=>{const s=e.icon;return(0,l.jsxs)(n.P.div,{className:"metric-input-wrapper",variants:b,whileHover:{y:-4},children:[(0,l.jsxs)("label",{htmlFor:e.name,children:[(0,l.jsx)(s,{className:"metric-icon"}),e.label,e.required&&(0,l.jsx)("span",{className:"required",children:"*"})]}),(0,l.jsx)("input",{id:e.name,type:"number",name:e.name,className:"form-input-metric",placeholder:e.label,value:o[e.name],onChange:p,required:e.required,step:"0.1"}),(0,l.jsx)(n.P.div,{className:"input-underline",initial:{scaleX:0},whileFocus:{scaleX:1}})]},e.name)})}),(0,l.jsxs)(n.P.div,{className:"metric-summary",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.3},children:[(0,l.jsx)("h4",{children:"Current Values"}),(0,l.jsxs)("div",{className:"summary-values",children:[(0,l.jsxs)("div",{className:"summary-item",children:[(0,l.jsx)("span",{children:"Weight:"})," ",(0,l.jsxs)("strong",{children:[o.weight||(null===y||void 0===y?void 0:y.weight)||"--"," kg"]})]}),(0,l.jsxs)("div",{className:"summary-item",children:[(0,l.jsx)("span",{children:"Body Fat:"})," ",(0,l.jsxs)("strong",{children:[o.bodyFatPercentage||(null===y||void 0===y?void 0:y.bodyFatPercentage)||"--","%"]})]}),(0,l.jsxs)("div",{className:"summary-item",children:[(0,l.jsx)("span",{children:"Waist:"})," ",(0,l.jsxs)("strong",{children:[o.waist||(null===y||void 0===y?void 0:y.waist)||"--"," cm"]})]})]})]}),(0,l.jsxs)(n.P.button,{type:"submit",className:"btn-save-metrics",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(138, 43, 226, 0.5)"},whileTap:{scale:.95},children:[(0,l.jsx)(c.CMH,{})," Save Metrics"]})]})]})},o=e=>{let{children:a,className:s}=e;return(0,l.jsx)("div",{className:"card ".concat(s||""),children:a})};var m=s(9981);const h=e=>{let{title:a}=e;return(0,l.jsxs)("div",{className:"page-header",children:[(0,l.jsxs)(m.N_,{to:"/fitness",className:"back-link",children:[(0,l.jsx)(c.QVr,{}),(0,l.jsx)("span",{children:"Back to Fitness Menu"})]}),(0,l.jsx)("h2",{children:a})]})},u=()=>(0,l.jsxs)("div",{children:[(0,l.jsx)(h,{title:"System Quest: Log Workout"})," ",(0,l.jsxs)(o,{children:[(0,l.jsx)("h2",{children:"System Task: Log Body Metrics"}),(0,l.jsx)(d,{})]})]})}}]);
//# sourceMappingURL=101.0f909280.chunk.js.map