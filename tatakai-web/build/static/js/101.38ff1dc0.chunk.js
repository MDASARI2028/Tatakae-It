"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[101],{1101:(e,a,s)=>{s.r(a),s.d(a,{default:()=>g});var i=s(5043),t=s(9379),r=s(697),n=s(6446),c=s(184),l=s(9778),d=s(579);const o=e=>{let{onMetricLogged:a}=e;const{isAuthenticated:s}=(0,i.useContext)(r.c),o={date:(()=>{const e=new Date,a=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(i)})(),weight:"",bodyFatPercentage:"",waist:""},[m,h]=(0,i.useState)(o),[u,g]=(0,i.useState)(""),[v,x]=(0,i.useState)(""),[p,y]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{if(s)try{const e=await l.A.get("/api/metrics?limit=1");e.data&&e.data.length>0&&y(e.data[0])}catch(e){console.error("Failed to fetch latest metrics",e)}})()},[s]);const j=e=>{h((0,t.A)((0,t.A)({},m),{},{[e.target.name]:e.target.value}))},b={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,staggerChildren:.1}}},N={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},w=[{name:"weight",label:"Weight (kg)",icon:c.egb,required:!0},{name:"bodyFatPercentage",label:"Body Fat %",icon:c.v$b,required:!1},{name:"waist",label:"Waist (cm)",icon:c.c7S,required:!1}];return(0,d.jsxs)(n.P.div,{className:"metric-logger-enhanced",variants:b,initial:"hidden",animate:"visible",children:[u&&(0,d.jsx)(n.P.div,{className:"alert alert-error",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:u}),v&&(0,d.jsxs)(n.P.div,{className:"alert alert-success",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[(0,d.jsx)(c.CMH,{})," ",v]}),(0,d.jsxs)(n.P.div,{className:"metric-header",variants:N,children:[(0,d.jsx)("h3",{children:"Log Your Body Metrics"}),(0,d.jsx)("p",{children:"Track your progress with detailed measurements"})]}),(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g(""),x(""),m.weight)try{await l.A.post("/api/metrics",m),x("Metrics logged successfully!"),h(o),null===a||void 0===a||a(),setTimeout(()=>x(""),3e3),y(e=>(0,t.A)((0,t.A)({},e),m))}catch(r){var s,i;const e=(null===(s=r.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.msg)||r.message||"Failed to log metrics.";g(e)}else g("Weight is a required field.")},className:"metric-logger-form-enhanced",children:[(0,d.jsxs)(n.P.div,{className:"date-selector",variants:N,children:[(0,d.jsx)("label",{children:"Date"}),(0,d.jsx)("input",{type:"date",name:"date",className:"form-input-metric",value:m.date,onChange:j,required:!0})]}),(0,d.jsx)(n.P.div,{className:"metrics-grid",variants:b,children:w.map((e,a)=>{const s=e.icon;return(0,d.jsxs)(n.P.div,{className:"metric-input-wrapper",variants:N,whileHover:{y:-4},children:[(0,d.jsxs)("label",{htmlFor:e.name,children:[(0,d.jsx)(s,{className:"metric-icon"}),e.label,e.required&&(0,d.jsx)("span",{className:"required",children:"*"})]}),(0,d.jsx)("input",{id:e.name,type:"number",name:e.name,className:"form-input-metric",placeholder:e.label,value:m[e.name],onChange:j,required:e.required,step:"0.1"}),(0,d.jsx)(n.P.div,{className:"input-underline",initial:{scaleX:0},whileFocus:{scaleX:1}})]},e.name)})}),(0,d.jsxs)(n.P.div,{className:"metric-summary",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.3},children:[(0,d.jsx)("h4",{children:"Current Values"}),(0,d.jsxs)("div",{className:"summary-values",children:[(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("span",{children:"Weight:"})," ",(0,d.jsxs)("strong",{children:[m.weight||(null===p||void 0===p?void 0:p.weight)||"--"," kg"]})]}),(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("span",{children:"Body Fat:"})," ",(0,d.jsxs)("strong",{children:[m.bodyFatPercentage||(null===p||void 0===p?void 0:p.bodyFatPercentage)||"--","%"]})]}),(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("span",{children:"Waist:"})," ",(0,d.jsxs)("strong",{children:[m.waist||(null===p||void 0===p?void 0:p.waist)||"--"," cm"]})]})]})]}),(0,d.jsxs)(n.P.button,{type:"submit",className:"btn-save-metrics",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(21, 53, 212, 0.5)"},whileTap:{scale:.95},children:[(0,d.jsx)(c.CMH,{})," Save Metrics"]})]})]})},m=e=>{let{children:a,className:s}=e;return(0,d.jsx)("div",{className:"card ".concat(s||""),children:a})};var h=s(9981);const u=e=>{let{title:a}=e;return(0,d.jsxs)("div",{className:"page-header",children:[(0,d.jsxs)(h.N_,{to:"/fitness",className:"back-link",children:[(0,d.jsx)(c.QVr,{}),(0,d.jsx)("span",{children:"Back to Fitness Menu"})]}),(0,d.jsx)("h2",{children:a})]})},g=()=>(0,d.jsxs)("div",{children:[(0,d.jsx)(u,{title:"System Quest: Log Workout"})," ",(0,d.jsxs)(m,{children:[(0,d.jsx)("h2",{children:"System Task: Log Body Metrics"}),(0,d.jsx)(o,{})]})]})}}]);
//# sourceMappingURL=101.38ff1dc0.chunk.js.map