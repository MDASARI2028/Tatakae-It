{"version":3,"file":"static/js/101.38ff1dc0.chunk.js","mappings":"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","sources":["components/BodyMetricLogger.js","components/Card.js","components/PageHeader.js","pages/BodyMetricLoggerPage.js"],"sourcesContent":["// frontend/src/components/BodyMetricLogger.js\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport { motion } from 'framer-motion';\nimport { FaCheck, FaWeight, FaChartBar, FaRuler } from 'react-icons/fa';\nimport api from '../api/axios'; // Import the configured axios instance\nimport './BodyMetricLogger.css';\n\nconst BodyMetricLogger = ({ onMetricLogged }) => {\n    // We don't need token from context anymore since axios interceptor handles it\n    // But we might need it for checking if user is logged in if we wanted to conditional render\n    const { isAuthenticated } = useContext(AuthContext);\n\n    // Helper to get local date string (YYYY-MM-DD) without UTC conversion\n    const getLocalDateString = () => {\n        const now = new Date();\n        const year = now.getFullYear();\n        const month = String(now.getMonth() + 1).padStart(2, '0');\n        const day = String(now.getDate()).padStart(2, '0');\n        return `${year}-${month}-${day}`;\n    };\n\n    const initialState = {\n        date: getLocalDateString(),\n        weight: '',\n        bodyFatPercentage: '',\n        waist: '',\n    };\n\n    const [metrics, setMetrics] = useState(initialState);\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n    const [latestMetrics, setLatestMetrics] = useState(null);\n\n    useEffect(() => {\n        const fetchLatestMetrics = async () => {\n            if (!isAuthenticated) return;\n            try {\n                // Use api.get instead of fetch\n                const response = await api.get('/api/metrics?limit=1');\n                if (response.data && response.data.length > 0) {\n                    setLatestMetrics(response.data[0]);\n                }\n            } catch (err) {\n                console.error(\"Failed to fetch latest metrics\", err);\n            }\n        };\n        fetchLatestMetrics();\n    }, [isAuthenticated]);\n\n\n\n    const handleChange = (e) => {\n        setMetrics({ ...metrics, [e.target.name]: e.target.value });\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setError('');\n        setSuccess('');\n\n        if (!metrics.weight) {\n            setError('Weight is a required field.');\n            return;\n        }\n\n        try {\n            // Use api.post instead of fetch\n            await api.post('/api/metrics', metrics);\n\n            setSuccess('Metrics logged successfully!');\n            setMetrics(initialState);\n            onMetricLogged?.();\n            setTimeout(() => setSuccess(''), 3000);\n\n            // Refresh latest metrics immediately for better UX\n            setLatestMetrics(prev => ({ ...prev, ...metrics }));\n\n        } catch (err) {\n            // Axios error handling\n            const msg = err.response?.data?.msg || err.message || 'Failed to log metrics.';\n            setError(msg);\n        }\n    };\n\n    const containerVariants = {\n        hidden: { opacity: 0, y: 20 },\n        visible: {\n            opacity: 1,\n            y: 0,\n            transition: { duration: 0.6, staggerChildren: 0.1 }\n        }\n    };\n\n    const itemVariants = {\n        hidden: { opacity: 0, y: 10 },\n        visible: { opacity: 1, y: 0 }\n    };\n\n    const metricFields = [\n        { name: 'weight', label: 'Weight (kg)', icon: FaWeight, required: true },\n        { name: 'bodyFatPercentage', label: 'Body Fat %', icon: FaChartBar, required: false },\n        { name: 'waist', label: 'Waist (cm)', icon: FaRuler, required: false },\n    ];\n\n    return (\n        <motion.div\n            className=\"metric-logger-enhanced\"\n            variants={containerVariants}\n            initial=\"hidden\"\n            animate=\"visible\"\n        >\n            {error && (\n                <motion.div\n                    className=\"alert alert-error\"\n                    initial={{ opacity: 0, y: -10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                >\n                    {error}\n                </motion.div>\n            )}\n            {success && (\n                <motion.div\n                    className=\"alert alert-success\"\n                    initial={{ opacity: 0, y: -10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                >\n                    <FaCheck /> {success}\n                </motion.div>\n            )}\n\n            <motion.div className=\"metric-header\" variants={itemVariants}>\n                <h3>Log Your Body Metrics</h3>\n                <p>Track your progress with detailed measurements</p>\n            </motion.div>\n\n            <form onSubmit={handleSubmit} className=\"metric-logger-form-enhanced\">\n                <motion.div className=\"date-selector\" variants={itemVariants}>\n                    <label>Date</label>\n                    <input\n                        type=\"date\"\n                        name=\"date\"\n                        className=\"form-input-metric\"\n                        value={metrics.date}\n                        onChange={handleChange}\n                        required\n                    />\n                </motion.div>\n\n                <motion.div\n                    className=\"metrics-grid\"\n                    variants={containerVariants}\n                >\n                    {metricFields.map((field, idx) => {\n                        const Icon = field.icon;\n                        return (\n                            <motion.div\n                                key={field.name}\n                                className=\"metric-input-wrapper\"\n                                variants={itemVariants}\n                                whileHover={{ y: -4 }}\n                            >\n                                <label htmlFor={field.name}>\n                                    <Icon className=\"metric-icon\" />\n                                    {field.label}\n                                    {field.required && <span className=\"required\">*</span>}\n                                </label>\n                                <input\n                                    id={field.name}\n                                    type=\"number\"\n                                    name={field.name}\n                                    className=\"form-input-metric\"\n                                    placeholder={field.label}\n                                    value={metrics[field.name]}\n                                    onChange={handleChange}\n                                    required={field.required}\n                                    step=\"0.1\"\n                                />\n                                <motion.div\n                                    className=\"input-underline\"\n                                    initial={{ scaleX: 0 }}\n                                    whileFocus={{ scaleX: 1 }}\n                                />\n                            </motion.div>\n                        );\n                    })}\n                </motion.div>\n\n                <motion.div\n                    className=\"metric-summary\"\n                    initial={{ opacity: 0, scale: 0.95 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    transition={{ delay: 0.3 }}\n                >\n                    <h4>Current Values</h4>\n                    <div className=\"summary-values\">\n                        <div className=\"summary-item\">\n                            <span>Weight:</span> <strong>{metrics.weight || latestMetrics?.weight || '--'} kg</strong>\n                        </div>\n                        <div className=\"summary-item\">\n                            <span>Body Fat:</span> <strong>{metrics.bodyFatPercentage || latestMetrics?.bodyFatPercentage || '--'}%</strong>\n                        </div>\n                        <div className=\"summary-item\">\n                            <span>Waist:</span> <strong>{metrics.waist || latestMetrics?.waist || '--'} cm</strong>\n                        </div>\n                    </div>\n                </motion.div>\n\n                <motion.button\n                    type=\"submit\"\n                    className=\"btn-save-metrics\"\n                    whileHover={{ scale: 1.05, boxShadow: \"0 0 20px rgba(21, 53, 212, 0.5)\" }}\n                    whileTap={{ scale: 0.95 }}\n                >\n                    <FaCheck /> Save Metrics\n                </motion.button>\n            </form>\n        </motion.div>\n    );\n};\n\nexport default BodyMetricLogger;","// frontend/src/components/Card.js\nimport React from 'react';\nimport './Card.css';\n\nconst Card = ({ children, className }) => {\n  return <div className={`card ${className || ''}`}>{children}</div>;\n};\n\nexport default Card;","// frontend/src/components/PageHeader.js\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { FaArrowLeft } from 'react-icons/fa';\nimport './PageHeader.css';\n\nconst PageHeader = ({ title }) => {\n    return (\n        <div className=\"page-header\">\n            <Link to=\"/fitness\" className=\"back-link\">\n                <FaArrowLeft />\n                <span>Back to Fitness Menu</span>\n            </Link>\n            <h2>{title}</h2>\n        </div>\n    );\n};\n\nexport default PageHeader;","// frontend/src/pages/BodyMetricLoggerPage.js\n\nimport React from 'react'; // Removed useState\nimport BodyMetricLogger from '../components/BodyMetricLogger';\nimport Card from '../components/Card';\nimport PageHeader from '../components/PageHeader'; // <-- ADD THIS IMPORT\n\nconst BodyMetricLoggerPage = () => {\n    // The useState and handleLog functions are no longer needed here.\n    // The onMetricLogged prop is also no longer needed.\n\n    return (\n        <div>\n        <PageHeader title=\"System Quest: Log Workout\" /> {/* <-- ADD THIS */}\n        <Card>\n            <h2>System Task: Log Body Metrics</h2>\n            <BodyMetricLogger />\n        </Card>\n        </div>\n    );\n};\n\nexport default BodyMetricLoggerPage;"],"names":["_ref","onMetricLogged","isAuthenticated","useContext","AuthContext","initialState","date","getLocalDateString","now","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","concat","weight","bodyFatPercentage","waist","metrics","setMetrics","useState","error","setError","success","setSuccess","latestMetrics","setLatestMetrics","useEffect","async","response","api","get","data","length","err","console","fetchLatestMetrics","handleChange","e","_objectSpread","target","name","value","containerVariants","hidden","opacity","y","visible","transition","duration","staggerChildren","itemVariants","metricFields","label","icon","FaWeight","required","FaChartBar","FaRuler","_jsxs","motion","div","className","variants","initial","animate","children","_jsx","FaCheck","onSubmit","preventDefault","post","setTimeout","prev","_err$response","_err$response$data","msg","message","type","onChange","map","field","idx","Icon","whileHover","htmlFor","id","placeholder","step","scaleX","whileFocus","scale","delay","button","boxShadow","whileTap","title","Link","to","FaArrowLeft","BodyMetricLoggerPage","PageHeader","Card","BodyMetricLogger"],"sourceRoot":""}