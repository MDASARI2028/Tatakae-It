{"version":3,"file":"static/js/194.07e21653.chunk.js","mappings":"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","sources":["pages/ProgressPage.js","components/common/BackButton.js"],"sourcesContent":["// frontend/src/pages/ProgressPage.js\n\nimport React, { useContext, useEffect, useState, useMemo } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler } from 'chart.js';\nimport { AuthContext } from '../context/AuthContext';\nimport { WorkoutContext } from '../context/WorkoutContext';\nimport { TemplateContext } from '../context/TemplateContext';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { FaTrophy, FaFireAlt, FaChartLine, FaBullseye, FaCalendarAlt, FaArrowUp, FaArrowDown, FaDumbbell } from 'react-icons/fa';\nimport BackButton from '../components/common/BackButton';\nimport './ProgressPage.css';\n\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler);\n\nconst ProgressPage = () => {\n    const { token } = useContext(AuthContext);\n    const { workouts } = useContext(WorkoutContext);\n    const { templates, refreshTemplates } = useContext(TemplateContext);\n    const [selectedTemplate, setSelectedTemplate] = useState(null);\n    const [bodyMetrics, setBodyMetrics] = useState([]);\n    const [timeRange, setTimeRange] = useState('month'); // 'week', 'month', 'year', 'all'\n\n    useEffect(() => {\n        if (templates.length === 0 && token) refreshTemplates();\n    }, [templates.length, token, refreshTemplates]);\n\n    useEffect(() => {\n        const fetchMetrics = async () => {\n            if (!token) return;\n            try {\n                const res = await fetch('/api/metrics', { headers: { 'x-auth-token': token } });\n                if (res.ok) setBodyMetrics(await res.json());\n            } catch (error) { console.error('Failed to fetch metrics:', error); }\n        };\n        fetchMetrics();\n    }, [token]);\n\n    const handleTemplateChange = (e) => {\n        const template = templates.find(t => t._id === e.target.value);\n        setSelectedTemplate(template);\n    };\n\n    // Filter Workouts by Time Range\n    const filteredWorkouts = useMemo(() => {\n        if (!selectedTemplate || workouts.length === 0) return [];\n        const now = new Date();\n        const cutoff = new Date();\n        if (timeRange === 'week') cutoff.setDate(now.getDate() - 7);\n        if (timeRange === 'month') cutoff.setMonth(now.getMonth() - 1);\n        if (timeRange === 'year') cutoff.setFullYear(now.getFullYear() - 1);\n        if (timeRange === 'all') cutoff.setFullYear(1900);\n\n        return workouts.filter(w => {\n            const wDate = new Date(w.date);\n            // Must match template exercises (fuzzy check: contains at least one)\n            const matchesTemplate = w.exercises.some(we =>\n                selectedTemplate.exercises.some(te => te.name.toLowerCase() === we.name.toLowerCase())\n            );\n            return wDate >= cutoff && matchesTemplate;\n        }).sort((a, b) => new Date(a.date) - new Date(b.date));\n    }, [workouts, selectedTemplate, timeRange]);\n\n    // Calculate detailed analytics per exercise\n    const exerciseAnalytics = useMemo(() => {\n        if (!selectedTemplate || filteredWorkouts.length === 0) return [];\n\n        return selectedTemplate.exercises.map(templateEx => {\n            const exName = templateEx.name.toLowerCase();\n            const history = [];\n\n            // Extract history for this exercise from filtered workouts\n            filteredWorkouts.forEach(w => {\n                const matchedEx = w.exercises.find(we => we.name.toLowerCase() === exName);\n                if (matchedEx) {\n                    history.push({\n                        date: w.date,\n                        weight: Number(matchedEx.weight) || 0,\n                        sets: Number(matchedEx.sets) || 0,\n                        reps: Number(matchedEx.reps) || 0,\n                        volume: (Number(matchedEx.sets) * Number(matchedEx.reps) * Number(matchedEx.weight)) || 0\n                    });\n                }\n            });\n\n            if (history.length === 0) return null;\n\n            // Comparison: Current (Latest) vs Previous (Second Latest in TOTAL history, not just filtered)\n            // To get accurate \"Previous\", we might need to look beyond the filter. \n            // For simplicity/performance, let's use the last 2 from the current filtered set if available, \n            // OR we'd need a separate lookup. Let's stick to filtered set for visual consistency, \n            // or better: Find the absolute latest stats from ALL workouts for the comparison box.\n\n            // Let's use the `filteredWorkouts` for the Chart, but find the \"Latest vs Previous\" from global workouts for the Stats Card.\n            // ... Actually, users usually compare \"Recent Performance\".\n\n            const latest = history[history.length - 1];\n            const previous = history.length > 1 ? history[history.length - 2] : null;\n\n            const comparison = previous ? {\n                weightDiff: latest.weight - previous.weight,\n                setsDiff: latest.sets - previous.sets,\n                repsDiff: latest.reps - previous.reps,\n                volumeDiff: latest.volume - previous.volume,\n                volumeChange: previous.volume ? ((latest.volume - previous.volume) / previous.volume * 100).toFixed(1) : 0\n            } : null;\n\n            // Chart Data\n            const chartData = {\n                labels: history.map(h => new Date(h.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })),\n                datasets: [{\n                    label: 'Weight',\n                    data: history.map(h => h.weight),\n                    borderColor: '#8b5cf6', // Violet\n                    backgroundColor: 'rgba(139, 92, 246, 0.1)',\n                    fill: true,\n                    tension: 0.4,\n                    pointRadius: 4,\n                    pointHoverRadius: 6\n                }]\n            };\n\n            return {\n                name: templateEx.name,\n                latest,\n                previous,\n                comparison,\n                chartData\n            };\n        }).filter(Boolean);\n    }, [filteredWorkouts, selectedTemplate]);\n\n    // Helper function to create body metric chart data\n    const bodyMetricCharts = useMemo(() => {\n        if (bodyMetrics.length === 0) return [];\n\n        const sortedMetrics = [...bodyMetrics].sort((a, b) => new Date(a.date) - new Date(b.date));\n\n        const charts = [];\n\n        // Weight Chart\n        const weightData = {\n            labels: sortedMetrics.map(m => new Date(m.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })),\n            datasets: [{\n                label: 'Weight (kg)',\n                data: sortedMetrics.map(m => m.weight),\n                borderColor: '#a78bfa',\n                backgroundColor: 'rgba(167, 139, 250, 0.15)',\n                fill: true,\n                tension: 0.4,\n                borderWidth: 3,\n                pointRadius: 6,\n                pointBackgroundColor: '#1e293b',\n                pointBorderColor: '#a78bfa',\n                pointBorderWidth: 3,\n                pointHoverRadius: 8,\n                pointHoverBackgroundColor: '#a78bfa',\n                pointHoverBorderColor: '#fff'\n            }]\n        };\n        charts.push({ name: 'Weight', data: weightData, unit: 'kg' });\n\n        // Body Fat % Chart\n        const bodyFatMetrics = sortedMetrics.filter(m => m.bodyFatPercentage);\n        if (bodyFatMetrics.length > 0) {\n            const bodyFatData = {\n                labels: bodyFatMetrics.map(m => new Date(m.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })),\n                datasets: [{\n                    label: 'Body Fat %',\n                    data: bodyFatMetrics.map(m => m.bodyFatPercentage),\n                    borderColor: '#f472b6',\n                    backgroundColor: 'rgba(244, 114, 182, 0.15)',\n                    fill: true,\n                    tension: 0.4,\n                    borderWidth: 3,\n                    pointRadius: 6,\n                    pointBackgroundColor: '#1e293b',\n                    pointBorderColor: '#f472b6',\n                    pointBorderWidth: 3,\n                    pointHoverRadius: 8,\n                    pointHoverBackgroundColor: '#f472b6',\n                    pointHoverBorderColor: '#fff'\n                }]\n            };\n            charts.push({ name: 'Body Fat', data: bodyFatData, unit: '%' });\n        }\n\n        // Waist Chart\n        const waistMetrics = sortedMetrics.filter(m => m.waist);\n        if (waistMetrics.length > 0) {\n            const waistData = {\n                labels: waistMetrics.map(m => new Date(m.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })),\n                datasets: [{\n                    label: 'Waist (cm)',\n                    data: waistMetrics.map(m => m.waist),\n                    borderColor: '#c084fc',\n                    backgroundColor: 'rgba(192, 132, 252, 0.15)',\n                    fill: true,\n                    tension: 0.4,\n                    borderWidth: 3,\n                    pointRadius: 6,\n                    pointBackgroundColor: '#1e293b',\n                    pointBorderColor: '#c084fc',\n                    pointBorderWidth: 3,\n                    pointHoverRadius: 8,\n                    pointHoverBackgroundColor: '#c084fc',\n                    pointHoverBorderColor: '#fff'\n                }]\n            };\n            charts.push({ name: 'Waist', data: waistData, unit: 'cm' });\n        }\n\n        return charts;\n    }, [bodyMetrics]);\n\n\n    // Animation Variants\n    const containerVariants = { hidden: { opacity: 0 }, visible: { opacity: 1, transition: { staggerChildren: 0.1 } } };\n    const itemVariants = { hidden: { opacity: 0, y: 20 }, visible: { opacity: 1, y: 0 } };\n\n    return (\n        <motion.div className=\"progress-page-enhanced system-ui\" variants={containerVariants} initial=\"hidden\" animate=\"visible\">\n            <header className=\"progress-header\">\n                <div className=\"header-left\">\n                    <BackButton />\n                    <div>\n                        <h2>Performance Analytics</h2>\n                        <p className=\"sub\">Deep dive into your training progress</p>\n                    </div>\n                </div>\n            </header>\n\n            {/* Template Selector Card */}\n            <motion.section className=\"analysis-controls-card\" variants={itemVariants}>\n                <div className=\"control-group\">\n                    <label><FaBullseye /> Select Template</label>\n                    <div className=\"select-wrapper\">\n                        <select\n                            className=\"modern-select\"\n                            value={selectedTemplate?._id || \"\"}\n                            onChange={handleTemplateChange}\n                        >\n                            <option value=\"\" disabled>Choose a template...</option>\n                            {templates.map(t => <option key={t._id} value={t._id}>{t.templateName}</option>)}\n                        </select>\n                    </div>\n                </div>\n\n                {selectedTemplate && (\n                    <div className=\"control-group\">\n                        <label><FaCalendarAlt /> Time Range</label>\n                        <div className=\"time-filters\">\n                            {['week', 'month', 'year', 'all'].map(range => (\n                                <button\n                                    key={range}\n                                    className={`filter-btn ${timeRange === range ? 'active' : ''}`}\n                                    onClick={() => setTimeRange(range)}\n                                >\n                                    {range === 'all' ? 'All Time' : `Last ${range.charAt(0).toUpperCase() + range.slice(1)}`}\n                                </button>\n                            ))}\n                        </div>\n                    </div>\n                )}\n            </motion.section>\n\n            {/* Analytics Grid */}\n            <div className=\"analytics-content\">\n                {selectedTemplate ? (\n                    <motion.div className=\"exercise-analytics-grid\" variants={containerVariants}>\n                        {exerciseAnalytics.length > 0 ? (\n                            exerciseAnalytics.map((item, idx) => {\n                                const isEven = idx % 2 !== 0; // 0=Left(Odd visually), 1=Right(Even visually)\n                                return (\n                                    <motion.div\n                                        key={idx}\n                                        className={`exercise-row ${isEven ? 'right' : 'left'}`}\n                                        initial={{ opacity: 0, x: isEven ? 50 : -50 }}\n                                        whileInView={{ opacity: 1, x: 0 }}\n                                        viewport={{ once: true }}\n                                        transition={{ duration: 0.5, delay: idx * 0.1 }}\n                                    >\n                                        {/* Main Analysis Card */}\n                                        <div className=\"exercise-analysis-card\">\n                                            <div className=\"card-header\">\n                                                <h3>{item.name}</h3>\n                                                <span className=\"badge\">Total Volume: {item.latest.volume}</span>\n                                            </div>\n\n                                            {/* Comparison now in side insight, keeping just current stats or chart here? \n                                                Actually, user said \"beside ... giving some insight\". \n                                                Let's keep the main chart and current stats here, move DIFFs to insight.\n                                            */}\n                                            <div className=\"current-stats-row\">\n                                                <div className=\"stat-pill\">\n                                                    <span className=\"label\">Weight</span>\n                                                    <span className=\"value\">{item.latest.weight}kg</span>\n                                                </div>\n                                                <div className=\"stat-pill\">\n                                                    <span className=\"label\">Sets x Reps</span>\n                                                    <span className=\"value\">{item.latest.sets} x {item.latest.reps}</span>\n                                                </div>\n                                            </div>\n\n                                            {/* Chart */}\n                                            <div className=\"mini-chart-container\">\n                                                <Line\n                                                    data={item.chartData}\n                                                    options={{\n                                                        responsive: true,\n                                                        maintainAspectRatio: false,\n                                                        plugins: {\n                                                            legend: { display: false },\n                                                            tooltip: {\n                                                                backgroundColor: 'rgba(139, 92, 246, 0.9)',\n                                                                titleColor: '#fff',\n                                                                bodyColor: '#fff',\n                                                                padding: 12,\n                                                                cornerRadius: 8,\n                                                                displayColors: false,\n                                                                callbacks: {\n                                                                    label: (context) => ` ${context.parsed.y} kg`\n                                                                }\n                                                            }\n                                                        },\n                                                        scales: {\n                                                            x: { display: false },\n                                                            y: {\n                                                                display: true,\n                                                                grid: { color: 'rgba(138, 43, 226, 0.1)' },\n                                                                ticks: { color: 'rgba(148, 163, 184, 0.8)' }\n                                                            }\n                                                        }\n                                                    }}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Side Insight Card (Fills the gap) */}\n                                        <div className=\"side-insight-card\">\n                                            <h4>Quick Insights</h4>\n                                            {item.comparison ? (\n                                                <div className=\"insight-content\">\n                                                    <div className=\"insight-item\">\n                                                        <span>vs Last Session</span>\n                                                        <div className={`diff-tag ${item.comparison.weightDiff >= 0 ? 'pos' : 'neg'}`}>\n                                                            {item.comparison.weightDiff > 0 ? '+' : ''}{item.comparison.weightDiff}kg\n                                                        </div>\n                                                    </div>\n                                                    <div className=\"insight-item\">\n                                                        <span>Volume Change</span>\n                                                        <div className={`diff-tag ${item.comparison.volumeChange >= 0 ? 'pos' : 'neg'}`}>\n                                                            {item.comparison.volumeChange > 0 ? '+' : ''}{item.comparison.volumeChange}%\n                                                        </div>\n                                                    </div>\n                                                    <p className=\"insight-tip\">\n                                                        {item.comparison.volumeChange > 0\n                                                            ? \"Great progress! You're overloading effectively.\"\n                                                            : \"Keep pushing! Consistency is key.\"}\n                                                    </p>\n                                                </div>\n                                            ) : (\n                                                <p className=\"insight-tip\">Not enough data for insights yet. Keep logging!</p>\n                                            )}\n                                        </div>\n                                    </motion.div>\n                                );\n                            })\n                        ) : (\n                            <div className=\"no-data-msg\">No workouts found for this time range.</div>\n                        )}\n                    </motion.div>\n                ) : (\n                    <motion.div className=\"select-prompt\" variants={itemVariants}>\n                        <FaChartLine size={48} />\n                        <h3>Select a template to view advanced analytics</h3>\n                    </motion.div>\n                )}\n            </div>\n\n            {/* --- BODY METRICS PROGRESS SECTION --- */}\n            {bodyMetricCharts.length > 0 && (\n                <>\n                    <motion.div\n                        className=\"page-title\"\n                        variants={itemVariants}\n                        style={{ marginTop: '3rem' }}\n                    >\n                        <h2>Body Metrics Progress</h2>\n                        <p>Track your physical transformation over time</p>\n                    </motion.div>\n\n                    <motion.div\n                        className=\"charts-grid-enhanced\"\n                        variants={containerVariants}\n                    >\n                        {bodyMetricCharts.map((chart, idx) => (\n                            <motion.div\n                                key={chart.name}\n                                className=\"chart-card-enhanced\"\n                                variants={itemVariants}\n                                whileHover={{ y: -8 }}\n                            >\n                                <div className=\"chart-header\">\n                                    <h3>{chart.name}</h3>\n                                    <div className=\"chart-badge\">{chart.unit}</div>\n                                </div>\n                                {chart.data.labels.length > 0 ? (\n                                    <div className=\"chart-container\">\n                                        <Line\n                                            data={chart.data}\n                                            options={{\n                                                responsive: true,\n                                                maintainAspectRatio: true,\n                                                plugins: {\n                                                    legend: { display: false },\n                                                    tooltip: {\n                                                        backgroundColor: 'rgba(138, 43, 226, 0.8)',\n                                                        padding: 12,\n                                                        borderRadius: 8,\n                                                        titleFont: { size: 12, weight: 'bold' },\n                                                        bodyFont: { size: 11 },\n                                                        callbacks: {\n                                                            label: (context) => ` ${context.parsed.y.toFixed(1)} ${chart.unit}`\n                                                        }\n                                                    }\n                                                },\n                                                scales: {\n                                                    y: {\n                                                        beginAtZero: false,\n                                                        grid: { color: 'rgba(138, 43, 226, 0.1)' },\n                                                        ticks: { color: 'rgba(240, 242, 245, 0.7)' }\n                                                    },\n                                                    x: {\n                                                        grid: { display: false },\n                                                        ticks: { color: 'rgba(240, 242, 245, 0.7)' }\n                                                    }\n                                                }\n                                            }}\n                                        />\n                                    </div>\n                                ) : (\n                                    <div className=\"no-data\">\n                                        <p>ðŸ“Š Log more metrics to see your progression</p>\n                                    </div>\n                                )}\n                            </motion.div>\n                        ))}\n                    </motion.div>\n                </>\n            )}\n        </motion.div>\n    );\n};\n\nexport default ProgressPage;","// frontend/src/components/common/BackButton.js\r\nimport React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { FaArrowLeft } from 'react-icons/fa';\r\nimport './BackButton.css';\r\n\r\nconst BackButton = ({ label = 'Back', className = '' }) => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <motion.button\r\n            className={`back-button-nav ${className}`}\r\n            onClick={() => navigate(-1)}\r\n            whileHover={{ x: -3 }}\r\n            whileTap={{ scale: 0.95 }}\r\n        >\r\n            <FaArrowLeft />\r\n            <span>{label}</span>\r\n        </motion.button>\r\n    );\r\n};\r\n\r\nexport default BackButton;\r\n"],"names":["ChartJS","register","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Filler","ProgressPage","token","useContext","AuthContext","workouts","WorkoutContext","templates","refreshTemplates","TemplateContext","selectedTemplate","setSelectedTemplate","useState","bodyMetrics","setBodyMetrics","timeRange","setTimeRange","useEffect","length","async","res","fetch","headers","ok","json","error","console","fetchMetrics","filteredWorkouts","useMemo","now","Date","cutoff","setDate","getDate","setMonth","getMonth","setFullYear","getFullYear","filter","w","wDate","date","matchesTemplate","exercises","some","we","te","name","toLowerCase","sort","a","b","exerciseAnalytics","map","templateEx","exName","history","forEach","matchedEx","find","push","weight","Number","sets","reps","volume","latest","previous","comparison","weightDiff","setsDiff","repsDiff","volumeDiff","volumeChange","toFixed","chartData","labels","h","toLocaleDateString","month","day","datasets","label","data","borderColor","backgroundColor","fill","tension","pointRadius","pointHoverRadius","Boolean","bodyMetricCharts","sortedMetrics","charts","weightData","m","borderWidth","pointBackgroundColor","pointBorderColor","pointBorderWidth","pointHoverBackgroundColor","pointHoverBorderColor","unit","bodyFatMetrics","bodyFatPercentage","bodyFatData","waistMetrics","waist","waistData","containerVariants","hidden","opacity","visible","transition","staggerChildren","itemVariants","y","_jsxs","motion","div","className","variants","initial","animate","children","_jsx","BackButton","section","FaBullseye","value","_id","onChange","e","template","t","target","disabled","templateName","FaCalendarAlt","range","concat","onClick","charAt","toUpperCase","slice","item","idx","isEven","x","whileInView","viewport","once","duration","delay","Line","options","responsive","maintainAspectRatio","plugins","legend","display","tooltip","titleColor","bodyColor","padding","cornerRadius","displayColors","callbacks","context","parsed","scales","grid","color","ticks","FaChartLine","size","_Fragment","style","marginTop","chart","whileHover","borderRadius","titleFont","bodyFont","beginAtZero","_ref","navigate","useNavigate","button","whileTap","scale","FaArrowLeft"],"sourceRoot":""}