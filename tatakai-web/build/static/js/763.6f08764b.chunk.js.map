{"version":3,"file":"static/js/763.6f08764b.chunk.js","mappings":"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","sources":["components/WorkoutHistory.js","components/BodyMetricHistory.js","components/EditWorkoutModal.js","components/Toast.js","hooks/useToast.js","pages/HistoryPage.js","components/common/BackButton.js"],"sourcesContent":["// frontend/src/components/WorkoutHistory.js\n\nimport React, { useContext, useMemo } from 'react';\nimport { WorkoutContext } from '../context/WorkoutContext';\nimport { TemplateContext } from '../context/TemplateContext';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { FaTrash, FaEdit, FaDownload, FaDumbbell, FaArrowUp, FaArrowDown } from 'react-icons/fa';\nimport './WorkoutHistory.css';\n\nconst WorkoutHistory = ({ filterDate, setFilterDate, onEdit, showToast }) => {\n    const { workouts, loading, deleteWorkout } = useContext(WorkoutContext);\n    const { saveAsTemplate } = useContext(TemplateContext);\n\n    // Get today's date in YYYY-MM-DD format (local timezone)\n    const getLocalToday = () => {\n        const now = new Date();\n        const year = now.getFullYear();\n        const month = String(now.getMonth() + 1).padStart(2, '0');\n        const day = String(now.getDate()).padStart(2, '0');\n        return `${year}-${month}-${day}`;\n    };\n    const today = getLocalToday();\n\n    // Helper function to normalize date to YYYY-MM-DD format\n    // Handles both ISO date strings and simple date strings\n    const normalizeDate = (dateString) => {\n        if (!dateString) return '';\n        const date = new Date(dateString);\n        // If invalid date, return original string (fallback)\n        if (isNaN(date.getTime())) return dateString;\n\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const day = String(date.getDate()).padStart(2, '0');\n        return `${year}-${month}-${day}`;\n    };\n\n    // Calculate progressive overload for each exercise\n    // Returns: { change: number (%), improved: boolean }\n    const calculateProgressiveOverload = useMemo(() => {\n        // Build a map of exercise name -> sorted list of performances\n        const exerciseHistory = {};\n\n        // Sort workouts by date (oldest first)\n        const sortedWorkouts = [...workouts].sort((a, b) =>\n            new Date(a.date) - new Date(b.date)\n        );\n\n        sortedWorkouts.forEach(workout => {\n            if (!workout.exercises) return;\n\n            // Aggregate volume per exercise for this workout\n            // This handles cases where user logs multiple sets as separate entries\n            const sessionAggregates = {};\n\n            workout.exercises.forEach(ex => {\n                const name = ex.name?.toLowerCase().trim();\n                if (!name) return;\n\n                if (!sessionAggregates[name]) {\n                    sessionAggregates[name] = 0;\n                }\n\n                // Calculate volume (sets √ó reps √ó weight)\n                let volume = 0;\n                if (ex.setsData && ex.setsData.length > 0) {\n                    volume = ex.setsData.reduce((acc, s) => {\n                        const w = Number(s.weight) || 0; // if 0 weight, should we count it? \n                        // Logic in backend: \n                        // if weight is 0 (bodyweight), maybe fallback to 1?\n                        // The original logic here was `Number(ex.weight) || 1`.\n                        // Let's stick to `Number(s.weight) || 0` and if total returns 0 (and not empty), maybe apply fallback?\n                        return acc + ((Number(s.reps) || 0) * w);\n                    }, 0);\n\n                    // Fallback for bodyweight exercises if volume is 0\n                    if (volume === 0) {\n                        volume = ex.setsData.reduce((acc, s) => acc + (Number(s.reps) || 0) * 1, 0);\n                    }\n                } else {\n                    const weight = Number(ex.weight) || 1;\n                    volume = (Number(ex.sets) || 0) * (Number(ex.reps) || 0) * weight;\n                }\n                sessionAggregates[name] += volume;\n            });\n\n            // Push the aggregated session stats to history\n            Object.keys(sessionAggregates).forEach(name => {\n                if (!exerciseHistory[name]) {\n                    exerciseHistory[name] = [];\n                }\n                exerciseHistory[name].push({\n                    workoutId: workout._id,\n                    date: workout.date,\n                    volume: sessionAggregates[name]\n                });\n            });\n        });\n\n        // Function to get progressive overload for a specific exercise in a workout\n        return (workoutId, exerciseName) => {\n            const name = exerciseName?.toLowerCase().trim();\n            if (!name || !exerciseHistory[name]) return null;\n\n            const history = exerciseHistory[name];\n            const currentIdx = history.findIndex(h => h.workoutId === workoutId);\n\n            if (currentIdx <= 0) return null; // No previous data\n\n            const current = history[currentIdx];\n            const previous = history[currentIdx - 1];\n\n            if (previous.volume === 0) return null;\n\n            const changePercent = ((current.volume - previous.volume) / previous.volume) * 100;\n\n            return {\n                change: Math.round(changePercent),\n                improved: changePercent > 0,\n                currentVolume: current.volume,\n                previousVolume: previous.volume\n            };\n        };\n    }, [workouts]);\n\n    // Calculate overall workout progressive overload (average of all exercises)\n    const getWorkoutOverallOverload = (workout) => {\n        if (!workout.exercises || workout.exercises.length === 0 || workout.type === 'Cardio') {\n            return null;\n        }\n\n        let totalChange = 0;\n        let validExercises = 0;\n\n        workout.exercises.forEach(ex => {\n            const overload = calculateProgressiveOverload(workout._id, ex.name);\n            if (overload && overload.change !== null) {\n                totalChange += overload.change;\n                validExercises++;\n            }\n        });\n\n        if (validExercises === 0) return null;\n\n        const avgChange = totalChange / validExercises;\n        return {\n            average: Math.round(avgChange),\n            improved: avgChange > 0,\n            exercisesCompared: validExercises,\n            totalExercises: workout.exercises.length\n        };\n    };\n\n    const displayedWorkouts = useMemo(() => {\n        const targetDate = filterDate || today;\n        return workouts.filter(w => normalizeDate(w.date) === targetDate);\n    }, [workouts, filterDate, today]);\n\n    const formatDate = (dateString) => new Date(dateString).toLocaleDateString('en-US', {\n        weekday: 'short',\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n    });\n\n    const handleDelete = async (workoutId) => {\n        const result = await deleteWorkout(workoutId);\n        if (result && result.success) {\n            showToast('Workout deleted successfully!', 'success');\n        } else if (result && !result.success) {\n            showToast('Failed to delete workout.', 'error');\n        }\n    };\n\n    const handleSaveAsTemplate = async (workout) => {\n        const result = await saveAsTemplate(workout);\n        if (result && result.success) {\n            showToast('Template saved successfully!', 'success');\n        } else if (result && !result.success) {\n            showToast(result.error || 'Failed to save template.', 'error');\n        }\n    };\n\n    const containerVariants = {\n        hidden: { opacity: 0 },\n        visible: {\n            opacity: 1,\n            transition: { staggerChildren: 0.1 }\n        }\n    };\n\n    const itemVariants = {\n        hidden: { opacity: 0, x: -20 },\n        visible: { opacity: 1, x: 0, transition: { duration: 0.4 } },\n        exit: { opacity: 0, x: 100, transition: { duration: 0.2 } }\n    };\n\n    if (loading) {\n        return (\n            <div className=\"loading-state\">\n                <div className=\"spinner\"></div>\n                <p>Loading workout history...</p>\n            </div>\n        );\n    }\n\n    return (\n        <motion.div\n            className=\"workout-history-enhanced\"\n            variants={containerVariants}\n            initial=\"hidden\"\n            animate=\"visible\"\n        >\n            <div className=\"history-controls\">\n                <label className=\"date-picker-label\">\n                    <span className=\"icon\">üìÖ</span>\n                    <input\n                        type=\"date\"\n                        value={filterDate}\n                        onChange={(e) => setFilterDate(e.target.value)}\n                        className=\"modern-date-input\"\n                    />\n                </label>\n                {filterDate && (\n                    <button className=\"clear-filter-btn\" onClick={() => setFilterDate('')}>\n                        Show All\n                    </button>\n                )}\n            </div>\n\n            {displayedWorkouts.length === 0 ? (\n                <motion.div\n                    className=\"empty-message\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    transition={{ delay: 0.2 }}\n                >\n                    <FaDumbbell className=\"empty-icon\" />\n                    <p>No workouts logged for this date yet!</p>\n                    <span>Start logging to track your progress</span>\n                </motion.div>\n            ) : (\n                <motion.ul\n                    className=\"workout-list-enhanced\"\n                    variants={containerVariants}\n                >\n                    <AnimatePresence>\n                        {displayedWorkouts.map(workout => {\n                            const workoutOverload = getWorkoutOverallOverload(workout);\n\n                            return (\n                                <motion.li\n                                    key={workout._id}\n                                    className=\"workout-item-enhanced\"\n                                    variants={itemVariants}\n                                    exit=\"exit\"\n                                >\n                                    <div className=\"workout-header\">\n                                        <div className=\"workout-title-section\">\n                                            <h3>{formatDate(workout.date)}</h3>\n                                            <span className=\"workout-type-badge\">{workout.type || 'Workout'}</span>\n                                            {workoutOverload && (\n                                                <span\n                                                    className={`workout-overload-badge ${workoutOverload.improved ? 'improved' : 'declined'}`}\n                                                    title={`${workoutOverload.exercisesCompared}/${workoutOverload.totalExercises} exercises compared`}\n                                                >\n                                                    {workoutOverload.improved ? <FaArrowUp /> : <FaArrowDown />}\n                                                    {Math.abs(workoutOverload.average)}% avg\n                                                </span>\n                                            )}\n                                        </div>\n                                    </div>\n\n                                    {workout.notes && (\n                                        <div className=\"workout-notes-display\">\n                                            <span className=\"note-icon\">üí¨</span>\n                                            <p>{workout.notes}</p>\n                                        </div>\n                                    )}\n\n                                    {workout.exercises && workout.exercises.length > 0 && (\n                                        <motion.div\n                                            className=\"exercise-details-enhanced\"\n                                            initial={{ opacity: 0, height: 0 }}\n                                            animate={{ opacity: 1, height: 'auto' }}\n                                            transition={{ delay: 0.1 }}\n                                        >\n                                            <h4>{workout.type === 'Cardio' ? 'üèÉ Cardio Exercises' : 'üèãÔ∏è Exercises'}</h4>\n                                            <ul className=\"exercises-list\">\n                                                {workout.exercises.map((ex, index) => {\n                                                    const overload = workout.type !== 'Cardio'\n                                                        ? calculateProgressiveOverload(workout._id, ex.name)\n                                                        : null;\n\n                                                    return (\n                                                        <motion.li\n                                                            key={index}\n                                                            className=\"exercise-item\"\n                                                            initial={{ opacity: 0, x: -10 }}\n                                                            animate={{ opacity: 1, x: 0 }}\n                                                            transition={{ delay: 0.1 + index * 0.05 }}\n                                                        >\n                                                            <span className=\"exercise-name\">{ex.name}</span>\n                                                            <span className=\"exercise-stats\">\n                                                                {workout.type === 'Cardio'\n                                                                    ? `${ex.duration || 0} min ‚Ä¢ ${ex.caloriesBurned || 0} cal`\n                                                                    : (ex.setsData && ex.setsData.length > 0)\n                                                                        ? (\n                                                                            <span className=\"sets-detail-list\">\n                                                                                {ex.setsData.map((s, i) => (\n                                                                                    <span key={i} className=\"set-tag\">\n                                                                                        {s.reps || 0}x{s.weight || 0}kg{i < ex.setsData.length - 1 ? ', ' : ''}\n                                                                                    </span>\n                                                                                ))}\n                                                                            </span>\n                                                                        )\n                                                                        : `${ex.sets || 0} sets √ó ${ex.reps || 0} reps @ ${ex.weight || 0}kg`\n                                                                }\n                                                            </span>\n                                                            {overload && (\n                                                                <span\n                                                                    className={`progressive-overload ${overload.improved ? 'improved' : 'declined'}`}\n                                                                    title={`Volume: ${overload.currentVolume} vs ${overload.previousVolume} (previous)`}\n                                                                >\n                                                                    {overload.improved ? <FaArrowUp /> : <FaArrowDown />}\n                                                                    {Math.abs(overload.change)}%\n                                                                </span>\n                                                            )}\n                                                        </motion.li>\n                                                    );\n                                                })}\n                                            </ul>\n                                        </motion.div>\n                                    )}\n\n                                    <motion.div\n                                        className=\"workout-actions-enhanced\"\n                                        initial={{ opacity: 0 }}\n                                        animate={{ opacity: 1 }}\n                                        transition={{ delay: 0.2 }}\n                                    >\n                                        <motion.button\n                                            className=\"action-button edit-button-enhanced\"\n                                            onClick={() => onEdit(workout)}\n                                            whileHover={{ scale: 1.05 }}\n                                            whileTap={{ scale: 0.95 }}\n                                            title=\"Edit Workout\"\n                                        >\n                                            <FaEdit /> Edit\n                                        </motion.button>\n                                        <motion.button\n                                            className=\"action-button template-button-enhanced\"\n                                            onClick={() => handleSaveAsTemplate(workout)}\n                                            whileHover={{ scale: 1.05 }}\n                                            whileTap={{ scale: 0.95 }}\n                                            title=\"Save as Template\"\n                                        >\n                                            <FaDownload /> Template\n                                        </motion.button>\n                                        <motion.button\n                                            className=\"action-button delete-button-enhanced\"\n                                            onClick={() => handleDelete(workout._id)}\n                                            whileHover={{ scale: 1.05 }}\n                                            whileTap={{ scale: 0.95 }}\n                                            title=\"Delete Workout\"\n                                        >\n                                            <FaTrash /> Delete\n                                        </motion.button>\n                                    </motion.div>\n                                </motion.li>\n                            );\n                        })}\n                    </AnimatePresence>\n                </motion.ul>\n            )}\n        </motion.div>\n    );\n};\n\nexport default WorkoutHistory;","// frontend/src/components/BodyMetricHistory.js\n\nimport React from 'react';\n\nconst BodyMetricHistory = ({ metrics }) => {\n    const formatDate = (dateString) => new Date(dateString).toLocaleDateString();\n\n    return (\n        <div className=\"metric-history\">\n            <h3>Metrics History</h3>\n            {metrics.length === 0 ? (\n                <p>No metrics logged yet.</p>\n            ) : (\n                <ul className=\"metric-list\">\n                    {metrics.map((metric) => (\n                        <li key={metric._id} className=\"metric-item\">\n                            <strong>{formatDate(metric.date)}</strong>\n                            <div>Weight: {metric.weight} kg</div>\n                            {metric.bodyFatPercentage && <div>Body Fat: {metric.bodyFatPercentage}%</div>}\n                            {metric.waist && <div>Waist: {metric.waist} cm</div>}\n                        </li>\n                    ))}\n                </ul>\n            )}\n        </div>\n    );\n};\n\nexport default BodyMetricHistory;","// frontend/src/components/EditWorkoutModal.js\n\nimport React, { useState, useContext } from 'react';\nimport { WorkoutContext } from '../context/WorkoutContext';\nimport { motion } from 'framer-motion';\nimport { FaCalendar, FaDumbbell, FaClock, FaStickyNote, FaPlus, FaTimes } from 'react-icons/fa';\nimport './EditWorkoutModal.css';\n\nconst EditWorkoutModal = ({ workout, onClose, showToast }) => {\n    const { updateWorkout } = useContext(WorkoutContext);\n\n    const [workoutData, setWorkoutData] = useState({\n        date: new Date(workout.date).toISOString().slice(0, 10),\n        type: workout.type,\n        duration: workout.duration,\n        notes: workout.notes || '',\n    });\n    const [exercises, setExercises] = useState(JSON.parse(JSON.stringify(workout.exercises)));\n    const [isSubmitting, setIsSubmitting] = useState(false);\n\n    const handleWorkoutChange = (e) => setWorkoutData({ ...workoutData, [e.target.name]: e.target.value });\n\n    const handleExerciseChange = (index, e) => {\n        const updated = exercises.map((ex, i) => i === index ? { ...ex, [e.target.name]: e.target.value } : ex);\n        setExercises(updated);\n    };\n\n    const addExercise = () => setExercises([...exercises, { name: '', sets: 3, reps: 10, weight: 10 }]);\n\n    const removeExercise = (index) => {\n        if (exercises.length > 1) setExercises(exercises.filter((_, i) => i !== index));\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setIsSubmitting(true);\n\n        const finalData = { ...workoutData, exercises };\n        const result = await updateWorkout(workout._id, finalData);\n\n        if (result.success) {\n            showToast('Workout updated successfully!', 'success');\n            onClose();\n        } else {\n            showToast('Failed to update workout. Please try again.', 'error');\n        }\n        setIsSubmitting(false);\n    };\n\n    return (\n        <motion.div\n            className=\"modal-backdrop\"\n            onClick={onClose}\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n        >\n            <motion.div\n                className=\"modal-content\"\n                onClick={e => e.stopPropagation()}\n                initial={{ scale: 0.9, y: 20 }}\n                animate={{ scale: 1, y: 0 }}\n                exit={{ scale: 0.9, y: 20 }}\n            >\n                <h2>‚úèÔ∏è Edit Workout</h2>\n                <form onSubmit={handleSubmit} className=\"workout-logger-form\">\n                    <div className=\"form-grid\">\n                        <div className=\"form-field\">\n                            <label><FaCalendar /> Date</label>\n                            <input\n                                type=\"date\"\n                                name=\"date\"\n                                className=\"form-input\"\n                                value={workoutData.date}\n                                onChange={handleWorkoutChange}\n                                required\n                            />\n                        </div>\n                        <div className=\"form-field\">\n                            <label><FaDumbbell /> Type</label>\n                            <select\n                                name=\"type\"\n                                className=\"form-select\"\n                                value={workoutData.type}\n                                onChange={handleWorkoutChange}\n                            >\n                                <option value=\"Strength Training\">Strength Training</option>\n                                <option value=\"Cardio\">Cardio</option>\n                                <option value=\"Other\">Other</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <div className=\"form-field\">\n                        <label><FaClock /> Duration (minutes)</label>\n                        <input\n                            type=\"number\"\n                            name=\"duration\"\n                            className=\"form-input\"\n                            placeholder=\"Duration (mins)\"\n                            value={workoutData.duration}\n                            onChange={handleWorkoutChange}\n                            min=\"1\"\n                            required\n                        />\n                    </div>\n\n                    <div className=\"form-field\">\n                        <label><FaStickyNote /> Notes</label>\n                        <textarea\n                            name=\"notes\"\n                            className=\"form-textarea\"\n                            placeholder=\"Add any notes about your workout...\"\n                            value={workoutData.notes}\n                            onChange={handleWorkoutChange}\n                        ></textarea>\n                    </div>\n\n                    <div className=\"exercises-list-container\">\n                        <h4>üèãÔ∏è Exercises</h4>\n                        {exercises.map((exercise, index) => (\n                            <motion.div\n                                key={index}\n                                className=\"exercise-grid\"\n                                initial={{ opacity: 0, x: -20 }}\n                                animate={{ opacity: 1, x: 0 }}\n                                transition={{ delay: index * 0.05 }}\n                            >\n                                <input\n                                    type=\"text\"\n                                    name=\"name\"\n                                    className=\"form-input\"\n                                    placeholder=\"Exercise Name\"\n                                    value={exercise.name}\n                                    onChange={(e) => handleExerciseChange(index, e)}\n                                    required\n                                />\n                                <input\n                                    type=\"number\"\n                                    name=\"sets\"\n                                    className=\"form-input\"\n                                    placeholder=\"Sets\"\n                                    value={exercise.sets}\n                                    onChange={(e) => handleExerciseChange(index, e)}\n                                    min=\"1\"\n                                />\n                                <input\n                                    type=\"number\"\n                                    name=\"reps\"\n                                    className=\"form-input\"\n                                    placeholder=\"Reps\"\n                                    value={exercise.reps}\n                                    onChange={(e) => handleExerciseChange(index, e)}\n                                    min=\"1\"\n                                />\n                                <input\n                                    type=\"number\"\n                                    name=\"weight\"\n                                    className=\"form-input\"\n                                    placeholder=\"Weight (kg)\"\n                                    value={exercise.weight}\n                                    onChange={(e) => handleExerciseChange(index, e)}\n                                    min=\"0\"\n                                />\n                                <button\n                                    type=\"button\"\n                                    className=\"remove-exercise-btn\"\n                                    onClick={() => removeExercise(index)}\n                                    title=\"Remove exercise\"\n                                >\n                                    <FaTimes />\n                                </button>\n                            </motion.div>\n                        ))}\n                        <motion.button\n                            type=\"button\"\n                            className=\"system-button btn-secondary\"\n                            onClick={addExercise}\n                            whileHover={{ scale: 1.02 }}\n                            whileTap={{ scale: 0.98 }}\n                        >\n                            <FaPlus /> Add Exercise\n                        </motion.button>\n                    </div>\n\n                    <div className=\"modal-actions\">\n                        <motion.button\n                            type=\"button\"\n                            className=\"system-button btn-secondary\"\n                            onClick={onClose}\n                            whileHover={{ scale: 1.02 }}\n                            whileTap={{ scale: 0.98 }}\n                        >\n                            Cancel\n                        </motion.button>\n                        <motion.button\n                            type=\"submit\"\n                            className=\"system-button btn-primary\"\n                            disabled={isSubmitting}\n                            whileHover={{ scale: 1.02 }}\n                            whileTap={{ scale: 0.98 }}\n                        >\n                            {isSubmitting ? 'Saving...' : 'Save Changes'}\n                        </motion.button>\n                    </div>\n                </form>\n            </motion.div>\n        </motion.div>\n    );\n};\n\nexport default EditWorkoutModal;","// frontend/src/components/Toast.js\nimport React, { useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { FaCheckCircle, FaExclamationCircle, FaInfoCircle, FaTimes } from 'react-icons/fa';\nimport './Toast.css';\n\nconst Toast = ({ message, type = 'success', onClose, duration = 3000 }) => {\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            onClose();\n        }, duration);\n        return () => clearTimeout(timer);\n    }, [duration, onClose]);\n\n    const icons = {\n        success: <FaCheckCircle />,\n        error: <FaExclamationCircle />,\n        info: <FaInfoCircle />\n    };\n\n    return (\n        <motion.div\n            className={`toast toast-${type}`}\n            initial={{ opacity: 0, y: -50, scale: 0.3 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.5, transition: { duration: 0.2 } }}\n        >\n            <div className=\"toast-icon\">{icons[type]}</div>\n            <div className=\"toast-message\">{message}</div>\n            <button className=\"toast-close\" onClick={onClose}>\n                <FaTimes />\n            </button>\n        </motion.div>\n    );\n};\n\nexport const ToastContainer = ({ toasts, removeToast }) => {\n    return (\n        <div className=\"toast-container\">\n            <AnimatePresence>\n                {toasts.map(toast => (\n                    <Toast\n                        key={toast.id}\n                        message={toast.message}\n                        type={toast.type}\n                        onClose={() => removeToast(toast.id)}\n                        duration={toast.duration}\n                    />\n                ))}\n            </AnimatePresence>\n        </div>\n    );\n};\n\nexport default Toast;\n","// frontend/src/hooks/useToast.js\nimport { useState, useCallback } from 'react';\n\nlet toastId = 0;\n\nexport const useToast = () => {\n    const [toasts, setToasts] = useState([]);\n\n    const addToast = useCallback((message, type = 'success', duration = 3000) => {\n        const id = toastId++;\n        setToasts(prev => [...prev, { id, message, type, duration }]);\n    }, []);\n\n    const removeToast = useCallback((id) => {\n        setToasts(prev => prev.filter(toast => toast.id !== id));\n    }, []);\n\n    return { toasts, addToast, removeToast };\n};\n\nexport default useToast;\n","// frontend/src/pages/HistoryPage.js\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport WorkoutHistory from '../components/WorkoutHistory';\nimport BodyMetricHistory from '../components/BodyMetricHistory';\nimport EditWorkoutModal from '../components/EditWorkoutModal';\nimport { ToastContainer } from '../components/Toast';\nimport useToast from '../hooks/useToast';\nimport BackButton from '../components/common/BackButton';\nimport './HistoryPage.css';\n\nconst HistoryPage = () => {\n    const { token } = useContext(AuthContext);\n    const [metrics, setMetrics] = useState([]);\n    const [filterDate, setFilterDate] = useState('');\n    const { toasts, addToast, removeToast } = useToast();\n\n    // State for the modal\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [editingWorkout, setEditingWorkout] = useState(null);\n\n    const handleOpenEditModal = (workout) => {\n        setEditingWorkout(workout);\n        setIsModalOpen(true);\n    };\n\n    const handleCloseModal = () => {\n        setEditingWorkout(null);\n        setIsModalOpen(false);\n    };\n\n    useEffect(() => {\n        const fetchMetrics = async () => {\n            if (!token) return;\n            try {\n                const response = await fetch('/api/metrics?limit=100', {\n                    headers: { 'x-auth-token': token },\n                });\n                if (response.ok) {\n                    const data = await response.json();\n                    setMetrics(data);\n                }\n            } catch (error) {\n                console.error('Failed to fetch metrics:', error);\n            }\n        };\n        fetchMetrics();\n    }, [token]);\n\n    // Helper function to normalize date to YYYY-MM-DD format\n    const normalizeDate = (dateString) => {\n        const date = new Date(dateString);\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const day = String(date.getDate()).padStart(2, '0');\n        return `${year}-${month}-${day}`;\n    };\n\n    const displayedMetrics = filterDate\n        ? metrics.filter(m => normalizeDate(m.date) === filterDate)\n        : metrics.slice(0, 1);\n\n    return (\n        <div>\n            <ToastContainer toasts={toasts} removeToast={removeToast} />\n\n            <div className=\"history-page-header\" style={{ marginBottom: '1rem' }}>\n                <BackButton />\n                <h2>History & Logs</h2>\n            </div>\n            <div className=\"history-grid-container\">\n                <div className=\"history-section\">\n                    <h3>Workout History</h3>\n                    <WorkoutHistory\n                        filterDate={filterDate}\n                        setFilterDate={setFilterDate}\n                        onEdit={handleOpenEditModal}\n                        showToast={addToast}\n                    />\n                </div>\n                <div className=\"history-section\">\n                    <h3>Body Metric History</h3>\n                    <BodyMetricHistory metrics={displayedMetrics} />\n                </div>\n            </div>\n\n            {isModalOpen && (\n                <EditWorkoutModal\n                    workout={editingWorkout}\n                    onClose={handleCloseModal}\n                    showToast={addToast}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default HistoryPage;","// frontend/src/components/common/BackButton.js\r\nimport React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { FaArrowLeft } from 'react-icons/fa';\r\nimport './BackButton.css';\r\n\r\nconst BackButton = ({ label = 'Back', className = '' }) => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <motion.button\r\n            className={`back-button-nav ${className}`}\r\n            onClick={() => navigate(-1)}\r\n            whileHover={{ x: -3 }}\r\n            whileTap={{ scale: 0.95 }}\r\n        >\r\n            <FaArrowLeft />\r\n            <span>{label}</span>\r\n        </motion.button>\r\n    );\r\n};\r\n\r\nexport default BackButton;\r\n"],"names":["_ref","filterDate","setFilterDate","onEdit","showToast","workouts","loading","deleteWorkout","useContext","WorkoutContext","saveAsTemplate","TemplateContext","today","getLocalToday","now","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","concat","calculateProgressiveOverload","useMemo","exerciseHistory","sort","a","b","date","forEach","workout","exercises","sessionAggregates","ex","_ex$name","name","toLowerCase","trim","volume","setsData","length","reduce","acc","s","w","Number","weight","reps","sets","Object","keys","push","workoutId","_id","exerciseName","history","currentIdx","findIndex","h","current","previous","changePercent","change","Math","round","improved","currentVolume","previousVolume","displayedWorkouts","targetDate","filter","dateString","isNaN","getTime","normalizeDate","containerVariants","hidden","opacity","visible","transition","staggerChildren","itemVariants","x","duration","exit","_jsxs","className","children","_jsx","motion","div","variants","initial","animate","type","value","onChange","e","target","onClick","delay","FaDumbbell","ul","AnimatePresence","map","workoutOverload","totalChange","validExercises","overload","avgChange","average","exercisesCompared","totalExercises","getWorkoutOverallOverload","li","toLocaleDateString","weekday","title","FaArrowUp","FaArrowDown","abs","notes","height","index","caloriesBurned","i","button","whileHover","scale","whileTap","FaEdit","async","result","success","error","handleSaveAsTemplate","FaDownload","handleDelete","FaTrash","metrics","metric","bodyFatPercentage","waist","onClose","updateWorkout","workoutData","setWorkoutData","useState","toISOString","slice","setExercises","JSON","parse","stringify","isSubmitting","setIsSubmitting","handleWorkoutChange","_objectSpread","handleExerciseChange","updated","stopPropagation","y","onSubmit","preventDefault","finalData","FaCalendar","required","FaClock","placeholder","min","FaStickyNote","exercise","_","removeExercise","FaTimes","addExercise","FaPlus","disabled","Toast","message","useEffect","timer","setTimeout","clearTimeout","icons","FaCheckCircle","FaExclamationCircle","info","FaInfoCircle","ToastContainer","_ref2","toasts","removeToast","toast","id","toastId","useToast","setToasts","addToast","useCallback","arguments","undefined","prev","HistoryPage","token","AuthContext","setMetrics","isModalOpen","setIsModalOpen","editingWorkout","setEditingWorkout","response","fetch","headers","ok","data","json","console","fetchMetrics","displayedMetrics","m","style","marginBottom","BackButton","WorkoutHistory","BodyMetricHistory","EditWorkoutModal","handleCloseModal","label","navigate","useNavigate","FaArrowLeft"],"sourceRoot":""}