"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[84],{6801:(e,s,a)=>{a.d(s,{A:()=>o});a(5043);var t=a(9981),i=a(6446),r=a(184),n=a(579);const o=e=>{let{label:s="Back",className:a=""}=e;const o=(0,t.Zp)();return(0,n.jsxs)(i.P.button,{className:"back-button-nav ".concat(a),onClick:()=>o(-1),whileHover:{x:-3},whileTap:{scale:.95},children:[(0,n.jsx)(r.QVr,{}),(0,n.jsx)("span",{children:s})]})}},9084:(e,s,a)=>{a.r(s),a.d(s,{default:()=>k});var t=a(5043),i=a(3986),r=a(9379),n=a(7304);const o=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],l="label";function c(e,s){"function"===typeof e?e(s):e&&(e.current=s)}function d(e,s){e.labels=s}function h(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;const t=[];e.datasets=s.map(s=>{const i=e.datasets.find(e=>e[a]===s[a]);return i&&s.data&&!t.includes(i)?(t.push(i),Object.assign(i,s),i):(0,r.A)({},s)})}function u(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;const a={labels:[],datasets:[]};return d(a,e.labels),h(a,e.datasets,s),a}function m(e,s){const{height:a=150,width:l=300,redraw:m=!1,datasetIdKey:p,type:g,data:f,options:x,plugins:b=[],fallbackContent:v,updateMode:j}=e,y=(0,i.A)(e,o),N=(0,t.useRef)(null),C=(0,t.useRef)(null),w=()=>{N.current&&(C.current=new n.t1(N.current,{type:g,data:u(f,p),options:x&&(0,r.A)({},x),plugins:b}),c(s,C.current))},k=()=>{c(s,null),C.current&&(C.current.destroy(),C.current=null)};return(0,t.useEffect)(()=>{!m&&C.current&&x&&function(e,s){const a=e.options;a&&s&&Object.assign(a,s)}(C.current,x)},[m,x]),(0,t.useEffect)(()=>{!m&&C.current&&d(C.current.config.data,f.labels)},[m,f.labels]),(0,t.useEffect)(()=>{!m&&C.current&&f.datasets&&h(C.current.config.data,f.datasets,p)},[m,f.datasets]),(0,t.useEffect)(()=>{C.current&&(m?(k(),setTimeout(w)):C.current.update(j))},[m,x,f.labels,f.datasets,j]),(0,t.useEffect)(()=>{C.current&&(k(),setTimeout(w))},[g]),(0,t.useEffect)(()=>(w(),()=>k()),[]),t.createElement("canvas",(0,r.A)({ref:N,role:"img",height:a,width:l},y),v)}const p=(0,t.forwardRef)(m);function g(e,s){return n.t1.register(s),(0,t.forwardRef)((s,a)=>t.createElement(p,(0,r.A)((0,r.A)({},s),{},{ref:a,type:e})))}const f=g("line",n.ZT);var x=a(697),b=a(2524),v=a(8109),j=a(6446),y=a(184),N=a(6801),C=a(9778),w=a(579);n.t1.register(n.PP,n.kc,n.FN,n.No,n.hE,n.m_,n.s$,n.dN);const k=()=>{const{token:e}=(0,t.useContext)(x.c),{workouts:s,fetchWorkouts:a}=(0,t.useContext)(b.Z),{templates:i,refreshTemplates:r}=(0,t.useContext)(v.m),[n,o]=(0,t.useState)(null),[l,c]=(0,t.useState)([]),[d,h]=(0,t.useState)("month");(0,t.useEffect)(()=>{e&&a()},[e,a]),(0,t.useEffect)(()=>{0===i.length&&e&&r()},[i.length,e,r]),(0,t.useEffect)(()=>{(async()=>{if(e)try{const e=await C.A.get("/api/metrics");c(e.data)}catch(s){console.error("Failed to fetch metrics:",s)}})()},[e]);const u=(0,t.useMemo)(()=>{if(!n||0===s.length)return[];const e=new Date,a=new Date;return"week"===d&&a.setDate(e.getDate()-7),"month"===d&&a.setMonth(e.getMonth()-1),"year"===d&&a.setFullYear(e.getFullYear()-1),"all"===d&&a.setFullYear(1900),s.filter(e=>{const s=new Date(e.date),t=e.exercises.some(e=>n.exercises.some(s=>s.name.toLowerCase()===e.name.toLowerCase()));return s>=a&&t}).sort((e,s)=>new Date(e.date)-new Date(s.date))},[s,n,d]),m=(0,t.useMemo)(()=>n&&0!==u.length?n.exercises.map(e=>{const s=e.name.toLowerCase(),a=[];if(u.forEach(e=>{const t=e.exercises.filter(e=>e.name.toLowerCase()===s);if(t.length>0){const s=Math.max(...t.map(e=>Number(e.weight)||0)),i=t.reduce((e,s)=>e+(Number(s.weight)||0)*(Number(s.sets)||1)*(Number(s.reps)||0),0),r=t.reduce((e,s)=>e+(Number(s.sets)||0),0),n=t.reduce((e,s)=>e+(Number(s.sets)||1)*(Number(s.reps)||0),0);a.push({date:e.date,weight:s,sets:r,reps:n,volume:i})}}),0===a.length)return null;const t=a[a.length-1],i=a.length>1?a[a.length-2]:null,r=i?{weightDiff:t.weight-i.weight,setsDiff:t.sets-i.sets,repsDiff:t.reps-i.reps,volumeDiff:t.volume-i.volume,volumeChange:i.volume?((t.volume-i.volume)/i.volume*100).toFixed(1):0}:null,n={labels:a.map(e=>new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Weight",data:a.map(e=>e.weight),borderColor:"#6423C2",backgroundColor:"rgba(100, 35, 194, 0.1)",fill:!0,tension:.4,pointRadius:4,pointHoverRadius:6}]};return{name:e.name,latest:t,previous:i,comparison:r,chartData:n,history:a}}).filter(Boolean):[],[u,n]),p=(0,t.useMemo)(()=>{if(0===l.length)return[];const e=[...l].sort((e,s)=>new Date(e.date)-new Date(s.date)),s=[],a={labels:e.map(e=>new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Weight (kg)",data:e.map(e=>e.weight),borderColor:"#6423C2",backgroundColor:"rgba(100, 35, 194, 0.15)",fill:!0,tension:.4,borderWidth:3,pointRadius:6,pointBackgroundColor:"#1e293b",pointBorderColor:"#6423C2",pointBorderWidth:3,pointHoverRadius:8,pointHoverBackgroundColor:"#6423C2",pointHoverBorderColor:"#fff"}]};s.push({name:"Weight",data:a,unit:"kg"});const t=e.filter(e=>e.bodyFatPercentage);if(t.length>0){const e={labels:t.map(e=>new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Body Fat %",data:t.map(e=>e.bodyFatPercentage),borderColor:"#f472b6",backgroundColor:"rgba(244, 114, 182, 0.15)",fill:!0,tension:.4,borderWidth:3,pointRadius:6,pointBackgroundColor:"#1e293b",pointBorderColor:"#f472b6",pointBorderWidth:3,pointHoverRadius:8,pointHoverBackgroundColor:"#f472b6",pointHoverBorderColor:"#fff"}]};s.push({name:"Body Fat",data:e,unit:"%"})}const i=e.filter(e=>e.waist);if(i.length>0){const e={labels:i.map(e=>new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Waist (cm)",data:i.map(e=>e.waist),borderColor:"#6423C2",backgroundColor:"rgba(100, 35, 194, 0.15)",fill:!0,tension:.4,borderWidth:3,pointRadius:6,pointBackgroundColor:"#1e293b",pointBorderColor:"#6423C2",pointBorderWidth:3,pointHoverRadius:8,pointHoverBackgroundColor:"#6423C2",pointHoverBorderColor:"#fff"}]};s.push({name:"Waist",data:e,unit:"cm"})}return s},[l]),g={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return(0,w.jsxs)(j.P.div,{className:"progress-page-enhanced system-ui",variants:g,initial:"hidden",animate:"visible",children:[(0,w.jsx)("header",{className:"progress-header",children:(0,w.jsxs)("div",{className:"header-left",children:[(0,w.jsx)(N.A,{}),(0,w.jsxs)("div",{children:[(0,w.jsx)("h2",{children:"Performance Analytics"}),(0,w.jsx)("p",{className:"sub",children:"Deep dive into your training progress"})]})]})}),(0,w.jsxs)(j.P.section,{className:"analysis-controls-card",variants:k,children:[(0,w.jsxs)("div",{className:"control-group",children:[(0,w.jsxs)("label",{children:[(0,w.jsx)(y.RBv,{})," Select Template"]}),(0,w.jsx)("div",{className:"select-wrapper",children:(0,w.jsxs)("select",{className:"modern-select",value:(null===n||void 0===n?void 0:n._id)||"",onChange:e=>{const s=i.find(s=>s._id===e.target.value);o(s)},children:[(0,w.jsx)("option",{value:"",disabled:!0,children:"Choose a template..."}),i.map(e=>(0,w.jsx)("option",{value:e._id,children:e.templateName},e._id))]})})]}),n&&(0,w.jsxs)("div",{className:"control-group",children:[(0,w.jsxs)("label",{children:[(0,w.jsx)(y.bfZ,{})," Time Range"]}),(0,w.jsx)("div",{className:"time-filters",children:["week","month","year","all"].map(e=>(0,w.jsx)("button",{className:"filter-btn ".concat(d===e?"active":""),onClick:()=>h(e),children:"all"===e?"All Time":"Last ".concat(e.charAt(0).toUpperCase()+e.slice(1))},e))})]})]}),(0,w.jsx)("div",{className:"analytics-content",children:n?(0,w.jsx)(j.P.div,{className:"exercise-analytics-grid",variants:g,children:m.length>0?m.map((e,s)=>{const a=s%2!==0;return(0,w.jsxs)(j.P.div,{className:"exercise-row ".concat(a?"right":"left"),initial:{opacity:0,x:a?50:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5,delay:.1*s},children:[(0,w.jsxs)("div",{className:"exercise-analysis-card glass-panel",children:[(0,w.jsxs)("div",{className:"card-header-row",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h3",{children:e.name}),(0,w.jsxs)("span",{className:"subtitle-date",children:["Last: ",new Date(e.latest.date).toLocaleDateString()]})]}),(0,w.jsxs)("div",{className:"header-badges",children:[(0,w.jsxs)("div",{className:"metric-badge volume",children:[(0,w.jsx)("span",{className:"label",children:"Vol"}),(0,w.jsx)("span",{className:"val",children:e.latest.volume})]}),(0,w.jsxs)("div",{className:"metric-badge weight",children:[(0,w.jsx)("span",{className:"label",children:"Max"}),(0,w.jsxs)("span",{className:"val",children:[e.latest.weight,"kg"]})]})]})]}),(0,w.jsxs)("div",{className:"current-stats-grid",children:[(0,w.jsxs)("div",{className:"stat-box",children:[(0,w.jsx)("span",{className:"kpi-label",children:"Sets"}),(0,w.jsx)("span",{className:"kpi-value",children:e.latest.sets})]}),(0,w.jsxs)("div",{className:"stat-box",children:[(0,w.jsx)("span",{className:"kpi-label",children:"Avg Reps"}),(0,w.jsx)("span",{className:"kpi-value",children:Math.round(e.latest.reps/(e.latest.sets||1))})]}),(0,w.jsxs)("div",{className:"stat-box highlight",children:[(0,w.jsx)("span",{className:"kpi-label",children:"Volume"}),(0,w.jsx)("span",{className:"kpi-value",children:e.latest.volume})]})]}),(0,w.jsx)("div",{className:"advanced-chart-container",children:(0,w.jsx)(f,{data:{labels:e.chartData.labels,datasets:[{label:"Total Volume",data:e.history.map(e=>e.volume),borderColor:"#6423C2",backgroundColor:e=>{const s=e.chart.ctx.createLinearGradient(0,0,0,400);return s.addColorStop(0,"rgba(100, 35, 194, 0.5)"),s.addColorStop(1,"rgba(100, 35, 194, 0.0)"),s},fill:!0,yAxisID:"y1",tension:.4,pointRadius:4,pointHoverRadius:8},{label:"Max Weight",data:e.history.map(e=>e.weight),borderColor:"#22d3ee",backgroundColor:"rgba(34, 211, 238, 0.1)",borderDash:[5,5],yAxisID:"y2",tension:.2,pointRadius:3,pointHoverRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,labels:{color:"#e2e8f0",usePointStyle:!0}},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",titleColor:"#fff",bodyColor:"#cbd5e1",borderColor:"#334155",borderWidth:1,padding:10,callbacks:{label:e=>" ".concat(e.dataset.label,": ").concat(e.parsed.y)}}},scales:{x:{display:!1,grid:{display:!1}},y1:{type:"linear",display:!0,position:"left",grid:{color:"rgba(148, 163, 184, 0.1)"},ticks:{color:"#6423C2"},title:{display:!0,text:"Volume",color:"#6423C2",font:{size:10}}},y2:{type:"linear",display:!0,position:"right",grid:{display:!1},ticks:{color:"#22d3ee"},title:{display:!0,text:"Weight (kg)",color:"#22d3ee",font:{size:10}}}}}})})]}),(0,w.jsxs)("div",{className:"side-insight-card glow-border",children:[(0,w.jsxs)("div",{className:"insight-header",children:[(0,w.jsx)(y.FD8,{className:"insight-icon"}),(0,w.jsx)("h4",{children:"Performance Analysis"})]}),e.comparison?(0,w.jsxs)("div",{className:"insight-body",children:[(0,w.jsxs)("div",{className:"insight-row primary",children:[(0,w.jsx)("span",{children:"VS Last Session (Volume)"}),(0,w.jsxs)("div",{className:"diff-tag large ".concat(e.comparison.volumeChange>=0?"pos":"neg"),children:[e.comparison.volumeChange>0?"\u25b2":"\u25bc"," ",Math.abs(e.comparison.volumeChange),"%"]})]}),(0,w.jsxs)("div",{className:"insight-details",children:[(0,w.jsxs)("div",{className:"detail-item",children:[(0,w.jsx)("span",{children:"Volume Diff"}),(0,w.jsxs)("strong",{className:e.comparison.volumeDiff>=0?"text-success":"text-danger",children:[e.comparison.volumeDiff>0?"+":"",e.comparison.volumeDiff]})]}),(0,w.jsxs)("div",{className:"detail-item",children:[(0,w.jsx)("span",{children:"Weight Diff"}),(0,w.jsxs)("strong",{className:e.comparison.weightDiff>=0?"text-cyan":"text-danger",children:[e.comparison.weightDiff>0?"+":"",e.comparison.weightDiff,"kg"]})]})]}),(0,w.jsx)("div",{className:"insight-verdict",children:e.comparison.volumeChange>5?(0,w.jsxs)("p",{children:["\ud83d\ude80 ",(0,w.jsx)("strong",{children:"Significant Overload!"})," Your total workload increased nicely. Keep this intensity!"]}):e.comparison.volumeChange<-5?(0,w.jsxs)("p",{children:["\ud83d\udcc9 ",(0,w.jsx)("strong",{children:"Volume Drop."})," De-load or just a lighter day? Rest up!"]}):(0,w.jsxs)("p",{children:["\u2696\ufe0f ",(0,w.jsx)("strong",{children:"Sustained Effort."})," Consistency builds muscle. Good hold."]})})]}):(0,w.jsx)("div",{className:"insight-body empty",children:(0,w.jsx)("p",{children:"Keep logging to unlock progressive analysis!"})})]})]},s)}):(0,w.jsx)("div",{className:"no-data-msg",children:"No workouts found for this time range."})}):(0,w.jsxs)(j.P.div,{className:"select-prompt",variants:k,children:[(0,w.jsx)(y.YYR,{size:48}),(0,w.jsx)("h3",{children:"Select a template to view advanced analytics"})]})}),p.length>0&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(j.P.div,{className:"page-title",variants:k,style:{marginTop:"3rem"},children:[(0,w.jsx)("h2",{children:"Body Metrics Progress"}),(0,w.jsx)("p",{children:"Track your physical transformation over time"})]}),(0,w.jsx)(j.P.div,{className:"charts-grid-enhanced",variants:g,children:p.map((e,s)=>(0,w.jsxs)(j.P.div,{className:"chart-card-enhanced",variants:k,whileHover:{y:-8},children:[(0,w.jsxs)("div",{className:"chart-header",children:[(0,w.jsx)("h3",{children:e.name}),(0,w.jsx)("div",{className:"chart-badge",children:e.unit})]}),e.data.labels.length>0?(0,w.jsx)("div",{className:"chart-container",children:(0,w.jsx)(f,{data:e.data,options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(100, 35, 194, 0.8)",padding:12,borderRadius:8,titleFont:{size:12,weight:"bold"},bodyFont:{size:11},callbacks:{label:s=>" ".concat(s.parsed.y.toFixed(1)," ").concat(e.unit)}}},scales:{y:{beginAtZero:!1,grid:{color:"rgba(100, 35, 194, 0.1)"},ticks:{color:"rgba(240, 242, 245, 0.7)"}},x:{grid:{display:!1},ticks:{color:"rgba(240, 242, 245, 0.7)"}}}}})}):(0,w.jsx)("div",{className:"no-data",children:(0,w.jsx)("p",{children:"\ud83d\udcca Log more metrics to see your progression"})})]},e.name))})]})]})}}}]);
//# sourceMappingURL=84.2b152749.chunk.js.map