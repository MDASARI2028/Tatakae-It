"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[892],{4892:(e,s,t)=>{t.r(s),t.d(s,{default:()=>i});var a=t(5043),r=t(697),l=t(6446),n=t(184),o=t(6801),d=t(9778),c=t(579);const i=()=>{const{token:e}=(0,a.useContext)(r.c),[s,t]=(0,a.useState)([]),[i,x]=(0,a.useState)(!0),[m,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{let s=!0;return e&&(async()=>{const a={headers:{"x-auth-token":e}};try{const e=new Promise((e,s)=>setTimeout(()=>s(new Error("Request timed out")),1e4)),r=d.A.get("/api/levelup/history",a),l=await Promise.race([r,e]);s&&(Array.isArray(l.data)?(t(l.data),h(null)):(console.error("XP History Error: Received non-array data",l.data),h("Invalid data received from server. Please check your connection."),t([])))}catch(r){s&&(console.error("Error fetching XP history",r),h("Request timed out"===r.message?"Loading took too long. Please try again.":"Failed to load history."))}finally{s&&x(!1)}})(),()=>{s=!1}},[e]);const u=e=>{switch(e){case"FITNESS":return(0,c.jsx)(n.bB,{className:"text-secondary"});case"NUTRITION":return(0,c.jsx)(n.vUD,{className:"text-green-400"});case"STREAK":return(0,c.jsx)(n.Itl,{className:"text-orange-400"});case"PENALTY":return(0,c.jsx)(n.BS8,{className:"text-red-500"});default:return(0,c.jsx)(n.OKX,{className:"text-secondary"})}};return(0,c.jsxs)("div",{className:"min-h-screen bg-slate-950 text-white p-6 pt-24 font-inter relative overflow-hidden",children:[(0,c.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0",children:[(0,c.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary/20 rounded-full blur-[100px]"}),(0,c.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-secondary/20 rounded-full blur-[100px]"})]}),(0,c.jsxs)("div",{className:"max-w-4xl mx-auto relative z-10",children:[(0,c.jsx)("div",{className:"mb-8",children:(0,c.jsx)(o.A,{})}),(0,c.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,c.jsx)("div",{className:"p-3 bg-primary/10 rounded-xl border border-primary/20",children:(0,c.jsx)(n.OKX,{className:"text-3xl text-secondary"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400",children:"XP History"}),(0,c.jsx)("p",{className:"text-slate-400",children:"Track your gains and losses"})]})]}),m&&(0,c.jsxs)("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-200 flex items-center gap-3",children:[(0,c.jsx)(n.BS8,{}),(0,c.jsx)("span",{children:m})]}),(0,c.jsx)("div",{className:"bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl overflow-hidden shadow-xl",children:i?(0,c.jsx)("div",{className:"p-12 text-center text-slate-400",children:"Loading history..."}):0===s.length?(0,c.jsxs)("div",{className:"p-12 text-center text-slate-400",children:[(0,c.jsx)("p",{children:"No XP history found yet."}),(0,c.jsx)("p",{className:"text-sm mt-2",children:"Start your journey to see logs here."})]}):(0,c.jsx)("div",{className:"divide-y divide-slate-800",children:s.map(e=>(0,c.jsxs)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 hover:bg-slate-800/50 transition-colors flex items-center justify-between group",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)("div",{className:"p-3 rounded-lg bg-slate-800 border border-slate-700 group-hover:border-slate-600 transition-colors",children:u(e.category)}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-semibold text-slate-200",children:e.reason}),(0,c.jsx)("p",{className:"text-xs text-slate-500",children:new Date(e.date).toLocaleString()})]})]}),(0,c.jsxs)("div",{className:"text-lg font-bold font-mono ".concat(e.amount>0?"text-green-400":"text-red-400"),children:[e.amount>0?"+":"",e.amount," XP"]})]},e._id))})})]})]})}},6801:(e,s,t)=>{t.d(s,{A:()=>o});t(5043);var a=t(9981),r=t(6446),l=t(184),n=t(579);const o=e=>{let{label:s="Back",className:t=""}=e;const o=(0,a.Zp)();return(0,n.jsxs)(r.P.button,{className:"back-button-nav ".concat(t),onClick:()=>o(-1),whileHover:{x:-3},whileTap:{scale:.95},children:[(0,n.jsx)(l.QVr,{}),(0,n.jsx)("span",{children:s})]})}}}]);
//# sourceMappingURL=892.7bf51b69.chunk.js.map