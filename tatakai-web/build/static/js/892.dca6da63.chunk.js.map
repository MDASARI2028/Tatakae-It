{"version":3,"file":"static/js/892.dca6da63.chunk.js","mappings":"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","sources":["pages/XPHistoryPage.js","components/common/BackButton.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { motion } from 'framer-motion';\r\nimport { FaHistory, FaDumbbell, FaAppleAlt, FaFire, FaExclamationTriangle } from 'react-icons/fa';\r\nimport BackButton from '../components/common/BackButton';\r\nimport api from '../api/axios';\r\n\r\nconst XPHistoryPage = () => {\r\n    const { token } = useContext(AuthContext);\r\n    const [history, setHistory] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        const fetchHistory = async () => {\r\n            const config = { headers: { 'x-auth-token': token } };\r\n            try {\r\n                // Add a timeout to prevent infinite loading\r\n                const timeoutPromise = new Promise((_, reject) =>\r\n                    setTimeout(() => reject(new Error('Request timed out')), 10000)\r\n                );\r\n\r\n                const fetchPromise = api.get('/api/levelup/history', config);\r\n                const res = await Promise.race([fetchPromise, timeoutPromise]);\r\n\r\n                if (isMounted) {\r\n                    if (Array.isArray(res.data)) {\r\n                        setHistory(res.data);\r\n                        setError(null);\r\n                    } else {\r\n                        console.error(\"XP History Error: Received non-array data\", res.data);\r\n                        setError('Invalid data received from server. Please check your connection.');\r\n                        setHistory([]);\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                if (isMounted) {\r\n                    console.error(\"Error fetching XP history\", err);\r\n                    setError(err.message === 'Request timed out' ? 'Loading took too long. Please try again.' : 'Failed to load history.');\r\n                }\r\n            } finally {\r\n                if (isMounted) setLoading(false);\r\n            }\r\n        };\r\n\r\n        if (token) {\r\n            fetchHistory();\r\n        } else {\r\n            // If token is missing (but somehow we are here), wait or stop\r\n            // Usually handled by auth context, but let's be safe\r\n        }\r\n\r\n        return () => { isMounted = false; };\r\n    }, [token]);\r\n\r\n    const getIcon = (category) => {\r\n        switch (category) {\r\n            case 'FITNESS': return <FaDumbbell className=\"text-blue-400\" />;\r\n            case 'NUTRITION': return <FaAppleAlt className=\"text-green-400\" />;\r\n            case 'STREAK': return <FaFire className=\"text-orange-400\" />;\r\n            case 'PENALTY': return <FaExclamationTriangle className=\"text-red-500\" />;\r\n            default: return <FaHistory className=\"text-purple-400\" />;\r\n        }\r\n    };\r\n\r\n    // error state already added in previous step's variable block? \r\n    // Wait, previous step REPLACED lines 10-11 where history/loading were defined.\r\n    // So current file currently DOES NOT HAVE history/loading defined!\r\n    // I must restore them.\r\n\r\n    // ... (rest of the file logic uses them) ...\r\n    // See lines 63 in view_file.\r\n\r\n    // UI Update for error:\r\n    // Insert error message before the content list.\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-slate-950 text-white p-6 pt-24 font-inter relative overflow-hidden\">\r\n            {/* Background Effects */}\r\n            <div className=\"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0\">\r\n                <div className=\"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-900/20 rounded-full blur-[100px]\"></div>\r\n                <div className=\"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-indigo-900/20 rounded-full blur-[100px]\"></div>\r\n            </div>\r\n\r\n            <div className=\"max-w-4xl mx-auto relative z-10\">\r\n                <div className=\"mb-8\">\r\n                    <BackButton />\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-4 mb-8\">\r\n                    <div className=\"p-3 bg-purple-500/10 rounded-xl border border-purple-500/20\">\r\n                        <FaHistory className=\"text-3xl text-purple-400\" />\r\n                    </div>\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400\">XP History</h1>\r\n                        <p className=\"text-slate-400\">Track your gains and losses</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {error && (\r\n                    <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-200 flex items-center gap-3\">\r\n                        <FaExclamationTriangle />\r\n                        <span>{error}</span>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl overflow-hidden shadow-xl\">\r\n                    {loading ? (\r\n                        <div className=\"p-12 text-center text-slate-400\">Loading history...</div>\r\n                    ) : history.length === 0 ? (\r\n                        <div className=\"p-12 text-center text-slate-400\">\r\n                            <p>No XP history found yet.</p>\r\n                            <p className=\"text-sm mt-2\">Start your journey to see logs here.</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"divide-y divide-slate-800\">\r\n                            {history.map((log) => (\r\n                                <motion.div\r\n                                    key={log._id}\r\n                                    initial={{ opacity: 0, y: 10 }}\r\n                                    animate={{ opacity: 1, y: 0 }}\r\n                                    className=\"p-4 hover:bg-slate-800/50 transition-colors flex items-center justify-between group\"\r\n                                >\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <div className={`p-3 rounded-lg bg-slate-800 border border-slate-700 group-hover:border-slate-600 transition-colors`}>\r\n                                            {getIcon(log.category)}\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-semibold text-slate-200\">{log.reason}</p>\r\n                                            <p className=\"text-xs text-slate-500\">{new Date(log.date).toLocaleString()}</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className={`text-lg font-bold font-mono ${log.amount > 0 ? 'text-green-400' : 'text-red-400'}`}>\r\n                                        {log.amount > 0 ? '+' : ''}{log.amount} XP\r\n                                    </div>\r\n                                </motion.div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default XPHistoryPage;\r\n","// frontend/src/components/common/BackButton.js\r\nimport React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { FaArrowLeft } from 'react-icons/fa';\r\nimport './BackButton.css';\r\n\r\nconst BackButton = ({ label = 'Back', className = '' }) => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <motion.button\r\n            className={`back-button-nav ${className}`}\r\n            onClick={() => navigate(-1)}\r\n            whileHover={{ x: -3 }}\r\n            whileTap={{ scale: 0.95 }}\r\n        >\r\n            <FaArrowLeft />\r\n            <span>{label}</span>\r\n        </motion.button>\r\n    );\r\n};\r\n\r\nexport default BackButton;\r\n"],"names":["XPHistoryPage","token","useContext","AuthContext","history","setHistory","useState","loading","setLoading","error","setError","useEffect","isMounted","async","config","headers","timeoutPromise","Promise","_","reject","setTimeout","Error","fetchPromise","api","get","res","race","Array","isArray","data","console","err","message","fetchHistory","getIcon","category","_jsx","FaDumbbell","className","FaAppleAlt","FaFire","FaExclamationTriangle","FaHistory","_jsxs","children","BackButton","length","map","log","motion","div","initial","opacity","y","animate","reason","Date","date","toLocaleString","concat","amount","_id","_ref","label","navigate","useNavigate","button","onClick","whileHover","x","whileTap","scale","FaArrowLeft"],"sourceRoot":""}