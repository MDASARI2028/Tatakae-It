"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[917],{6801:(e,a,s)=>{s.d(a,{A:()=>r});s(5043);var t=s(9981),i=s(6446),n=s(3204),l=s(579);const r=e=>{let{label:a="Back",className:s=""}=e;const r=(0,t.Zp)();return(0,l.jsxs)(i.P.button,{className:"back-button-nav ".concat(s),onClick:()=>r(-1),whileHover:{x:-3},whileTap:{scale:.95},children:[(0,l.jsx)(n.QVr,{}),(0,l.jsx)("span",{children:a})]})}},6917:(e,a,s)=>{s.r(a),s.d(a,{default:()=>Y});var t=s(5043),i=s(6446),n=s(3204),l=s(7753),r=s(108),c=s(6992),o=s(4152),d=s(7869),m=s(579);const h={goal:2200,color:"#ff007a"},u={goal:150,color:"#adff2f"},x={goal:70,color:"#8884d8"},j={goal:250,color:"#ff9f40"},p={goal:3e3,color:"#00bfff"},g=(e,a)=>a>0?Math.min(e,a)/a*360:0,v=()=>{const{nutritionLogs:e,hydrationLogs:a,nutritionGoals:s,hydrationGoal:i}=(0,l.KS)(),n=(0,t.useMemo)(()=>{const s={calories:0,protein:0,fat:0,carbs:0,water:0};return Array.isArray(e)&&e.forEach(e=>{e&&Array.isArray(e.items)&&e.items.forEach(e=>{e&&(s.calories+=Number(e.calories)||0,s.protein+=Number(e.protein)||0,s.fat+=Number(e.fat)||0,s.carbs+=Number(e.carbohydrates)||0)})}),Array.isArray(a)&&(s.water=a.reduce((e,a)=>e+((null===a||void 0===a?void 0:a.amount)||0),0)),s},[e,a]),v=n.calories>s.calories,y=v?"#ff3b30":h.color,N=v?"over-limit":"",b=Math.round(n.calories),f=(e=>{const a=String(e).length;return a<=3?"2.8rem":4===a?"2.4rem":5===a?"2.0rem":"1.6rem"})(b);return(0,m.jsxs)("div",{className:"rings-container-final",children:[(0,m.jsx)(r.u,{width:"100%",height:"100%",children:(0,m.jsxs)(c.r,{children:[(0,m.jsx)(o.F,{data:[{value:1}],dataKey:"value",cx:"50%",cy:"50%",innerRadius:"45%",outerRadius:"100%",fill:"rgba(58, 63, 90, 0.5)",startAngle:90,endAngle:-270,isAnimationActive:!1,stroke:"none"}),(0,m.jsx)(o.F,{data:[{value:1}],dataKey:"value",cx:"50%",cy:"50%",innerRadius:"90%",outerRadius:"100%",startAngle:90,endAngle:90-g(n.calories,s.calories),stroke:"none",cornerRadius:"50%",children:(0,m.jsx)(d.f,{fill:y})}),(0,m.jsx)(o.F,{data:[{value:1}],dataKey:"value",cx:"50%",cy:"50%",innerRadius:"80%",outerRadius:"90%",startAngle:90,endAngle:90-g(n.protein,s.protein),stroke:"none",cornerRadius:"50%",children:(0,m.jsx)(d.f,{fill:u.color})}),(0,m.jsx)(o.F,{data:[{value:1}],dataKey:"value",cx:"50%",cy:"50%",innerRadius:"70%",outerRadius:"80%",startAngle:90,endAngle:90-g(n.fat,s.fat),stroke:"none",cornerRadius:"50%",children:(0,m.jsx)(d.f,{fill:x.color})}),(0,m.jsx)(o.F,{data:[{value:1}],dataKey:"value",cx:"50%",cy:"50%",innerRadius:"60%",outerRadius:"70%",startAngle:90,endAngle:90-g(n.carbs,s.carbs),stroke:"none",cornerRadius:"50%",children:(0,m.jsx)(d.f,{fill:j.color})}),(0,m.jsx)(o.F,{data:[{value:1}],dataKey:"value",cx:"50%",cy:"50%",innerRadius:"50%",outerRadius:"60%",startAngle:90,endAngle:90-g(n.water,i),stroke:"none",cornerRadius:"50%",children:(0,m.jsx)(d.f,{fill:p.color})})]})}),(0,m.jsxs)("div",{className:"rings-center-text-final ".concat(N),children:[(0,m.jsx)("h3",{style:{fontSize:f},children:b}),(0,m.jsx)("span",{children:"cal"})]})]})},y=e=>{let{setActiveTab:a}=e;return(0,m.jsxs)("div",{className:"nutrition-summary-container",children:[(0,m.jsxs)("div",{className:"summary-cards-grid",children:[(0,m.jsxs)("div",{className:"nutrition-summary-card align-top-left",onClick:()=>a("logger"),children:[(0,m.jsx)(n.kkc,{className:"nutrition-summary-icon"}),(0,m.jsx)("h3",{"data-text":"Log Meal",children:"Log Meal"}),(0,m.jsx)("p",{children:"Record your daily nutritional intake."})]}),(0,m.jsxs)("div",{className:"nutrition-summary-card align-top-right",onClick:()=>a("history"),children:[(0,m.jsx)(n.OKX,{className:"nutrition-summary-icon"}),(0,m.jsx)("h3",{"data-text":"View History",children:"View History"}),(0,m.jsx)("p",{children:"Review and edit your past entries."})]}),(0,m.jsxs)("div",{className:"nutrition-summary-card align-bottom-left",onClick:()=>a("hydration"),children:[(0,m.jsx)(n.DFS,{className:"nutrition-summary-icon"}),(0,m.jsx)("h3",{"data-text":"Track Hydration",children:"Track Hydration"}),(0,m.jsx)("p",{children:"Log your daily water intake."})]}),(0,m.jsxs)("div",{className:"nutrition-summary-card align-bottom-right",onClick:()=>a("progress"),children:[(0,m.jsx)(n.qvi,{className:"nutrition-summary-icon"}),(0,m.jsx)("h3",{"data-text":"Analyze Progress",children:"Analyze Progress"}),(0,m.jsx)("p",{children:"Visualize your performance over time."})]}),(0,m.jsx)("div",{className:"center-ring-container",children:(0,m.jsx)(v,{})})]}),(0,m.jsxs)("div",{className:"nutrition-rings-legend",children:[(0,m.jsxs)("div",{className:"legend-item",children:[(0,m.jsx)("span",{className:"legend-dot",style:{backgroundColor:"#ff007a"}}),(0,m.jsx)("span",{children:"Calories"})]}),(0,m.jsxs)("div",{className:"legend-item",children:[(0,m.jsx)("span",{className:"legend-dot",style:{backgroundColor:"#adff2f"}}),(0,m.jsx)("span",{children:"Protein"})]}),(0,m.jsxs)("div",{className:"legend-item",children:[(0,m.jsx)("span",{className:"legend-dot",style:{backgroundColor:"#ff9f40"}}),(0,m.jsx)("span",{children:"Carbs"})]}),(0,m.jsxs)("div",{className:"legend-item",children:[(0,m.jsx)("span",{className:"legend-dot",style:{backgroundColor:"#8884d8"}}),(0,m.jsx)("span",{children:"Fat"})]}),(0,m.jsxs)("div",{className:"legend-item",children:[(0,m.jsx)("span",{className:"legend-dot",style:{backgroundColor:"#00bfff"}}),(0,m.jsx)("span",{children:"Water"})]})]})]})};var N=s(9379),b=s(4448),f=s(697),k=s(3546);s(9778);const C=e=>{let{selectedDate:a}=e;const{addMeal:s,loading:r}=(0,l.KS)(),{calculateDailyXP:c}=(0,b.$)(),{token:o}=(0,t.useContext)(f.c),[d,h]=(0,t.useState)([]),[u,x]=(0,t.useState)("Breakfast"),[j,p]=(0,t.useState)(""),[g,v]=(0,t.useState)([]),[y,C]=(0,t.useState)(!1),w=(e,a)=>{const{name:s,value:t}=e.target,i=[...d];i[a][s]=t,h(i)},S=(0,t.useMemo)(()=>d.reduce((e,a)=>{const s=Number(a.calories)||0;return e.calories+=s,e.protein+=Number(a.protein)||0,e.carbs+=Number(a.carbohydrates)||0,e.fat+=Number(a.fat)||0,e},{calories:0,protein:0,carbs:0,fat:0}),[d]),[P,D]=(0,t.useState)(!1),[F,A]=(0,t.useState)({foodName:"",servingSize:1,servingUnit:"serving",calories:"",protein:"",carbohydrates:"",fat:""}),M=()=>{D(!1),A({foodName:"",servingSize:1,servingUnit:"serving",calories:"",protein:"",carbohydrates:"",fat:""})},T=e=>{const{name:a,value:s}=e.target;A(e=>(0,N.A)((0,N.A)({},e),{},{[a]:s}))};return(0,m.jsxs)("div",{className:"nutrition-logger-shell",children:[(0,m.jsxs)(i.P.div,{className:"logger-left",initial:{opacity:0,x:-12},animate:{opacity:1,x:0},children:[(0,m.jsxs)("div",{className:"logger-header",children:[(0,m.jsxs)("div",{className:"title",children:[(0,m.jsx)(n.xBk,{className:"food-ico"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{children:"Log Meal"}),(0,m.jsx)("p",{className:"hint",children:"Create custom items to track your nutrition."})]})]}),(0,m.jsxs)("div",{className:"mini-controls",children:[(0,m.jsxs)("div",{className:"date-nav",children:[(0,m.jsx)("button",{className:"icon-btn",onClick:()=>{const e=new Date(a);e.setDate(e.getDate()-1)},children:(0,m.jsx)(n._Jj,{})}),(0,m.jsx)("div",{className:"date-label",children:a.toDateString()}),(0,m.jsx)("button",{className:"icon-btn",onClick:()=>{const e=new Date(a);e.setDate(e.getDate()+1)},children:(0,m.jsx)(n.X6T,{})})]}),(0,m.jsxs)("select",{className:"meal-type-select",value:u,onChange:e=>x(e.target.value),children:[(0,m.jsx)("option",{children:"Breakfast"}),(0,m.jsx)("option",{children:"Lunch"}),(0,m.jsx)("option",{children:"Dinner"}),(0,m.jsx)("option",{children:"Snacks"})]})]})]}),(0,m.jsxs)("div",{className:"search-box",style:{display:"none"},children:[(0,m.jsx)("input",{type:"text",className:"search-input",placeholder:"Search foods (min 2 chars)...",value:j,onChange:e=>p(e.target.value),autoComplete:"off",disabled:!0}),y&&(0,m.jsx)("div",{className:"spinner small"}),g.length>0&&(0,m.jsx)(i.P.ul,{className:"search-results",initial:{opacity:0,y:-6},animate:{opacity:1,y:0},children:g.slice(0,6).map(e=>(0,m.jsxs)(i.P.li,{onClick:()=>(e=>{const a={foodName:e.label,calories:Math.round(e.calories)||0,protein:Math.round(e.protein)||0,carbohydrates:Math.round(e.carbs)||0,fat:Math.round(e.fat)||0,servingSize:1,servingUnit:"serving"};h(e=>[...e,a]),p(""),v([])})(e),whileHover:{scale:1.02},children:[(0,m.jsxs)("div",{className:"sr-left",children:[(0,m.jsx)("div",{className:"sr-title",children:e.label}),(0,m.jsx)("div",{className:"sr-sub",children:e.category||""})]}),(0,m.jsxs)("div",{className:"sr-right",children:[Math.round(e.calories)," kcal"]})]},e.foodId||e.label))})]}),(0,m.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),0===d.length)return void alert("Please add at least one food item.");const t=a.getFullYear(),i=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),l="".concat(t,"-").concat(i,"-").concat(n);console.log("[NutritionLogger] Logging meal for date:",l);const r={date:l,mealType:u,items:d.filter(e=>e.foodName&&e.calories&&e.servingSize)};0!==r.items.length?s(r).then(()=>{h([]),c&&(console.log("Triggering XP calculation after meal..."),c(!0).catch(e=>console.error("XP Trigger Error:",e)))}):alert("Please fill out at least one item completely.")},className:"log-form",children:[(0,m.jsx)("div",{className:"items-list-container",children:(0,m.jsx)(k.N,{children:d.map((e,a)=>(0,m.jsxs)(i.P.div,{layout:!0,initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,scale:.96},className:"food-item-card",children:[(0,m.jsxs)("div",{className:"left-col",children:[(0,m.jsx)("input",{type:"text",name:"foodName",value:e.foodName,onChange:e=>w(e,a),className:"item-input food-name",placeholder:"Food name"}),(0,m.jsxs)("div",{className:"meta-row",children:[(0,m.jsx)("input",{type:"number",name:"servingSize",value:e.servingSize,onChange:e=>w(e,a),className:"item-input tiny",placeholder:"Size"}),(0,m.jsx)("input",{type:"text",name:"servingUnit",value:e.servingUnit,onChange:e=>w(e,a),className:"item-input tiny",placeholder:"Unit"})]})]}),(0,m.jsxs)("div",{className:"right-col",children:[(0,m.jsx)("input",{type:"number",name:"calories",value:e.calories,onChange:e=>w(e,a),className:"item-input",placeholder:"kcal"}),(0,m.jsxs)("div",{className:"macro-row",children:[(0,m.jsx)("input",{type:"number",name:"protein",value:e.protein,onChange:e=>w(e,a),className:"item-input tiny",placeholder:"P"}),(0,m.jsx)("input",{type:"number",name:"carbohydrates",value:e.carbohydrates,onChange:e=>w(e,a),className:"item-input tiny",placeholder:"C"}),(0,m.jsx)("input",{type:"number",name:"fat",value:e.fat,onChange:e=>w(e,a),className:"item-input tiny",placeholder:"F"})]})]}),(0,m.jsx)("button",{type:"button",className:"remove-item-btn",onClick:()=>{return e=a,void h(d.filter((a,s)=>s!==e));var e},children:(0,m.jsx)(n.qbC,{})})]},a))})}),(0,m.jsxs)("div",{className:"form-actions",children:[(0,m.jsxs)("button",{type:"button",className:"add-custom-btn",onClick:()=>D(!0),children:[(0,m.jsx)(n.OiG,{})," Add Custom"]}),(0,m.jsxs)("div",{className:"submit-block",children:[(0,m.jsxs)("div",{className:"totals",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:S.calories}),(0,m.jsx)("span",{children:" kcal"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:S.protein}),(0,m.jsx)("span",{children:" g P"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:S.carbs}),(0,m.jsx)("span",{children:" g C"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:S.fat}),(0,m.jsx)("span",{children:" g F"})]})]}),(0,m.jsx)("button",{type:"submit",className:"submit-meal-btn",disabled:r,children:r?"Logging...":"Commit Meal"})]})]})]})]}),(0,m.jsx)(i.P.aside,{className:"logger-preview",initial:{opacity:0,x:12},animate:{opacity:1,x:0},children:(0,m.jsxs)("div",{className:"preview-card",children:[(0,m.jsx)("h4",{children:"Meal Preview"}),(0,m.jsxs)("div",{className:"preview-list",children:[0===d.length&&(0,m.jsx)("div",{className:"empty",children:"No items yet \u2014 add from search or create one."}),d.map((e,a)=>(0,m.jsxs)("div",{className:"preview-row",children:[(0,m.jsx)("div",{className:"p-name",children:e.foodName||"\u2014"}),(0,m.jsxs)("div",{className:"p-meta",children:[Number(e.calories)||0," kcal"]})]},a))]}),(0,m.jsxs)("div",{className:"preview-footer",children:[(0,m.jsxs)("div",{className:"p-total",children:["Total: ",(0,m.jsxs)("strong",{children:[S.calories," kcal"]})]}),(0,m.jsx)("div",{className:"p-action",children:d.length>0?(0,m.jsx)("button",{className:"ghost",children:"Ready"}):null})]})]})}),(0,m.jsx)(k.N,{children:P&&(0,m.jsx)(i.P.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,m.jsxs)(i.P.form,{className:"custom-modal",initial:{scale:.96,y:-8},animate:{scale:1,y:0},exit:{scale:.98},onSubmit:e=>{if(e.preventDefault(),!F.foodName||!F.calories)return;const a={foodName:F.foodName,servingSize:Number(F.servingSize)||1,servingUnit:F.servingUnit||"serving",calories:Number(F.calories)||0,protein:Number(F.protein)||0,carbohydrates:Number(F.carbohydrates)||0,fat:Number(F.fat)||0};h(e=>[...e,a]),M()},children:[(0,m.jsx)("h4",{children:"Create Custom Item"}),(0,m.jsxs)("div",{className:"modal-row",children:[(0,m.jsx)("input",{name:"foodName",value:F.foodName,onChange:T,placeholder:"Food name",required:!0}),(0,m.jsx)("input",{name:"calories",value:F.calories,onChange:T,placeholder:"Calories",required:!0})]}),(0,m.jsxs)("div",{className:"modal-row",children:[(0,m.jsx)("input",{name:"servingSize",value:F.servingSize,onChange:T,placeholder:"Serving size"}),(0,m.jsx)("input",{name:"servingUnit",value:F.servingUnit,onChange:T,placeholder:"Unit"})]}),(0,m.jsxs)("div",{className:"modal-row",children:[(0,m.jsx)("input",{name:"protein",value:F.protein,onChange:T,placeholder:"Protein (g)"}),(0,m.jsx)("input",{name:"carbohydrates",value:F.carbohydrates,onChange:T,placeholder:"Carbs (g)"}),(0,m.jsx)("input",{name:"fat",value:F.fat,onChange:T,placeholder:"Fat (g)"})]}),(0,m.jsxs)("div",{className:"modal-actions",children:[(0,m.jsx)("button",{type:"button",className:"btn ghost",onClick:M,children:"Cancel"}),(0,m.jsx)("button",{type:"submit",className:"btn primary",children:"Add Item"})]})]})})})]})};var w=s(4905);const S=e=>{let{meal:a,onClose:s}=e;const{updateMeal:i,loading:n}=(0,l.KS)(),[r,c]=(0,t.useState)(""),[o,d]=(0,t.useState)("Breakfast"),[h,u]=(0,t.useState)([]);if((0,t.useEffect)(()=>{a&&(c(a.mealName||""),d(a.mealType),u(a.items.map(e=>{let{foodName:a,calories:s,protein:t,carbohydrates:i,fat:n,servingSize:l,servingUnit:r}=e;return{foodName:a,calories:s,protein:t,carbohydrates:i,fat:n,servingSize:l,servingUnit:r}})))},[a]),!a)return null;const x=(e,a)=>{const s=[...h];s[e][a.target.name]=a.target.value,u(s)};return(0,m.jsx)("div",{className:"modal-backdrop",children:(0,m.jsxs)("div",{className:"modal-content",children:[(0,m.jsx)("h2",{children:"Edit Meal"}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t={mealName:r,mealType:o,items:h.filter(e=>e.foodName&&e.calories&&e.servingSize)};i(a._id,t).then(()=>{s()})},className:"edit-meal-form",children:[(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"form-group-inline",children:[(0,m.jsx)("label",{htmlFor:"mealType",children:"Meal Type"}),(0,m.jsxs)("select",{id:"mealType",value:o,onChange:e=>d(e.target.value),children:[(0,m.jsx)("option",{children:"Breakfast"}),(0,m.jsx)("option",{children:"Lunch"}),(0,m.jsx)("option",{children:"Dinner"}),(0,m.jsx)("option",{children:"Snacks"})]})]}),(0,m.jsxs)("div",{className:"form-group-inline",children:[(0,m.jsx)("label",{htmlFor:"mealTitle",children:"Meal Title (Optional)"}),(0,m.jsx)("input",{type:"text",id:"mealTitle",value:r,onChange:e=>c(e.target.value)})]})]}),(0,m.jsx)("div",{className:"items-list",children:h.map((e,a)=>(0,m.jsxs)("div",{className:"food-item-row",children:[(0,m.jsx)("input",{type:"text",name:"foodName",placeholder:"Food Name",value:e.foodName,onChange:e=>x(a,e),required:!0,className:"food-name-input"}),(0,m.jsx)("input",{type:"number",name:"servingSize",placeholder:"Size",value:e.servingSize,onChange:e=>x(a,e),required:!0}),(0,m.jsx)("input",{type:"text",name:"servingUnit",placeholder:"Unit",value:e.servingUnit,onChange:e=>x(a,e),required:!0}),(0,m.jsx)("input",{type:"number",name:"calories",placeholder:"kcal",value:e.calories,onChange:e=>x(a,e),required:!0}),(0,m.jsx)("input",{type:"number",name:"protein",placeholder:"P (g)",value:e.protein,onChange:e=>x(a,e)}),(0,m.jsx)("input",{type:"number",name:"carbohydrates",placeholder:"C (g)",value:e.carbohydrates,onChange:e=>x(a,e)}),(0,m.jsx)("input",{type:"number",name:"fat",placeholder:"F (g)",value:e.fat,onChange:e=>x(a,e)}),(0,m.jsx)("button",{type:"button",className:"remove-item-btn",onClick:()=>(e=>u(h.filter((a,s)=>s!==e)))(a),children:"\xd7"})]},a))}),(0,m.jsxs)("div",{className:"modal-actions",children:[(0,m.jsx)("button",{type:"button",className:"add-item-btn",onClick:()=>u([...h,{foodName:"",calories:"",protein:"",carbohydrates:"",fat:"",servingSize:"",servingUnit:""}]),children:"+ Add Item"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("button",{type:"button",className:"btn-cancel",onClick:s,children:"Cancel"}),(0,m.jsx)("button",{type:"submit",className:"btn-save",disabled:n,children:n?"Saving...":"Save Changes"})]})]})]})]})})},P=()=>{const{nutritionLogs:e,loading:a,error:s,deleteMeal:r}=(0,l.KS)(),[c,o]=(0,t.useState)(null),{addRecipe:d}=(0,t.useContext)(w.A),h=(0,t.useMemo)(()=>{const a={calories:0,protein:0,carbohydrates:0,fat:0};return e.forEach(e=>{e.items.forEach(e=>{a.calories+=Number(e.calories)||0,a.protein+=Number(e.protein)||0,a.carbohydrates+=Number(e.carbohydrates)||0,a.fat+=Number(e.fat)||0})}),a},[e]);return a?(0,m.jsx)("p",{children:"Loading history..."}):s?(0,m.jsx)("p",{className:"error-message",children:s}):0===e.length?(0,m.jsx)("p",{children:"No meals logged for this day. Use the 'Meal Logger' tab to add one!"}):(0,m.jsxs)(i.P.div,{className:"nutrition-history-container",initial:{opacity:0},animate:{opacity:1},children:[(0,m.jsxs)(i.P.div,{className:"daily-totals-card",initial:{y:-12},animate:{y:0},children:[(0,m.jsxs)("div",{className:"totals-header",children:[(0,m.jsx)(n.OKX,{className:"history-icon"}),(0,m.jsx)("h3",{children:"Daily Summary"})]}),(0,m.jsxs)("div",{className:"totals-grid",children:[(0,m.jsxs)(i.P.div,{className:"total-item",whileHover:{scale:1.05},children:[(0,m.jsx)("p",{children:h.calories.toFixed(0)}),(0,m.jsx)("span",{children:"Calories"})]}),(0,m.jsxs)(i.P.div,{className:"total-item",whileHover:{scale:1.05},children:[(0,m.jsxs)("p",{children:[h.protein.toFixed(1),"g"]}),(0,m.jsx)("span",{children:"Protein"})]}),(0,m.jsxs)(i.P.div,{className:"total-item",whileHover:{scale:1.05},children:[(0,m.jsxs)("p",{children:[h.carbohydrates.toFixed(1),"g"]}),(0,m.jsx)("span",{children:"Carbs"})]}),(0,m.jsxs)(i.P.div,{className:"total-item",whileHover:{scale:1.05},children:[(0,m.jsxs)("p",{children:[h.fat.toFixed(1),"g"]}),(0,m.jsx)("span",{children:"Fat"})]})]})]}),(0,m.jsx)(k.N,{children:e.map((e,a)=>(0,m.jsxs)(i.P.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0},transition:{delay:.05*a},className:"meal-card",children:[(0,m.jsxs)("div",{className:"meal-card-header",children:[(0,m.jsxs)("div",{className:"header-left",children:[(0,m.jsx)("h4",{children:e.mealType}),e.mealName&&(0,m.jsx)("span",{className:"meal-name",children:e.mealName})]}),(0,m.jsxs)("div",{className:"meal-card-controls",children:[(0,m.jsx)(i.P.button,{whileHover:{scale:1.1},onClick:()=>(e=>{const a=prompt("Enter a name for this recipe:",e.mealName||"My ".concat(e.mealType));if(a){const s=e.items.map(e=>{let{foodName:a,calories:s,protein:t,carbohydrates:i,fat:n,servingSize:l,servingUnit:r}=e;return{foodName:a,calories:s,protein:t,carbohydrates:i,fat:n,servingSize:l,servingUnit:r}});d({name:a,items:s})}})(e),className:"control-btn save-btn",title:"Save as recipe",children:(0,m.jsx)(n.dIn,{})}),(0,m.jsx)(i.P.button,{whileHover:{scale:1.1},onClick:()=>o(e),className:"control-btn edit-btn",title:"Edit meal",children:(0,m.jsx)(n.uO9,{})}),(0,m.jsx)(i.P.button,{whileHover:{scale:1.1},onClick:()=>r(e._id),className:"control-btn delete-btn",title:"Delete meal",children:(0,m.jsx)(n.qbC,{})})]})]}),(0,m.jsx)("div",{className:"meal-items",children:e.items.map((e,a)=>(0,m.jsxs)(i.P.div,{className:"meal-item-row",initial:{opacity:0,x:-8},animate:{opacity:1,x:0},transition:{delay:.02*a},children:[(0,m.jsx)("div",{className:"item-name",children:e.foodName}),(0,m.jsxs)("div",{className:"item-details",children:[(0,m.jsxs)("span",{className:"serving",children:[e.servingSize,e.servingUnit]}),(0,m.jsxs)("span",{className:"nutrient",children:[Number(e.calories).toFixed(0)," kcal"]}),(0,m.jsxs)("span",{className:"nutrient",children:[Number(e.protein).toFixed(1),"P"]}),(0,m.jsxs)("span",{className:"nutrient",children:[Number(e.carbohydrates).toFixed(1),"C"]}),(0,m.jsxs)("span",{className:"nutrient",children:[Number(e.fat).toFixed(1),"F"]})]})]},a))})]},e._id))}),c&&(0,m.jsx)(S,{meal:c,onClose:()=>o(null)})]})},D=()=>{const{hydrationLogs:e,hydrationGoal:a,selectedDate:s,addHydration:r,getHydrationForDate:c,deleteHydration:o,setHydrationGoal:d,loading:h}=(0,l.KS)(),[u,x]=(0,t.useState)("");(0,t.useEffect)(()=>{c(s)},[s,c]);const j=(0,t.useMemo)(()=>e.reduce((e,a)=>e+a.amount,0),[e]),p=Math.min(Math.round(j/a*100),100),g=e=>{const a=parseInt(e,10);if(!a||a<=0)return;r({date:s,amount:a}),x("")};return(0,m.jsxs)(i.P.div,{className:"hydration-shell",initial:{opacity:0},animate:{opacity:1},children:[(0,m.jsxs)(i.P.div,{className:"hydration-left",initial:{x:-12},animate:{x:0},children:[(0,m.jsx)("div",{className:"hydration-header",children:(0,m.jsxs)("div",{className:"h-title",children:[(0,m.jsx)(n.DFS,{className:"water-icon"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{children:"Hydration Tracker"}),(0,m.jsx)("p",{className:"hint",children:"Keep yourself refreshed and healthy"})]})]})}),(0,m.jsxs)("div",{className:"progress-card",children:[(0,m.jsxs)("div",{className:"intake-display",children:[(0,m.jsx)("div",{className:"big-number",children:j}),(0,m.jsxs)("div",{className:"sub-text",children:["ml / ",a," ml goal"]})]}),(0,m.jsx)("div",{className:"progress-bar-container",children:(0,m.jsx)("div",{className:"progress-bar-fill",style:{width:"".concat(p,"%")},children:p>5&&(0,m.jsxs)("span",{className:"progress-percent",children:[p,"%"]})})}),(0,m.jsx)("button",{onClick:()=>{const e=prompt("Set your new daily hydration goal (in ml):",a),s=parseInt(e,10);s&&s>0&&d(s)},className:"edit-goal-link",children:"Edit Goal"})]}),(0,m.jsxs)("div",{className:"add-water-section",children:[(0,m.jsxs)("div",{className:"quick-buttons",children:[(0,m.jsx)(i.P.button,{whileHover:{scale:1.05},onClick:()=>g(250),disabled:h,className:"quick-btn",children:"+250"}),(0,m.jsx)(i.P.button,{whileHover:{scale:1.05},onClick:()=>g(500),disabled:h,className:"quick-btn",children:"+500"}),(0,m.jsx)(i.P.button,{whileHover:{scale:1.05},onClick:()=>g(750),disabled:h,className:"quick-btn",children:"+750"})]}),(0,m.jsxs)("div",{className:"custom-input-group",children:[(0,m.jsx)("input",{type:"number",value:u,onChange:e=>x(e.target.value),placeholder:"Custom ml",className:"custom-input"}),(0,m.jsx)(i.P.button,{whileHover:{scale:1.05},onClick:()=>g(u),disabled:h||!u,className:"custom-btn",children:(0,m.jsx)(n.OiG,{})})]})]}),(0,m.jsxs)("div",{className:"log-section",children:[(0,m.jsx)("h4",{children:"Today's Log"}),(0,m.jsx)("div",{className:"log-list",children:e.length>0?(0,m.jsx)(k.N,{children:e.slice().reverse().map(e=>(0,m.jsxs)(i.P.div,{className:"log-item",initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,scale:.96},children:[(0,m.jsxs)("div",{className:"log-content",children:[(0,m.jsxs)("span",{className:"log-amount",children:[e.amount," ml"]}),(0,m.jsx)("span",{className:"log-time",children:new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,m.jsx)(i.P.button,{whileHover:{scale:1.1},onClick:()=>o(e._id),className:"delete-btn",children:(0,m.jsx)(n.qbC,{})})]},e._id))}):(0,m.jsx)("div",{className:"empty-state",children:"No water logged yet. Start hydrating!"})})]})]}),(0,m.jsx)(i.P.aside,{className:"hydration-right",initial:{x:12},animate:{x:0},children:(0,m.jsxs)("div",{className:"hydration-info-card",children:[(0,m.jsx)("h4",{children:"Daily Hydration Goal"}),(0,m.jsxs)("p",{className:"goal-value",children:[a," ml"]}),(0,m.jsx)("p",{className:"info-text",children:"Recommended daily water intake varies, but 8-10 glasses (2-2.5L) is a common guideline."}),(0,m.jsxs)("div",{className:"tips",children:[(0,m.jsx)("h5",{children:"\ud83d\udca7 Tips"}),(0,m.jsxs)("ul",{children:[(0,m.jsx)("li",{children:"Drink water with meals"}),(0,m.jsx)("li",{children:"Keep a bottle nearby"}),(0,m.jsx)("li",{children:"Drink when thirsty"})]})]})]})})]})},F=e=>{let{label:a,value:s,unit:t=""}=e;return(0,m.jsxs)("div",{className:"stat-card",children:[(0,m.jsxs)("span",{className:"stat-value",children:[s,(0,m.jsx)("span",{className:"stat-unit",children:t})]}),(0,m.jsx)("span",{className:"stat-label",children:a})]})};var A=s(7554),M=s(7734),T=s(2185),z=s(6026),G=s(379),H=s(95),R=s(3243),L=s(9016);const U=e=>{let{data:a,goal:s}=e;const t=e=>{let{active:a,payload:s,label:t}=e;return a&&s&&s.length?(0,m.jsxs)("div",{className:"custom-tooltip",style:{background:"#1a1f2e",border:"1px solid #764be0",borderRadius:"8px",padding:"10px"},children:[(0,m.jsx)("p",{className:"label",style:{color:"#fff",marginBottom:"4px",fontSize:"0.85rem"},children:t}),(0,m.jsx)("p",{className:"intro",style:{color:"#c7d2e7",fontSize:"0.9rem",fontWeight:"bold"},children:"".concat(s[0].value," kcal")})]}):null};return(0,m.jsx)(r.u,{width:"100%",height:300,children:(0,m.jsxs)(A.b,{data:a,margin:{top:10,right:20,left:0,bottom:0},children:[(0,m.jsx)(M.d,{stroke:"#2d3748",strokeDasharray:"3 3",vertical:!1}),(0,m.jsx)(T.W,{dataKey:"date",stroke:"#718096",fontSize:11,tickLine:!1,axisLine:!1,tick:{fill:"#718096"},minTickGap:30}),(0,m.jsx)(z.h,{stroke:"#718096",fontSize:11,tickLine:!1,axisLine:!1,tick:{fill:"#718096"}}),(0,m.jsx)(G.m,{content:(0,m.jsx)(t,{}),cursor:{stroke:"rgba(118, 75, 224, 0.5)",strokeWidth:1}}),(0,m.jsx)(H.s,{iconType:"circle",wrapperStyle:{paddingTop:"10px"}}),(0,m.jsx)(R.e,{y:s,stroke:"#ff9f40",strokeDasharray:"5 5",strokeWidth:1.5}),(0,m.jsx)(L.N,{type:"monotone",dataKey:"totalCalories",name:"Daily Intake",stroke:"#8b5cf6",strokeWidth:3,dot:!1,activeDot:{r:6,fill:"#8b5cf6",stroke:"#fff",strokeWidth:2},animationDuration:1500})]})})},K={protein:"#adff2f",carbs:"#00bfff",fat:"#ff9f40"},I=e=>{let{data:a}=e;const s=[{name:"Protein",value:Math.round(a.avgProtein)},{name:"Carbs",value:Math.round(a.avgCarbs)},{name:"Fat",value:Math.round(a.avgFat)}],t=e=>{let{active:a,payload:s}=e;return a&&s&&s.length?(0,m.jsx)("div",{className:"custom-tooltip",children:"".concat(s[0].name,": ").concat(s[0].value,"g (avg)")}):null};return(0,m.jsx)(r.u,{width:"100%",height:300,children:(0,m.jsxs)(c.r,{children:[(0,m.jsx)(o.F,{data:s,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,fill:"#8884d8",paddingAngle:5,dataKey:"value",nameKey:"name",children:s.map((e,a)=>(0,m.jsx)(d.f,{fill:K[e.name.toLowerCase()]},"cell-".concat(a)))}),(0,m.jsx)(G.m,{content:(0,m.jsx)(t,{})}),(0,m.jsx)(H.s,{})]})})},q=t.memo(e=>{let{day:a,status:s,style:t}=e;const i="status-".concat(s);return(0,m.jsx)("div",{className:"path-stone ".concat(i),style:t,children:(0,m.jsx)("div",{className:"stone-day-number",children:a})})}),E=e=>{let{data:a,period:s,user:i,goal:n}=e;const l=(0,t.useMemo)(()=>{if(!i||!i.streakStartDate)return[];const e=new Date(i.streakStartDate),s=new Date,t=Math.abs(s-e),l=Math.ceil(t/864e5)+1,r=Math.min(l,365),c=new Map(a.map(e=>[e.date,e])),o=[];for(let a=0;a<r;a++){const e=new Date;e.setDate(e.getDate()-(r-1-a));const s=e.toISOString().split("T")[0],t=a+1;let i="future";if(c.has(s)){const e=c.get(s);i=Math.abs(e.totalCalories-n)<.1*n?"flawless":"standard"}else new Date>e&&(i="broken");const l=.5,d=a*80,m=50*Math.sin(a*l);o.push({day:t,status:i,x:d,y:m})}return o},[a,s,n]),r=80*s+100;return(0,m.jsx)("div",{className:"monarchs-road-container",children:(0,m.jsx)("div",{className:"monarchs-road-path",style:{width:"".concat(r,"px")},children:l.map(e=>(0,m.jsx)(q,{day:e.day,status:e.status,style:{transform:"translate(".concat(e.x,"px, calc(50% + ").concat(e.y,"px))")}},e.day))})})},B=()=>{const{user:e,updateGoals:a}=(0,t.useContext)(f.c),{setNutritionGoals:s}=(0,l.KS)(),[r,c]=(0,t.useState)({calorieGoal:2200,proteinGoal:150,carbGoal:250,fatGoal:70}),[o,d]=(0,t.useState)(""),[h,u]=(0,t.useState)(!1);(0,t.useEffect)(()=>{e&&e.nutritionGoals&&c(e.nutritionGoals)},[e]);const x=e=>c((0,N.A)((0,N.A)({},r),{},{[e.target.name]:e.target.value}));return(0,m.jsxs)(i.P.form,{onSubmit:async e=>{e.preventDefault(),u(!0);const t=await a(r);t.success?(s({calories:parseInt(r.calorieGoal),protein:parseInt(r.proteinGoal),fat:parseInt(r.fatGoal),carbs:parseInt(r.carbGoal)}),d("Goals updated!")):d(t.error),u(!1),setTimeout(()=>d(""),3e3)},className:"goal-setter-form",initial:{opacity:0,y:-8},animate:{opacity:1,y:0},children:[(0,m.jsxs)("div",{className:"goal-inputs-grid",children:[(0,m.jsxs)("div",{className:"goal-field",children:[(0,m.jsx)("label",{children:"Daily Calories"}),(0,m.jsxs)("div",{className:"input-with-icon",children:[(0,m.jsx)(n.Itl,{className:"input-icon",style:{color:"#ff007a"}}),(0,m.jsx)("input",{type:"number",name:"calorieGoal",value:r.calorieGoal,onChange:x}),(0,m.jsx)("span",{className:"unit",children:"kcal"})]})]}),(0,m.jsxs)("div",{className:"goal-field",children:[(0,m.jsx)("label",{children:"Protein"}),(0,m.jsxs)("div",{className:"input-with-icon",children:[(0,m.jsx)("div",{className:"dot",style:{background:"#adff2f"}}),(0,m.jsx)("input",{type:"number",name:"proteinGoal",value:r.proteinGoal,onChange:x}),(0,m.jsx)("span",{className:"unit",children:"g"})]})]}),(0,m.jsxs)("div",{className:"goal-field",children:[(0,m.jsx)("label",{children:"Carbohydrates"}),(0,m.jsxs)("div",{className:"input-with-icon",children:[(0,m.jsx)("div",{className:"dot",style:{background:"#ff9f40"}}),(0,m.jsx)("input",{type:"number",name:"carbGoal",value:r.carbGoal,onChange:x}),(0,m.jsx)("span",{className:"unit",children:"g"})]})]}),(0,m.jsxs)("div",{className:"goal-field",children:[(0,m.jsx)("label",{children:"Fats"}),(0,m.jsxs)("div",{className:"input-with-icon",children:[(0,m.jsx)("div",{className:"dot",style:{background:"#8884d8"}}),(0,m.jsx)("input",{type:"number",name:"fatGoal",value:r.fatGoal,onChange:x}),(0,m.jsx)("span",{className:"unit",children:"g"})]})]})]}),(0,m.jsxs)("div",{className:"form-actions",children:[(0,m.jsx)(i.P.button,{type:"submit",whileHover:{scale:1.02,boxShadow:"0 0 15px rgba(118, 75, 224, 0.4)"},whileTap:{scale:.98},className:"set-goals-btn",disabled:h,children:h?"Updating...":"Update Targets"}),o&&(0,m.jsx)(i.P.span,{className:"status-message",initial:{opacity:0},animate:{opacity:1},children:o})]})]})},_=()=>{const{user:e}=(0,t.useContext)(f.c),{progressData:a,getProgressData:s,loading:r}=(0,l.KS)(),[c,o]=(0,t.useState)(30),{resetStreak:d}=(0,t.useContext)(f.c);(0,t.useEffect)(()=>{e&&s(c)},[c,s,e]);const h=(0,t.useMemo)(()=>{if(!a||0===a.length)return{avgCalories:0,avgProtein:0,avgCarbs:0,avgFat:0};const e=a.reduce((e,a)=>(e.calories+=a.totalCalories,e.protein+=a.totalProtein,e.carbs+=a.totalCarbs,e.fat+=a.totalFat,e),{calories:0,protein:0,carbs:0,fat:0}),s=a.length;return{avgCalories:e.calories/s,avgProtein:e.protein/s,avgCarbs:e.carbs/s,avgFat:e.fat/s}},[a]);return(0,m.jsxs)(i.P.div,{className:"nutrition-progress-container",initial:{opacity:0},animate:{opacity:1},children:[(0,m.jsxs)(i.P.section,{className:"progress-section targets-section",initial:{y:-12},animate:{y:0},children:[(0,m.jsxs)("div",{className:"section-title-group",children:[(0,m.jsx)(n.RBv,{className:"section-icon"}),(0,m.jsx)("h3",{children:"Set Your Targets"})]}),(0,m.jsx)(B,{})]}),(0,m.jsxs)(i.P.section,{className:"progress-section",initial:{y:12},animate:{y:0},children:[(0,m.jsxs)("div",{className:"section-header",children:[(0,m.jsxs)("div",{className:"section-title-group",children:[(0,m.jsx)(n.YYR,{className:"section-icon"}),(0,m.jsx)("h3",{children:"Performance Analysis"})]}),(0,m.jsxs)("div",{className:"period-selector",children:[(0,m.jsx)(i.P.button,{whileHover:{scale:1.05},onClick:()=>o(7),className:7===c?"active":"",children:"7 Days"}),(0,m.jsx)(i.P.button,{whileHover:{scale:1.05},onClick:()=>o(30),className:30===c?"active":"",children:"30 Days"})]})]}),r&&(0,m.jsx)("p",{className:"loading-msg",children:"Analyzing data..."}),!r&&a&&e&&(0,m.jsxs)("div",{className:"charts-grid",children:[(0,m.jsxs)("div",{className:"stat-cards-grid",children:[(0,m.jsx)(F,{label:"Avg. Daily Calories",value:h.avgCalories.toFixed(0),unit:"kcal"}),(0,m.jsx)(F,{label:"Avg. Daily Protein",value:h.avgProtein.toFixed(1),unit:"g"}),(0,m.jsx)(F,{label:"Avg. Daily Carbs",value:h.avgCarbs.toFixed(1),unit:"g"}),(0,m.jsx)(F,{label:"Avg. Daily Fat",value:h.avgFat.toFixed(1),unit:"g"})]}),(0,m.jsxs)(i.P.div,{className:"chart-container",initial:{scale:.98},animate:{scale:1},children:[(0,m.jsxs)("h4",{children:[(0,m.jsx)(n.Itl,{})," Calorie Trend"]}),(0,m.jsx)(U,{data:a,goal:e.nutritionGoals.calorieGoal})]}),(0,m.jsxs)(i.P.div,{className:"chart-container",initial:{scale:.98},animate:{scale:1},children:[(0,m.jsx)("h4",{children:"Macro Breakdown"}),(0,m.jsx)(I,{data:h})]}),(0,m.jsxs)(i.P.div,{className:"chart-container full-width",initial:{scale:.98},animate:{scale:1},children:[(0,m.jsxs)("div",{className:"consistency-header",children:[(0,m.jsx)("h4",{children:"Logging Consistency"}),(0,m.jsx)(i.P.button,{onClick:d,whileHover:{scale:1.05},className:"reset-streak-btn",children:"Reset Streak"})]}),(0,m.jsx)(E,{data:a,user:e,goal:e.nutritionGoals.calorieGoal})]})]}),!r&&(!a||0===a.length)&&(0,m.jsx)("p",{className:"no-data-msg",children:"No data to analyze. Start logging meals to see your progress!"})]})]})};var O=s(6801),W=s(2023),X=s(1016);const V=()=>{const e=(0,t.useCallback)(async e=>{await(0,X.m)(e)},[]),a=t.useMemo(()=>({fullScreen:{enable:!0,zIndex:0},particles:{number:{value:30,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"image",image:[{src:"/icons/nutrition/heartbeat.svg",width:100,height:100},{src:"/icons/nutrition/water-small.svg",width:100,height:100},{src:"/icons/nutrition/utensils.svg",width:100,height:100}]},opacity:{value:1,random:!1},size:{value:14,random:!0},links:{enable:!0,distance:100,color:"#ffffff",opacity:.6,width:2},move:{enable:!0,speed:.65,direction:"none",out_mode:"out"}},interactivity:{events:{onhover:{enable:!0,mode:"grab"}},modes:{grab:{distance:200,links:{opacity:1,color:"#14b8a6"}}}},detectRetina:!0}),[]);return(0,m.jsx)(W.A,{id:"nutrition-particles",init:e,options:a})},Y=()=>{const[e,a]=(0,t.useState)("summary"),{selectedDate:s,setDate:r,getMealsForDate:c,getHydrationForDate:o}=(0,l.KS)();(0,t.useEffect)(()=>{c(s),o(s)},[s,c,o]);const d=e=>{const a=new Date(s);a.setDate(a.getDate()+e),r(a)},h=e=>{const a=new Date;return e.toDateString()===a.toDateString()};return(0,m.jsxs)("div",{className:"nutrition-page system-ui relative",children:["summary"===e&&(0,m.jsx)(V,{}),(0,m.jsxs)(i.P.header,{className:"nutrition-top",initial:{opacity:0,y:-8},animate:{opacity:1,y:0},children:[(0,m.jsx)("div",{className:"nutrition-header-left",children:(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{children:"Nutrition Center"}),(0,m.jsx)("p",{className:"sub",children:"Track meals, hydration and goals"})]})}),(0,m.jsxs)("div",{className:"nutrition-header-right",children:[(0,m.jsxs)("div",{className:"date-navigator-glass",children:[(0,m.jsx)(i.P.button,{whileHover:{scale:1.1,x:-2},whileTap:{scale:.95},onClick:()=>d(-1),className:"nav-icon-btn",children:(0,m.jsx)(n._Jj,{})}),(0,m.jsxs)("div",{className:"current-date-display",children:[(0,m.jsx)(n.bfZ,{className:"calendar-icon"}),(0,m.jsx)("h3",{children:new Date(s).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})})]}),(0,m.jsx)(i.P.button,{whileHover:{scale:1.1,x:2},whileTap:{scale:.95},onClick:()=>d(1),className:"nav-icon-btn",children:(0,m.jsx)(n.X6T,{})})]}),(0,m.jsx)(O.A,{})]})]}),(0,m.jsx)("nav",{className:"nutrition-tabs","aria-label":"Nutrition tabs",children:[{id:"summary",label:"Summary"},{id:"logger",label:"Log Meal"},{id:"history",label:"History"},{id:"hydration",label:"Hydration"},{id:"progress",label:"Progress"}].map(s=>(0,m.jsx)(i.P.button,{className:s.id===e?"active":"",onClick:()=>a(s.id),whileHover:{scale:1.02},whileTap:{scale:.98},children:s.label},s.id))}),(0,m.jsx)("main",{className:"tab-content",children:(()=>{switch(e){case"summary":default:return(0,m.jsx)(y,{setActiveTab:a});case"logger":return(0,m.jsx)(C,{selectedDate:s});case"history":return(0,m.jsx)(P,{selectedDate:s,handleDateChange:d,isToday:h});case"hydration":return(0,m.jsx)(D,{});case"progress":return(0,m.jsx)(_,{})}})()})]})}}}]);
//# sourceMappingURL=917.a66b0cf8.chunk.js.map