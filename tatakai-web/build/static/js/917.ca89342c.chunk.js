"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[917],{6801:(e,s,a)=>{a.d(s,{A:()=>r});a(5043);var l=a(9981),i=a(6446),n=a(184),t=a(579);const r=e=>{let{label:s="Back",className:a=""}=e;const r=(0,l.Zp)();return(0,t.jsxs)(i.P.button,{className:"back-button-nav ".concat(a),onClick:()=>r(-1),whileHover:{x:-3},whileTap:{scale:.95},children:[(0,t.jsx)(n.QVr,{}),(0,t.jsx)("span",{children:s})]})}},6917:(e,s,a)=>{a.r(s),a.d(s,{default:()=>$});var l=a(5043),i=a(3546),n=a(6446),t=a(184),r=a(7753),c=a(108),o=a(6992),d=a(4152),m=a(7869),h=a(579);const x={goal:2200,color:"#ff007a"},u={goal:150,color:"#adff2f"},j={goal:70,color:"#8884d8"},N={goal:250,color:"#ff9f40"},p={goal:3e3,color:"#00bfff"},v=(e,s)=>s>0?Math.min(e,s)/s*360:0,g=()=>{const{nutritionLogs:e,hydrationLogs:s,nutritionGoals:a,hydrationGoal:i}=(0,r.KS)(),n=(0,l.useMemo)(()=>{const a={calories:0,protein:0,fat:0,carbs:0,water:0};return Array.isArray(e)&&e.forEach(e=>{e&&Array.isArray(e.items)&&e.items.forEach(e=>{e&&(a.calories+=Number(e.calories)||0,a.protein+=Number(e.protein)||0,a.fat+=Number(e.fat)||0,a.carbs+=Number(e.carbohydrates)||0)})}),Array.isArray(s)&&(a.water=s.reduce((e,s)=>e+((null===s||void 0===s?void 0:s.amount)||0),0)),a},[e,s]),t=n.calories>a.calories,g=t?"#ff3b30":x.color,y=t?"over-limit":"",b=Math.round(n.calories),f=(e=>{const s=String(e).length;return s<=3?"2.8rem":4===s?"2.4rem":5===s?"2.0rem":"1.6rem"})(b);return(0,h.jsxs)("div",{className:"rings-container-final",children:[(0,h.jsx)(c.u,{width:"100%",height:"100%",children:(0,h.jsxs)(o.r,{children:[(0,h.jsx)(d.F,{data:[{value:1}],dataKey:"value",cx:"50%",cy:"50%",innerRadius:"45%",outerRadius:"100%",fill:"rgba(58, 63, 90, 0.5)",startAngle:90,endAngle:-270,isAnimationActive:!1,stroke:"none"}),(0,h.jsx)(d.F,{data:[{value:1}],dataKey:"value",cx:"50%",cy:"50%",innerRadius:"90%",outerRadius:"100%",startAngle:90,endAngle:90-v(n.calories,a.calories),stroke:"none",cornerRadius:"50%",children:(0,h.jsx)(m.f,{fill:g})}),(0,h.jsx)(d.F,{data:[{value:1}],dataKey:"value",cx:"50%",cy:"50%",innerRadius:"80%",outerRadius:"90%",startAngle:90,endAngle:90-v(n.protein,a.protein),stroke:"none",cornerRadius:"50%",children:(0,h.jsx)(m.f,{fill:u.color})}),(0,h.jsx)(d.F,{data:[{value:1}],dataKey:"value",cx:"50%",cy:"50%",innerRadius:"70%",outerRadius:"80%",startAngle:90,endAngle:90-v(n.fat,a.fat),stroke:"none",cornerRadius:"50%",children:(0,h.jsx)(m.f,{fill:j.color})}),(0,h.jsx)(d.F,{data:[{value:1}],dataKey:"value",cx:"50%",cy:"50%",innerRadius:"60%",outerRadius:"70%",startAngle:90,endAngle:90-v(n.carbs,a.carbs),stroke:"none",cornerRadius:"50%",children:(0,h.jsx)(m.f,{fill:N.color})}),(0,h.jsx)(d.F,{data:[{value:1}],dataKey:"value",cx:"50%",cy:"50%",innerRadius:"50%",outerRadius:"60%",startAngle:90,endAngle:90-v(n.water,i),stroke:"none",cornerRadius:"50%",children:(0,h.jsx)(m.f,{fill:p.color})})]})}),(0,h.jsxs)("div",{className:"rings-center-text-final ".concat(y),children:[(0,h.jsx)("h3",{style:{fontSize:f},children:b}),(0,h.jsx)("span",{children:"cal"})]})]})},y=e=>{let{setActiveTab:s}=e;return(0,h.jsxs)("div",{className:"nutrition-summary-container",children:[(0,h.jsxs)("div",{className:"summary-cards-grid",children:[(0,h.jsxs)("div",{className:"nutrition-summary-card align-top-left",onClick:()=>s("logger"),children:[(0,h.jsx)(t.kkc,{className:"nutrition-summary-icon"}),(0,h.jsx)("h3",{"data-text":"Log Meal",children:"Log Meal"}),(0,h.jsx)("p",{children:"Record your daily nutritional intake."})]}),(0,h.jsxs)("div",{className:"nutrition-summary-card align-top-right",onClick:()=>s("history"),children:[(0,h.jsx)(t.OKX,{className:"nutrition-summary-icon"}),(0,h.jsx)("h3",{"data-text":"View History",children:"View History"}),(0,h.jsx)("p",{children:"Review and edit your past entries."})]}),(0,h.jsxs)("div",{className:"nutrition-summary-card align-bottom-left",onClick:()=>s("hydration"),children:[(0,h.jsx)(t.DFS,{className:"nutrition-summary-icon"}),(0,h.jsx)("h3",{"data-text":"Track Hydration",children:"Track Hydration"}),(0,h.jsx)("p",{children:"Log your daily water intake."})]}),(0,h.jsxs)("div",{className:"nutrition-summary-card align-bottom-right",onClick:()=>s("progress"),children:[(0,h.jsx)(t.qvi,{className:"nutrition-summary-icon"}),(0,h.jsx)("h3",{"data-text":"Analyze Progress",children:"Analyze Progress"}),(0,h.jsx)("p",{children:"Visualize your performance over time."})]}),(0,h.jsx)("div",{className:"center-ring-container",children:(0,h.jsx)(g,{})})]}),(0,h.jsxs)("div",{className:"nutrition-rings-legend",children:[(0,h.jsxs)("div",{className:"legend-item",children:[(0,h.jsx)("span",{className:"legend-dot",style:{backgroundColor:"#ff007a"}}),(0,h.jsx)("span",{children:"Calories"})]}),(0,h.jsxs)("div",{className:"legend-item",children:[(0,h.jsx)("span",{className:"legend-dot",style:{backgroundColor:"#adff2f"}}),(0,h.jsx)("span",{children:"Protein"})]}),(0,h.jsxs)("div",{className:"legend-item",children:[(0,h.jsx)("span",{className:"legend-dot",style:{backgroundColor:"#ff9f40"}}),(0,h.jsx)("span",{children:"Carbs"})]}),(0,h.jsxs)("div",{className:"legend-item",children:[(0,h.jsx)("span",{className:"legend-dot",style:{backgroundColor:"#8884d8"}}),(0,h.jsx)("span",{children:"Fat"})]}),(0,h.jsxs)("div",{className:"legend-item",children:[(0,h.jsx)("span",{className:"legend-dot",style:{backgroundColor:"#00bfff"}}),(0,h.jsx)("span",{children:"Water"})]})]})]})};var b=a(9379),f=a(4448),k=a(4905),C=a(697),w=a(7304);w.t1.register(w.pr,w.FN,w.No,w.dN,w.m_,w.s$);const S=e=>{const s=e.toLowerCase();return s.includes("egg")?(0,h.jsx)(t.dQw,{}):s.includes("bread")||s.includes("toast")?(0,h.jsx)(t.Al4,{}):s.includes("avocado")||s.includes("salad")||s.includes("veg")?(0,h.jsx)(t.sHz,{}):s.includes("fruit")||s.includes("apple")||s.includes("banana")?(0,h.jsx)(t.vUD,{}):s.includes("burger")||s.includes("meat")||s.includes("beef")?(0,h.jsx)(t.Hcp,{}):s.includes("fish")||s.includes("salmon")||s.includes("tuna")?(0,h.jsx)(t.My6,{}):s.includes("pizza")?(0,h.jsx)(t.SOl,{}):s.includes("carrot")||s.includes("root")?(0,h.jsx)(t.Du_,{}):(0,h.jsx)(t.xBk,{})},A=e=>e.protein>e.carbohydrates&&e.protein>e.fat?"blue":e.carbohydrates>e.protein&&e.carbohydrates>e.fat?"green":"orange",D=e=>{let{selectedDate:s}=e;const{addMeal:a,loading:c,getRecentItems:o,nutritionLogs:d}=(0,r.KS)(),{recipes:m,getRecipes:x}=(0,l.useContext)(k.A),{calculateDailyXP:u}=(0,f.$)(),{token:j}=(0,l.useContext)(C.c),[N,p]=(0,l.useState)([]),[v,g]=(0,l.useState)([]),[y,w]=(0,l.useState)("Breakfast"),[D,T]=(0,l.useState)({foodName:"",calories:"",protein:"",carbohydrates:"",fat:""}),[P,M]=(0,l.useState)(!1),[L,R]=(0,l.useState)(5),[F,I]=(0,l.useState)("new"),[G,O]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=!0;return o&&o().then(s=>{e&&s&&g(s)}),x&&x(),()=>{e=!1}},[o,x]);const E=()=>M(!1),z=(0,l.useMemo)(()=>{const e=d.reduce((e,s)=>s.items?(s.items.forEach(s=>{e.calories+=Number(s.calories)||0,e.protein+=Number(s.protein)||0,e.carbohydrates+=Number(s.carbohydrates)||0,e.fat+=Number(s.fat)||0}),e):e,{calories:0,protein:0,carbohydrates:0,fat:0});return N.reduce((e,s)=>({calories:e.calories+(Number(s.calories)||0),protein:e.protein+(Number(s.protein)||0),carbohydrates:e.carbohydrates+(Number(s.carbohydrates)||0),fat:e.fat+(Number(s.fat)||0)}),e)},[N,d]);z.protein,z.carbohydrates,z.fat;return(0,h.jsxs)("div",{className:"nutrition-logger-shell",children:[(0,h.jsxs)(n.P.div,{className:"logger-left",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[(0,h.jsxs)("div",{className:"logger-header",children:[(0,h.jsxs)("div",{className:"title-group",children:[(0,h.jsx)("div",{className:"food-icon-sq",children:(0,h.jsx)(t.xBk,{})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{children:"Log Meal"}),(0,h.jsx)("p",{children:"Search and add items to your log"})]})]}),(0,h.jsx)("div",{className:"meal-type-toggle",children:["Breakfast","Lunch","Dinner"].map(e=>(0,h.jsx)("button",{className:"type-btn ".concat(y===e?"active":""),onClick:()=>w(e),children:e},e))})]}),(0,h.jsxs)("div",{className:"search-container",children:[(0,h.jsx)(t.KSO,{className:"search-icon"}),(0,h.jsx)("input",{type:"text",className:"search-input-modern",placeholder:"Search foods, brands or scan barcode...",readOnly:!0,onClick:()=>alert("Search is currently disabled. Use 'Add Custom' or suggested items.")})]}),(0,h.jsx)("div",{className:"section-label",children:"Recent Items"}),(0,h.jsxs)("div",{className:"items-scroll-area",children:[0===v.length&&0===N.length&&(0,h.jsx)("div",{className:"text-sm text-slate-500 text-center py-4 italic",children:"No recent history found. Add a custom item to get started."}),v.slice(0,L).map((e,s)=>(0,h.jsxs)("div",{className:"food-item-modern",onClick:()=>(e=>{const s={tempId:Date.now()+Math.random(),foodName:e.foodName,calories:Number(e.calories)||0,protein:Number(e.protein)||0,carbohydrates:Number(e.carbohydrates)||0,fat:Number(e.fat)||0,servingSize:Number(e.servingSize)||1,servingUnit:e.servingUnit||"serving",icon:S(e.foodName)};p(e=>[...e,s])})(e),children:[(0,h.jsx)("div",{className:"item-icon-circle",children:S(e.foodName)}),(0,h.jsxs)("div",{className:"item-info",children:[(0,h.jsx)("span",{className:"item-name",children:e.foodName}),(0,h.jsxs)("span",{className:"item-desc",children:[e.calories," kcal \u2022 ",e.servingSize," ",e.servingUnit]})]}),(0,h.jsx)("div",{className:"item-actions",children:(0,h.jsx)("button",{className:"text-xs font-bold text-slate-500 hover:text-white transition-colors",children:(0,h.jsx)(t.OiG,{})})})]},"recent-".concat(e._id||s))),v.length>L&&(0,h.jsxs)("button",{onClick:()=>R(e=>e+5),className:"w-full py-2 text-xs font-bold text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors border border-white/10 mb-4",children:["SHOW ",Math.min(5,v.length-L)," MORE"]}),N.length>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"section-label mt-4",style:{color:"#06b6d4"},children:["Ready to Commit (",N.length,")"]}),N.map((e,s)=>(0,h.jsxs)("div",{className:"food-item-modern",style:{borderColor:"#06b6d4"},children:[(0,h.jsx)("div",{className:"item-icon-circle",style:{color:"#06b6d4"},children:e.icon||(0,h.jsx)(t.xBk,{})}),(0,h.jsxs)("div",{className:"item-info",children:[(0,h.jsx)("span",{className:"item-name",children:e.foodName}),(0,h.jsxs)("span",{className:"item-desc",style:{color:"#06b6d4"},children:[e.calories," kcal \u2022 Added"]})]}),(0,h.jsx)("div",{className:"item-actions",children:(0,h.jsx)("button",{className:"btn-remove-x",onClick:()=>{return e=s,void p(s=>s.filter((s,a)=>a!==e));var e},children:(0,h.jsx)(t.QCr,{})})})]},e.tempId||s))]})]}),(0,h.jsxs)("div",{className:"logger-footer",children:[(0,h.jsxs)("button",{className:"btn-outline",onClick:()=>M(!0),children:[(0,h.jsx)(t.OiG,{})," Add Custom"]}),(0,h.jsxs)("div",{className:"macro-mini-summary",children:[(0,h.jsxs)("div",{className:"macro-item kcal",children:[(0,h.jsx)("span",{className:"label",children:"KCAL"}),(0,h.jsx)("span",{className:"val",children:z.calories})]}),(0,h.jsxs)("div",{className:"macro-item p",children:[(0,h.jsx)("span",{className:"label",children:"P"}),(0,h.jsxs)("span",{className:"val",children:[z.protein,(0,h.jsx)("small",{children:"g"})]})]}),(0,h.jsxs)("div",{className:"macro-item c",children:[(0,h.jsx)("span",{className:"label",children:"C"}),(0,h.jsxs)("span",{className:"val",children:[z.carbohydrates,(0,h.jsx)("small",{children:"g"})]})]}),(0,h.jsxs)("div",{className:"macro-item f",children:[(0,h.jsx)("span",{className:"label",children:"F"}),(0,h.jsxs)("span",{className:"val",children:[z.fat,(0,h.jsx)("small",{children:"g"})]})]})]}),(0,h.jsx)("button",{className:"btn-commit",onClick:()=>{if(0===N.length)return;const e=s.getFullYear(),l=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getDate()).padStart(2,"0"),n={date:"".concat(e,"-").concat(l,"-").concat(i),mealType:y,items:N.map(e=>({foodName:e.foodName,calories:e.calories,protein:e.protein,carbohydrates:e.carbohydrates,fat:e.fat,servingSize:e.servingSize,servingUnit:e.servingUnit}))};a(n).then(()=>{p([]),u&&u(!0)})},disabled:c||0===N.length,style:{opacity:0===N.length?.5:1},children:c?"...":"Commit Meal"})]}),(0,h.jsx)(i.N,{children:P&&(0,h.jsx)(n.P.div,{className:"nl-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,h.jsxs)(n.P.div,{className:"nl-modal-window",initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",stiffness:300,damping:30},children:[(0,h.jsxs)("div",{className:"nl-modal-header",children:[(0,h.jsx)("h3",{children:"ADD NUTRITION"}),(0,h.jsx)("div",{className:"nl-tabs-container",children:["new","history","recipes"].map(e=>(0,h.jsx)("button",{className:"nl-tab-btn ".concat(F===e?"active":""),onClick:()=>I(e),children:e},e))})]}),(0,h.jsx)("div",{className:"nl-modal-body",children:"new"===F?(0,h.jsxs)("div",{className:"nl-form-section",children:[(0,h.jsx)("input",{className:"nl-input-modern full-width",placeholder:"Food Name (e.g., Grilled Chicken)",value:D.foodName,onChange:e=>T((0,b.A)((0,b.A)({},D),{},{foodName:e.target.value})),autoFocus:!0}),(0,h.jsxs)("div",{className:"nl-macro-grid",children:[(0,h.jsxs)("div",{className:"nl-input-wrapper",children:[(0,h.jsx)("input",{type:"number",className:"nl-input-modern",placeholder:"0",value:D.calories,onChange:e=>T((0,b.A)((0,b.A)({},D),{},{calories:e.target.value}))}),(0,h.jsx)("span",{className:"nl-input-label",children:"KCAL"})]}),(0,h.jsxs)("div",{className:"nl-input-wrapper",children:[(0,h.jsx)("input",{type:"number",className:"nl-input-modern",placeholder:"0",value:D.protein,onChange:e=>T((0,b.A)((0,b.A)({},D),{},{protein:e.target.value}))}),(0,h.jsx)("span",{className:"nl-input-label",children:"PRO"})]}),(0,h.jsxs)("div",{className:"nl-input-wrapper",children:[(0,h.jsx)("input",{type:"number",className:"nl-input-modern",placeholder:"0",value:D.carbohydrates,onChange:e=>T((0,b.A)((0,b.A)({},D),{},{carbohydrates:e.target.value}))}),(0,h.jsx)("span",{className:"nl-input-label",children:"CARB"})]}),(0,h.jsxs)("div",{className:"nl-input-wrapper",children:[(0,h.jsx)("input",{type:"number",className:"nl-input-modern",placeholder:"0",value:D.fat,onChange:e=>T((0,b.A)((0,b.A)({},D),{},{fat:e.target.value}))}),(0,h.jsx)("span",{className:"nl-input-label",children:"FAT"})]})]}),(0,h.jsxs)("div",{className:"nl-modal-actions",children:[(0,h.jsx)("button",{className:"nl-btn-cancel",onClick:E,children:"CANCEL"}),(0,h.jsx)("button",{className:"nl-btn-confirm",onClick:e=>{e.preventDefault();const s={tempId:Date.now(),foodName:D.foodName,calories:Number(D.calories)||0,protein:Number(D.protein)||0,carbohydrates:Number(D.carbohydrates)||0,fat:Number(D.fat)||0,servingSize:1,servingUnit:"portion",icon:(0,h.jsx)(t.xBk,{})};p(e=>[...e,s]),T({foodName:"",calories:"",protein:"",carbohydrates:"",fat:""}),E()},children:"ADD TO LOG"})]})]}):"history"===F?(0,h.jsxs)("div",{className:"nl-list-section",children:[(0,h.jsxs)("div",{className:"nl-search-bar-mini",children:[(0,h.jsx)(t.KSO,{}),(0,h.jsx)("input",{placeholder:"Search history data...",value:G,onChange:e=>O(e.target.value),autoFocus:!0})]}),(0,h.jsxs)("div",{className:"nl-scroll-box",children:[0===v.length&&(0,h.jsx)("div",{className:"nl-empty-msg",children:"No history data found."}),v.filter(e=>e.foodName.toLowerCase().includes(G.toLowerCase())).map((e,s)=>(0,h.jsxs)("div",{className:"nl-list-item",onClick:()=>(e=>{T({foodName:e.foodName,calories:e.calories,protein:e.protein,carbohydrates:e.carbohydrates,fat:e.fat}),I("new")})(e),children:[(0,h.jsx)("div",{className:"nl-item-icon",children:S(e.foodName)}),(0,h.jsxs)("div",{className:"nl-item-details",children:[(0,h.jsx)("div",{className:"nl-item-name",children:e.foodName}),(0,h.jsxs)("div",{className:"nl-item-meta",children:[e.calories," kcal \u2022 ",e.protein,"p ",e.carbohydrates,"c ",e.fat,"f"]})]}),(0,h.jsx)(t.OiG,{className:"nl-item-add"})]},"hist-".concat(s)))]})]}):(0,h.jsxs)("div",{className:"nl-list-section",children:[(0,h.jsx)("div",{className:"nl-section-title",children:"SAVED RECIPES"}),(0,h.jsxs)("div",{className:"nl-scroll-box",children:[(!m||0===m.length)&&(0,h.jsx)("div",{className:"nl-empty-msg",children:"No recipes available."}),m&&m.map(e=>{const s=e.items.reduce((e,s)=>e+(s.calories||0),0);return(0,h.jsxs)("div",{className:"nl-list-item blueprint",onClick:()=>(e=>{const s=e.items.map(e=>({tempId:Date.now()+Math.random(),foodName:e.foodName,calories:Number(e.calories)||0,protein:Number(e.protein)||0,carbohydrates:Number(e.carbohydrates)||0,fat:Number(e.fat)||0,servingSize:Number(e.servingSize)||1,servingUnit:e.servingUnit||"serving",icon:S(e.foodName)}));p(e=>[...e,...s]),E()})(e),children:[(0,h.jsx)("div",{className:"nl-item-icon blueprint",children:(0,h.jsx)(t.hko,{})}),(0,h.jsxs)("div",{className:"nl-item-details",children:[(0,h.jsx)("div",{className:"nl-item-name",children:e.name}),(0,h.jsxs)("div",{className:"nl-item-meta",children:[e.items.length," Items \u2022 ",s," kcal"]})]}),(0,h.jsx)("span",{className:"nl-badge-load",children:"LOAD"})]},e._id)})]})]})})]})})})]}),(0,h.jsx)(n.P.div,{className:"logger-right",initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:(0,h.jsxs)("div",{className:"elemental-container",children:[(0,h.jsxs)("div",{className:"elemental-header",children:[(0,h.jsx)("h2",{children:"Daily Overview"}),(0,h.jsx)("span",{className:"phase-badge",children:"Today's Progress"})]}),(0,h.jsxs)("div",{className:"elemental-grid",children:[(0,h.jsxs)("div",{className:"elemental-card protein",children:[(0,h.jsxs)("div",{className:"icon-glow-container",children:[(0,h.jsx)("div",{className:"glow-backdrop blue"}),(0,h.jsx)(t.BJb,{className:"macro-icon blue"})]}),(0,h.jsx)("span",{className:"macro-label",children:"PROTEIN"}),(0,h.jsxs)("span",{className:"macro-val",children:[z.protein,"g"]})]}),(0,h.jsxs)("div",{className:"elemental-card carbs",children:[(0,h.jsxs)("div",{className:"icon-glow-container",children:[(0,h.jsx)("div",{className:"glow-backdrop green"}),(0,h.jsx)(t.PYU,{className:"macro-icon green"})]}),(0,h.jsx)("span",{className:"macro-label",children:"CARBS"}),(0,h.jsxs)("span",{className:"macro-val",children:[z.carbohydrates,"g"]})]}),(0,h.jsxs)("div",{className:"elemental-card fats",children:[(0,h.jsxs)("div",{className:"icon-glow-container",children:[(0,h.jsx)("div",{className:"glow-backdrop orange"}),(0,h.jsx)(t.NfF,{className:"macro-icon orange"})]}),(0,h.jsx)("span",{className:"macro-label",children:"FATS"}),(0,h.jsxs)("span",{className:"macro-val",children:[z.fat,"g"]})]})]}),(0,h.jsxs)("div",{className:"synergy-chamber",children:[(0,h.jsx)("div",{className:"sc-header",children:"ENERGY BALANCE"}),(0,h.jsx)("div",{className:"sc-center",children:(0,h.jsxs)("div",{className:"circular-gauge",children:[(0,h.jsxs)("svg",{viewBox:"0 0 100 100",className:"gauge-svg",children:[(0,h.jsx)("circle",{cx:"50",cy:"50",r:"45",className:"gauge-track"}),(0,h.jsx)("circle",{cx:"50",cy:"50",r:"45",className:"gauge-fill",strokeDasharray:"283",strokeDashoffset:283-283*Math.min(z.calories/2500,1),transform:"rotate(-90 50 50)"})]}),(0,h.jsxs)("div",{className:"gauge-content",children:[(0,h.jsx)("span",{className:"gauge-val",children:z.calories}),(0,h.jsx)("span",{className:"gauge-unit",children:"KCAL"})]})]})}),(0,h.jsxs)("div",{className:"sc-bars",children:[(0,h.jsxs)("div",{className:"sc-bar-group",children:[(0,h.jsx)("div",{className:"sc-bar-label",children:"PROTEIN RATIO"}),(0,h.jsx)("div",{className:"sc-bar-track",children:(0,h.jsx)("div",{className:"sc-bar-fill blue",style:{width:"".concat(Math.min(z.protein/(z.protein+z.carbohydrates+z.fat||1)*100*2,100),"%")}})})]}),(0,h.jsxs)("div",{className:"sc-bar-group",children:[(0,h.jsx)("div",{className:"sc-bar-label",children:"CALORIE DENSITY"}),(0,h.jsx)("div",{className:"sc-bar-track",children:(0,h.jsx)("div",{className:"sc-bar-fill orange",style:{width:"".concat(Math.min(z.calories/1e3*100,100),"%")}})})]})]})]}),(0,h.jsx)("div",{className:"infusion-list",children:0===N.length?(0,h.jsx)("div",{className:"empty-infusion",children:"Select items to build your meal..."}):N.map((e,s)=>(0,h.jsxs)(n.P.div,{className:"infusion-item",initial:{opacity:0,y:5},animate:{opacity:1,y:0},children:[(0,h.jsxs)("div",{className:"ii-left",children:[(0,h.jsx)("div",{className:"ii-dot ".concat(A(e))}),(0,h.jsxs)("span",{className:"ii-name",children:[e.servingSize>1?"".concat(e.servingSize,"x "):"",e.foodName]})]}),(0,h.jsxs)("div",{className:"ii-right",children:[e.calories," kcal"]})]},e.tempId||s))})]})})]})};var T=a(3538);const P=e=>{let{meal:s,onClose:a}=e;const{updateMeal:i,loading:n}=(0,r.KS)(),[t,c]=(0,l.useState)(""),[o,d]=(0,l.useState)("Breakfast"),[m,x]=(0,l.useState)([]);if((0,l.useEffect)(()=>{s&&(c(s.mealName||""),d(s.mealType),x(s.items.map(e=>{let{foodName:s,calories:a,protein:l,carbohydrates:i,fat:n,servingSize:t,servingUnit:r}=e;return{foodName:s,calories:a,protein:l,carbohydrates:i,fat:n,servingSize:t,servingUnit:r}})))},[s]),!s)return null;const u=(e,s)=>{const a=[...m];a[e][s.target.name]=s.target.value,x(a)};return(0,h.jsx)("div",{className:"modal-backdrop",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsx)("h2",{children:"Edit Meal"}),(0,h.jsxs)("form",{onSubmit:e=>{e.preventDefault();const l={mealName:t,mealType:o,items:m.filter(e=>e.foodName&&e.calories&&e.servingSize)};i(s._id,l).then(()=>{a()})},className:"edit-meal-form",children:[(0,h.jsxs)("div",{className:"form-row",children:[(0,h.jsxs)("div",{className:"form-group-inline",children:[(0,h.jsx)("label",{htmlFor:"mealType",children:"Meal Type"}),(0,h.jsxs)("select",{id:"mealType",value:o,onChange:e=>d(e.target.value),children:[(0,h.jsx)("option",{children:"Breakfast"}),(0,h.jsx)("option",{children:"Lunch"}),(0,h.jsx)("option",{children:"Dinner"}),(0,h.jsx)("option",{children:"Snacks"})]})]}),(0,h.jsxs)("div",{className:"form-group-inline",children:[(0,h.jsx)("label",{htmlFor:"mealTitle",children:"Meal Title (Optional)"}),(0,h.jsx)("input",{type:"text",id:"mealTitle",value:t,onChange:e=>c(e.target.value)})]})]}),(0,h.jsx)("div",{className:"items-list",children:m.map((e,s)=>(0,h.jsxs)("div",{className:"food-item-row",children:[(0,h.jsx)("input",{type:"text",name:"foodName",placeholder:"Food Name",value:e.foodName,onChange:e=>u(s,e),required:!0,className:"food-name-input"}),(0,h.jsx)("input",{type:"number",name:"servingSize",placeholder:"Size",value:e.servingSize,onChange:e=>u(s,e),required:!0}),(0,h.jsx)("input",{type:"text",name:"servingUnit",placeholder:"Unit",value:e.servingUnit,onChange:e=>u(s,e),required:!0}),(0,h.jsx)("input",{type:"number",name:"calories",placeholder:"kcal",value:e.calories,onChange:e=>u(s,e),required:!0}),(0,h.jsx)("input",{type:"number",name:"protein",placeholder:"P (g)",value:e.protein,onChange:e=>u(s,e)}),(0,h.jsx)("input",{type:"number",name:"carbohydrates",placeholder:"C (g)",value:e.carbohydrates,onChange:e=>u(s,e)}),(0,h.jsx)("input",{type:"number",name:"fat",placeholder:"F (g)",value:e.fat,onChange:e=>u(s,e)}),(0,h.jsx)("button",{type:"button",className:"remove-item-btn",onClick:()=>(e=>x(m.filter((s,a)=>a!==e)))(s),children:"\xd7"})]},s))}),(0,h.jsxs)("div",{className:"modal-actions",children:[(0,h.jsx)("button",{type:"button",className:"add-item-btn",onClick:()=>x([...m,{foodName:"",calories:"",protein:"",carbohydrates:"",fat:"",servingSize:"",servingUnit:""}]),children:"+ Add Item"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("button",{type:"button",className:"btn-cancel",onClick:a,children:"Cancel"}),(0,h.jsx)("button",{type:"submit",className:"btn-save",disabled:n,children:n?"Saving...":"Save Changes"})]})]})]})]})})},M=()=>{const{nutritionLogs:e,loading:s,error:a,deleteMeal:c}=(0,r.KS)(),[o,d]=(0,l.useState)(null),{addRecipe:m}=(0,l.useContext)(k.A),x=(0,l.useMemo)(()=>{const s={calories:0,protein:0,carbohydrates:0,fat:0};return e.forEach(e=>{e.items.forEach(e=>{s.calories+=Number(e.calories)||0,s.protein+=Number(e.protein)||0,s.carbohydrates+=Number(e.carbohydrates)||0,s.fat+=Number(e.fat)||0})}),s},[e]);if(s)return(0,h.jsx)("p",{className:"nh-loading",children:"Loading history..."});if(a)return(0,h.jsx)("p",{className:"nh-error",children:a});if(0===e.length)return(0,h.jsx)("p",{className:"nh-empty",children:"No meals logged for this day. Use the 'Meal Logger' tab to add one!"});const u=2500,j=180,N=300,p=80;return(0,h.jsxs)("div",{className:"nh-container",children:[(0,h.jsxs)("div",{className:"nh-section-header",children:[(0,h.jsx)("span",{className:"nh-glow-dot"}),(0,h.jsx)("h2",{children:"DAILY SUMMARY"})]}),(0,h.jsxs)("div",{className:"nh-cards-grid",children:[(0,h.jsxs)(n.P.div,{className:"nh-card",whileHover:{y:-4},children:[(0,h.jsxs)("div",{className:"nh-card-top",children:[(0,h.jsx)("div",{className:"nh-icon-box blue",children:(0,h.jsx)(t.Itl,{})}),(0,h.jsxs)("span",{className:"nh-goal",children:["GOAL: ",u]})]}),(0,h.jsx)("div",{className:"nh-card-value",children:x.calories.toFixed(0)}),(0,h.jsx)("div",{className:"nh-card-label",children:"CALORIES"}),(0,h.jsx)("div",{className:"nh-progress-track",children:(0,h.jsx)("div",{className:"nh-progress-fill blue",style:{width:"".concat(Math.min(x.calories/u*100,100),"%")}})})]}),(0,h.jsxs)(n.P.div,{className:"nh-card",whileHover:{y:-4},children:[(0,h.jsxs)("div",{className:"nh-card-top",children:[(0,h.jsx)("div",{className:"nh-icon-box blue",children:(0,h.jsx)(t.BJb,{})}),(0,h.jsxs)("span",{className:"nh-goal",children:["GOAL: ",j,"G"]})]}),(0,h.jsxs)("div",{className:"nh-card-value",children:[x.protein.toFixed(1),"g"]}),(0,h.jsx)("div",{className:"nh-card-label",children:"PROTEIN"}),(0,h.jsx)("div",{className:"nh-progress-track",children:(0,h.jsx)("div",{className:"nh-progress-fill blue",style:{width:"".concat(Math.min(x.protein/j*100,100),"%")}})})]}),(0,h.jsxs)(n.P.div,{className:"nh-card",whileHover:{y:-4},children:[(0,h.jsxs)("div",{className:"nh-card-top",children:[(0,h.jsx)("div",{className:"nh-icon-box cyan",children:(0,h.jsx)(t.DFS,{})}),(0,h.jsxs)("span",{className:"nh-goal",children:["GOAL: ",N,"G"]})]}),(0,h.jsxs)("div",{className:"nh-card-value",children:[x.carbohydrates.toFixed(1),"g"]}),(0,h.jsx)("div",{className:"nh-card-label",children:"CARBS"}),(0,h.jsx)("div",{className:"nh-progress-track",children:(0,h.jsx)("div",{className:"nh-progress-fill cyan",style:{width:"".concat(Math.min(x.carbohydrates/N*100,100),"%")}})})]}),(0,h.jsxs)(n.P.div,{className:"nh-card",whileHover:{y:-4},children:[(0,h.jsxs)("div",{className:"nh-card-top",children:[(0,h.jsx)("div",{className:"nh-icon-box orange",children:(0,h.jsx)(t.RBv,{})}),(0,h.jsxs)("span",{className:"nh-goal",children:["GOAL: ",p,"G"]})]}),(0,h.jsxs)("div",{className:"nh-card-value",children:[x.fat.toFixed(1),"g"]}),(0,h.jsx)("div",{className:"nh-card-label",children:"FAT"}),(0,h.jsx)("div",{className:"nh-progress-track",children:(0,h.jsx)("div",{className:"nh-progress-fill orange",style:{width:"".concat(Math.min(x.fat/p*100,100),"%")}})})]})]}),(0,h.jsx)("div",{className:"nh-meals-list",children:(0,h.jsx)(i.N,{children:e.map((e,s)=>(0,h.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},transition:{delay:.08*s},className:"nh-meal-card",children:[(0,h.jsxs)("div",{className:"nh-meal-header",children:[(0,h.jsxs)("div",{className:"nh-meal-header-left",children:[(0,h.jsx)(t.xBk,{className:"nh-meal-icon"}),(0,h.jsx)("h3",{children:e.mealName||e.mealType})]}),(0,h.jsxs)("div",{className:"nh-meal-actions",children:[(0,h.jsx)("button",{onClick:()=>(e=>{const s=prompt("Enter a name for this recipe:",e.mealName||"My ".concat(e.mealType));if(s){const a=e.items.map(e=>{let{foodName:s,calories:a,protein:l,carbohydrates:i,fat:n,servingSize:t,servingUnit:r}=e;return{foodName:s,calories:a,protein:l,carbohydrates:i,fat:n,servingSize:t,servingUnit:r}});m({name:s,items:a})}})(e),title:"Save Recipe",children:(0,h.jsx)(t.dIn,{})}),(0,h.jsx)("button",{onClick:()=>d(e),title:"Edit",children:(0,h.jsx)(t.uO9,{})}),(0,h.jsx)("button",{onClick:()=>c(e._id),title:"Delete",children:(0,h.jsx)(t.qbC,{})})]})]}),(0,h.jsx)("div",{className:"nh-meal-items",children:e.items.map((e,s)=>(0,h.jsxs)("div",{className:"nh-item-row",children:[(0,h.jsxs)("div",{className:"nh-item-left",children:[(0,h.jsx)("div",{className:"nh-item-icon",children:(0,h.jsx)(T.nSL,{})}),(0,h.jsxs)("div",{className:"nh-item-text",children:[(0,h.jsx)("span",{className:"nh-item-name",children:e.foodName}),(0,h.jsx)("span",{className:"nh-item-cat",children:"MAIN COURSE"})]})]}),(0,h.jsxs)("div",{className:"nh-item-right",children:[(0,h.jsx)("span",{className:"nh-portion-badge",children:"1 PORTION"}),(0,h.jsxs)("div",{className:"nh-macros",children:[(0,h.jsxs)("div",{className:"nh-macro",children:[(0,h.jsx)("span",{className:"nh-macro-label",children:"KCAL"}),(0,h.jsx)("span",{className:"nh-macro-value white",children:Number(e.calories).toFixed(0)})]}),(0,h.jsxs)("div",{className:"nh-macro",children:[(0,h.jsx)("span",{className:"nh-macro-label",children:"P"}),(0,h.jsxs)("span",{className:"nh-macro-value blue",children:[Number(e.protein).toFixed(0),"g"]})]}),(0,h.jsxs)("div",{className:"nh-macro",children:[(0,h.jsx)("span",{className:"nh-macro-label",children:"C"}),(0,h.jsxs)("span",{className:"nh-macro-value cyan",children:[Number(e.carbohydrates).toFixed(0),"g"]})]}),(0,h.jsxs)("div",{className:"nh-macro",children:[(0,h.jsx)("span",{className:"nh-macro-label",children:"F"}),(0,h.jsxs)("span",{className:"nh-macro-value orange",children:[Number(e.fat).toFixed(0),"g"]})]})]})]})]},s))})]},e._id))})}),(0,h.jsxs)("div",{className:"nh-footer",children:["TACTICAL NUTRITION OS // V4.0.2",(0,h.jsxs)("div",{className:"nh-footer-dots",children:[(0,h.jsx)("span",{}),(0,h.jsx)("span",{}),(0,h.jsx)("span",{})]})]}),o&&(0,h.jsx)(P,{meal:o,onClose:()=>d(null)})]})},L=()=>{const{hydrationLogs:e,hydrationGoal:s,selectedDate:a,addHydration:c,getHydrationForDate:o,deleteHydration:d,setHydrationGoal:m,loading:x}=(0,r.KS)(),[u,j]=(0,l.useState)(""),[N,p]=(0,l.useState)(!1);(0,l.useEffect)(()=>{o(a)},[a,o]);const v=(0,l.useMemo)(()=>e.reduce((e,s)=>e+s.amount,0),[e]),g=Math.min(Math.round(v/s*100),100),y=e=>{const s=parseInt(e,10);if(!s||s<=0)return;p(!0),setTimeout(()=>p(!1),1200);c({date:a,amount:s}),j("")};return(0,h.jsxs)(n.P.div,{className:"hy-container",initial:{opacity:0},animate:{opacity:1},children:[(0,h.jsxs)("div",{className:"hy-main",children:[(0,h.jsxs)("div",{className:"hy-header",children:[(0,h.jsxs)("div",{className:"hy-header-left",children:[(0,h.jsx)("div",{className:"hy-icon-box",children:(0,h.jsx)(t.DFS,{})}),(0,h.jsxs)("div",{className:"hy-title-text",children:[(0,h.jsx)("h2",{children:"Hydration Tracker"}),(0,h.jsx)("p",{children:"Keep yourself refreshed and healthy"})]})]}),(0,h.jsx)("button",{className:"hy-edit-goal-btn",onClick:()=>{const e=prompt("Set your new daily hydration goal (in ml):",s),a=parseInt(e,10);a&&a>0&&m(a)},children:"EDIT GOAL"})]}),(0,h.jsx)("div",{className:"hy-circle-container",children:(0,h.jsxs)("div",{className:"hy-circle ".concat(N?"pouring":""),children:[(0,h.jsx)("div",{className:"hy-glass-shine"}),(0,h.jsxs)("svg",{className:"hy-circle-svg",viewBox:"0 0 200 200",children:[(0,h.jsx)("circle",{cx:"100",cy:"100",r:"88",className:"hy-circle-bg"}),(0,h.jsx)("circle",{cx:"100",cy:"100",r:"88",className:"hy-circle-progress",style:{strokeDasharray:"".concat(2*Math.PI*88),strokeDashoffset:"".concat(2*Math.PI*88*(1-g/100))}})]}),(0,h.jsx)("div",{className:"hy-water-fill",style:{"--water-level":"".concat(g,"%")},children:(0,h.jsxs)("div",{className:"hy-bubbles",children:[(0,h.jsx)("span",{className:"hy-bubble"}),(0,h.jsx)("span",{className:"hy-bubble"}),(0,h.jsx)("span",{className:"hy-bubble"}),(0,h.jsx)("span",{className:"hy-bubble"}),(0,h.jsx)("span",{className:"hy-bubble"}),(0,h.jsx)("span",{className:"hy-bubble"}),(0,h.jsx)("span",{className:"hy-bubble"}),(0,h.jsx)("span",{className:"hy-bubble"}),(0,h.jsx)("span",{className:"hy-bubble"}),(0,h.jsx)("span",{className:"hy-bubble"})]})}),(0,h.jsxs)("div",{className:"hy-circle-text",children:[(0,h.jsx)("span",{className:"hy-big-value",children:v}),(0,h.jsxs)("span",{className:"hy-sub-text",children:["ML / ",s," ML GOAL"]})]})]})}),(0,h.jsxs)("div",{className:"hy-quick-btns",children:[(0,h.jsxs)(n.P.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>y(250),disabled:x,className:"hy-preset-btn",children:[(0,h.jsx)("span",{className:"hy-preset-val",children:"+250"}),(0,h.jsx)("span",{className:"hy-preset-unit",children:"ML"})]}),(0,h.jsxs)(n.P.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>y(500),disabled:x,className:"hy-preset-btn",children:[(0,h.jsx)("span",{className:"hy-preset-val",children:"+500"}),(0,h.jsx)("span",{className:"hy-preset-unit",children:"ML"})]}),(0,h.jsxs)(n.P.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>y(750),disabled:x,className:"hy-preset-btn",children:[(0,h.jsx)("span",{className:"hy-preset-val",children:"+750"}),(0,h.jsx)("span",{className:"hy-preset-unit",children:"ML"})]})]}),(0,h.jsxs)("div",{className:"hy-custom-row",children:[(0,h.jsx)("input",{type:"number",value:u,onChange:e=>j(e.target.value),placeholder:"Enter custom amount (ml)",className:"hy-custom-input"}),(0,h.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>y(u),disabled:x||!u,className:"hy-custom-btn",children:(0,h.jsx)(t.OiG,{})})]}),(0,h.jsxs)("div",{className:"hy-log-section",children:[(0,h.jsx)("h3",{className:"hy-section-title",children:"TODAY'S LOG SEQUENCE"}),(0,h.jsx)("div",{className:"hy-log-list",children:e.length>0?(0,h.jsx)(i.N,{children:e.slice().reverse().map(e=>(0,h.jsxs)(n.P.div,{className:"hy-log-item",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,scale:.95},children:[(0,h.jsxs)("div",{className:"hy-log-left",children:[(0,h.jsx)(t.w_X,{className:"hy-log-clock"}),(0,h.jsx)("span",{className:"hy-log-time",children:new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,h.jsxs)("span",{className:"hy-log-amount",children:["+",e.amount," ml"]}),(0,h.jsx)(n.P.button,{whileHover:{scale:1.1},onClick:()=>d(e._id),className:"hy-log-delete",children:(0,h.jsx)(t.qbC,{})})]},e._id))}):(0,h.jsx)("div",{className:"hy-empty",children:"No water logged yet. Start hydrating!"})})]})]}),(0,h.jsxs)("aside",{className:"hy-sidebar",children:[(0,h.jsxs)("div",{className:"hy-sidebar-card",children:[(0,h.jsx)("h4",{className:"hy-card-title",children:"DAILY HYDRATION GOAL"}),(0,h.jsxs)("p",{className:"hy-goal-display",children:[(0,h.jsx)("span",{className:"hy-goal-num",children:s}),(0,h.jsx)("span",{className:"hy-goal-unit",children:"ml"})]}),(0,h.jsx)("p",{className:"hy-card-desc",children:"Recommended daily water intake varies, but 8-10 glasses (2-2.5L) is a common guideline for active users in combat phase."})]}),(0,h.jsxs)("div",{className:"hy-sidebar-card",children:[(0,h.jsxs)("h4",{className:"hy-tips-title",children:[(0,h.jsx)(t.DFS,{className:"hy-tips-icon"})," TACTICAL TIPS"]}),(0,h.jsxs)("ul",{className:"hy-tips-list",children:[(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{className:"hy-tip-dot"}),"Drink water with every meal protocol"]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{className:"hy-tip-dot"}),"Keep a hydration unit within proximity"]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{className:"hy-tip-dot"}),"Consume liquids at first thirst signal"]})]})]}),(0,h.jsxs)("div",{className:"hy-sidebar-card hy-phase-card",children:[(0,h.jsxs)("div",{className:"hy-phase-text",children:[(0,h.jsx)("span",{className:"hy-phase-label",children:"CURRENT PHASE"}),(0,h.jsx)("span",{className:"hy-phase-value",children:"CONSTRUCTION"})]}),(0,h.jsx)("div",{className:"hy-phase-dot"})]}),(0,h.jsx)("p",{className:"hy-sidebar-footer",children:"SELECT ITEMS TO BEGIN INFUSION SEQUENCE"})]})]})},R=e=>{let{label:s,value:a,unit:l=""}=e;return(0,h.jsxs)("div",{className:"stat-card",children:[(0,h.jsxs)("span",{className:"stat-value",children:[a,(0,h.jsx)("span",{className:"stat-unit",children:l})]}),(0,h.jsx)("span",{className:"stat-label",children:s})]})};var F=a(7554),I=a(7734),G=a(2185),O=a(6026),E=a(379),z=a(95),H=a(3243),U=a(9016);const K=e=>{let{data:s,goal:a}=e;const l=e=>{let{active:s,payload:a,label:l}=e;return s&&a&&a.length?(0,h.jsxs)("div",{className:"custom-tooltip",style:{background:"#1a1f2e",border:"1px solid #764be0",borderRadius:"8px",padding:"10px"},children:[(0,h.jsx)("p",{className:"label",style:{color:"#fff",marginBottom:"4px",fontSize:"0.85rem"},children:l}),(0,h.jsx)("p",{className:"intro",style:{color:"#c7d2e7",fontSize:"0.9rem",fontWeight:"bold"},children:"".concat(a[0].value," kcal")})]}):null};return(0,h.jsx)(c.u,{width:"100%",height:300,children:(0,h.jsxs)(F.b,{data:s,margin:{top:10,right:20,left:0,bottom:0},children:[(0,h.jsx)(I.d,{stroke:"#2d3748",strokeDasharray:"3 3",vertical:!1}),(0,h.jsx)(G.W,{dataKey:"date",stroke:"#718096",fontSize:11,tickLine:!1,axisLine:!1,tick:{fill:"#718096"},minTickGap:30}),(0,h.jsx)(O.h,{stroke:"#718096",fontSize:11,tickLine:!1,axisLine:!1,tick:{fill:"#718096"}}),(0,h.jsx)(E.m,{content:(0,h.jsx)(l,{}),cursor:{stroke:"rgba(118, 75, 224, 0.5)",strokeWidth:1}}),(0,h.jsx)(z.s,{iconType:"circle",wrapperStyle:{paddingTop:"10px"}}),(0,h.jsx)(H.e,{y:a,stroke:"#ff9f40",strokeDasharray:"5 5",strokeWidth:1.5}),(0,h.jsx)(U.N,{type:"monotone",dataKey:"totalCalories",name:"Daily Intake",stroke:"#8b5cf6",strokeWidth:3,dot:!1,activeDot:{r:6,fill:"#8b5cf6",stroke:"#fff",strokeWidth:2},animationDuration:1500})]})})},B={protein:"#adff2f",carbs:"#00bfff",fat:"#ff9f40"},_=e=>{let{data:s}=e;const a=[{name:"Protein",value:Math.round(s.avgProtein)},{name:"Carbs",value:Math.round(s.avgCarbs)},{name:"Fat",value:Math.round(s.avgFat)}],l=e=>{let{active:s,payload:a}=e;return s&&a&&a.length?(0,h.jsx)("div",{className:"custom-tooltip",children:"".concat(a[0].name,": ").concat(a[0].value,"g (avg)")}):null};return(0,h.jsx)(c.u,{width:"100%",height:300,children:(0,h.jsxs)(o.r,{children:[(0,h.jsx)(d.F,{data:a,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,fill:"#8884d8",paddingAngle:5,dataKey:"value",nameKey:"name",children:a.map((e,s)=>(0,h.jsx)(m.f,{fill:B[e.name.toLowerCase()]},"cell-".concat(s)))}),(0,h.jsx)(E.m,{content:(0,h.jsx)(l,{})}),(0,h.jsx)(z.s,{})]})})},Y=l.memo(e=>{let{day:s,status:a,style:l}=e;const i="status-".concat(a);return(0,h.jsx)("div",{className:"path-stone ".concat(i),style:l,children:(0,h.jsx)("div",{className:"stone-day-number",children:s})})}),q=e=>{let{data:s,user:a,goal:i}=e;const n=(0,l.useMemo)(()=>{let e;if(a&&a.streakStartDate){const s=new Date(a.streakStartDate),l=new Date,i=Math.abs(l-s),n=Math.ceil(i/864e5)+1;e=Math.min(n,365)}else e=s&&s.length>0?Math.min(s.length,365):30;const l=new Map((s||[]).map(e=>[e.date,e])),n=[];for(let s=0;s<e;s++){const a=new Date;a.setDate(a.getDate()-(e-1-s));const t=a.toISOString().split("T")[0],r=s+1;let c="future";if(l.has(t)){const e=l.get(t),s=i||2200;c=Math.abs(e.totalCalories-s)<.1*s?"flawless":"standard"}else new Date>a&&(c="broken");const o=.5,d=s*80,m=50*Math.sin(s*o);n.push({day:r,status:c,x:d,y:m})}return n},[s,i,a]),t=80*n.length+100;return(0,h.jsx)("div",{className:"monarchs-road-container",children:(0,h.jsx)("div",{className:"monarchs-road-path",style:{width:"".concat(t,"px")},children:n.map(e=>(0,h.jsx)(Y,{day:e.day,status:e.status,style:{transform:"translate(".concat(e.x,"px, calc(50% + ").concat(e.y,"px))")}},e.day))})})},W=()=>{const{user:e,updateGoals:s}=(0,l.useContext)(C.c),{setNutritionGoals:a}=(0,r.KS)(),[i,c]=(0,l.useState)({calorieGoal:2200,proteinGoal:150,carbGoal:250,fatGoal:70}),[o,d]=(0,l.useState)(""),[m,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{e&&e.nutritionGoals&&c(e.nutritionGoals)},[e]);const u=e=>c((0,b.A)((0,b.A)({},i),{},{[e.target.name]:e.target.value}));return(0,h.jsxs)(n.P.form,{onSubmit:async e=>{e.preventDefault(),x(!0);const l=await s(i);l.success?(a({calories:parseInt(i.calorieGoal),protein:parseInt(i.proteinGoal),fat:parseInt(i.fatGoal),carbs:parseInt(i.carbGoal)}),d("Goals updated!")):d(l.error),x(!1),setTimeout(()=>d(""),3e3)},className:"goal-setter-form",initial:{opacity:0,y:-8},animate:{opacity:1,y:0},children:[(0,h.jsxs)("div",{className:"goal-inputs-grid",children:[(0,h.jsxs)("div",{className:"goal-field",children:[(0,h.jsx)("label",{children:"Daily Calories"}),(0,h.jsxs)("div",{className:"input-with-icon",children:[(0,h.jsx)(t.Itl,{className:"input-icon",style:{color:"#ff007a"}}),(0,h.jsx)("input",{type:"number",name:"calorieGoal",value:i.calorieGoal,onChange:u}),(0,h.jsx)("span",{className:"unit",children:"kcal"})]})]}),(0,h.jsxs)("div",{className:"goal-field",children:[(0,h.jsx)("label",{children:"Protein"}),(0,h.jsxs)("div",{className:"input-with-icon",children:[(0,h.jsx)("div",{className:"dot",style:{background:"#adff2f"}}),(0,h.jsx)("input",{type:"number",name:"proteinGoal",value:i.proteinGoal,onChange:u}),(0,h.jsx)("span",{className:"unit",children:"g"})]})]}),(0,h.jsxs)("div",{className:"goal-field",children:[(0,h.jsx)("label",{children:"Carbohydrates"}),(0,h.jsxs)("div",{className:"input-with-icon",children:[(0,h.jsx)("div",{className:"dot",style:{background:"#ff9f40"}}),(0,h.jsx)("input",{type:"number",name:"carbGoal",value:i.carbGoal,onChange:u}),(0,h.jsx)("span",{className:"unit",children:"g"})]})]}),(0,h.jsxs)("div",{className:"goal-field",children:[(0,h.jsx)("label",{children:"Fats"}),(0,h.jsxs)("div",{className:"input-with-icon",children:[(0,h.jsx)("div",{className:"dot",style:{background:"#8884d8"}}),(0,h.jsx)("input",{type:"number",name:"fatGoal",value:i.fatGoal,onChange:u}),(0,h.jsx)("span",{className:"unit",children:"g"})]})]})]}),(0,h.jsxs)("div",{className:"form-actions",children:[(0,h.jsx)(n.P.button,{type:"submit",whileHover:{scale:1.02,boxShadow:"0 0 15px rgba(118, 75, 224, 0.4)"},whileTap:{scale:.98},className:"set-goals-btn",disabled:m,children:m?"Updating...":"Update Targets"}),o&&(0,h.jsx)(n.P.span,{className:"status-message",initial:{opacity:0},animate:{opacity:1},children:o})]})]})},V=()=>{var e,s;const{user:a}=(0,l.useContext)(C.c),{progressData:i,getProgressData:c,loading:o}=(0,r.KS)(),[d,m]=(0,l.useState)(30),{resetStreak:x}=(0,l.useContext)(C.c);(0,l.useEffect)(()=>{a&&c(d)},[d,c,a]);const u=(0,l.useMemo)(()=>{if(!i||0===i.length)return{avgCalories:0,avgProtein:0,avgCarbs:0,avgFat:0};const e=i.reduce((e,s)=>(e.calories+=s.totalCalories,e.protein+=s.totalProtein,e.carbs+=s.totalCarbs,e.fat+=s.totalFat,e),{calories:0,protein:0,carbs:0,fat:0}),s=i.length;return{avgCalories:e.calories/s,avgProtein:e.protein/s,avgCarbs:e.carbs/s,avgFat:e.fat/s}},[i]);return(0,h.jsxs)(n.P.div,{className:"nutrition-progress-container",initial:{opacity:0},animate:{opacity:1},children:[(0,h.jsxs)(n.P.section,{className:"progress-section targets-section",initial:{y:-12},animate:{y:0},children:[(0,h.jsxs)("div",{className:"section-title-group",children:[(0,h.jsx)(t.RBv,{className:"section-icon"}),(0,h.jsx)("h3",{children:"Set Your Targets"})]}),(0,h.jsx)(W,{})]}),(0,h.jsxs)(n.P.section,{className:"progress-section",initial:{y:12},animate:{y:0},children:[(0,h.jsxs)("div",{className:"section-header",children:[(0,h.jsxs)("div",{className:"section-title-group",children:[(0,h.jsx)(t.YYR,{className:"section-icon"}),(0,h.jsx)("h3",{children:"Performance Analysis"})]}),(0,h.jsxs)("div",{className:"period-selector",children:[(0,h.jsx)(n.P.button,{whileHover:{scale:1.05},onClick:()=>m(7),className:7===d?"active":"",children:"7 Days"}),(0,h.jsx)(n.P.button,{whileHover:{scale:1.05},onClick:()=>m(30),className:30===d?"active":"",children:"30 Days"})]})]}),o&&(0,h.jsx)("p",{className:"loading-msg",children:"Analyzing data..."}),!o&&i&&a&&(0,h.jsxs)("div",{className:"charts-grid",children:[(0,h.jsxs)("div",{className:"stat-cards-grid",children:[(0,h.jsx)(R,{label:"Avg. Daily Calories",value:u.avgCalories.toFixed(0),unit:"kcal"}),(0,h.jsx)(R,{label:"Avg. Daily Protein",value:u.avgProtein.toFixed(1),unit:"g"}),(0,h.jsx)(R,{label:"Avg. Daily Carbs",value:u.avgCarbs.toFixed(1),unit:"g"}),(0,h.jsx)(R,{label:"Avg. Daily Fat",value:u.avgFat.toFixed(1),unit:"g"})]}),(0,h.jsxs)(n.P.div,{className:"chart-container",initial:{scale:.98},animate:{scale:1},children:[(0,h.jsxs)("h4",{children:[(0,h.jsx)(t.Itl,{})," Calorie Trend"]}),(0,h.jsx)(K,{data:i,goal:(null===(e=a.nutritionGoals)||void 0===e?void 0:e.calorieGoal)||2200})]}),(0,h.jsxs)(n.P.div,{className:"chart-container",initial:{scale:.98},animate:{scale:1},children:[(0,h.jsx)("h4",{children:"Macro Breakdown"}),(0,h.jsx)(_,{data:u})]}),(0,h.jsxs)(n.P.div,{className:"chart-container full-width",initial:{scale:.98},animate:{scale:1},children:[(0,h.jsxs)("div",{className:"consistency-header",children:[(0,h.jsx)("h4",{children:"Logging Consistency"}),(0,h.jsx)(n.P.button,{onClick:x,whileHover:{scale:1.05},className:"reset-streak-btn",children:"Reset Streak"})]}),(0,h.jsx)(q,{data:i,user:a,goal:(null===(s=a.nutritionGoals)||void 0===s?void 0:s.calorieGoal)||2200})]})]}),!o&&(!i||0===i.length)&&(0,h.jsx)("p",{className:"no-data-msg",children:"No data to analyze. Start logging meals to see your progress!"})]})]})};var Q=a(6801),X=a(2023),J=a(1016);const Z=()=>{const e=(0,l.useCallback)(async e=>{await(0,J.m)(e)},[]),s=l.useMemo(()=>({fullScreen:{enable:!0,zIndex:0},particles:{number:{value:30,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"image",image:[{src:"/icons/nutrition/heartbeat.svg",width:100,height:100},{src:"/icons/nutrition/water-small.svg",width:100,height:100},{src:"/icons/nutrition/utensils.svg",width:100,height:100}]},opacity:{value:1,random:!1},size:{value:14,random:!0},links:{enable:!0,distance:100,color:"#ffffff",opacity:.6,width:2},move:{enable:!0,speed:.65,direction:"none",out_mode:"out"}},interactivity:{events:{onhover:{enable:!0,mode:"grab"}},modes:{grab:{distance:200,links:{opacity:1,color:"#14b8a6"}}}},detectRetina:!0}),[]);return(0,h.jsx)(X.A,{id:"nutrition-particles",init:e,options:s})},$=()=>{const[e,s]=(0,l.useState)("summary"),[a,c]=(0,l.useState)(!0),{selectedDate:o,setDate:d,getMealsForDate:m,getHydrationForDate:x}=(0,r.KS)();(0,l.useEffect)(()=>{(async()=>{await Promise.all([m(o),x(o)]),c(!1)})()},[o,m,x]);const u=e=>{const s=new Date(o);s.setDate(s.getDate()+e),d(s)},j=e=>{const s=new Date;return e.toDateString()===s.toDateString()};return(0,h.jsxs)("div",{className:"nutrition-page system-ui relative",children:["summary"===e&&(0,h.jsx)(Z,{}),(0,h.jsx)(i.N,{children:a&&(0,h.jsxs)(n.P.div,{className:"nutrition-loading-overlay",initial:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[(0,h.jsx)("div",{className:"loading-spinner"}),(0,h.jsx)("p",{children:"Loading Nutrition Data..."})]})}),(0,h.jsxs)(n.P.header,{className:"nutrition-top",initial:{opacity:0,y:-8},animate:{opacity:1,y:0},children:[(0,h.jsx)("div",{className:"nutrition-header-left",children:(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{children:"Nutrition Center"}),(0,h.jsx)("p",{className:"sub",children:"Track meals, hydration and goals"})]})}),(0,h.jsxs)("div",{className:"nutrition-header-right",children:[(0,h.jsxs)("div",{className:"date-navigator-glass",children:[(0,h.jsx)(n.P.button,{whileHover:{scale:1.1,x:-2},whileTap:{scale:.95},onClick:()=>u(-1),className:"nav-icon-btn",children:(0,h.jsx)(t._Jj,{})}),(0,h.jsxs)("div",{className:"current-date-display",children:[(0,h.jsx)(t.bfZ,{className:"calendar-icon"}),(0,h.jsx)("h3",{children:new Date(o).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})})]}),(0,h.jsx)(n.P.button,{whileHover:{scale:1.1,x:2},whileTap:{scale:.95},onClick:()=>u(1),className:"nav-icon-btn",children:(0,h.jsx)(t.X6T,{})})]}),(0,h.jsx)(Q.A,{})]})]}),(0,h.jsx)("nav",{className:"nutrition-tabs","aria-label":"Nutrition tabs",children:[{id:"summary",label:"Summary"},{id:"logger",label:"Log Meal"},{id:"history",label:"History"},{id:"hydration",label:"Hydration"},{id:"progress",label:"Progress"}].map(a=>(0,h.jsx)(n.P.button,{className:a.id===e?"active":"",onClick:()=>s(a.id),whileHover:{scale:1.02},whileTap:{scale:.98},children:a.label},a.id))}),(0,h.jsx)("main",{className:"tab-content",children:(()=>{switch(e){case"summary":default:return(0,h.jsx)(y,{setActiveTab:s});case"logger":return(0,h.jsx)(D,{selectedDate:o});case"history":return(0,h.jsx)(M,{selectedDate:o,handleDateChange:u,isToday:j});case"hydration":return(0,h.jsx)(L,{});case"progress":return(0,h.jsx)(V,{})}})()})]})}}}]);
//# sourceMappingURL=917.ca89342c.chunk.js.map